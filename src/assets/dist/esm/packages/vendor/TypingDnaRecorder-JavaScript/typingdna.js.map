{"version":3,"file":"typingdna.js","sources":["../../../../../packages/vendor/TypingDnaRecorder-JavaScript/typingdna.js"],"sourcesContent":["/*\n * Checking in as there is no npm module to consume. \n * Current version is 2.15.\n * Repo - https://github.com/TypingDNA/TypingDnaRecorder-JavaScript\n */\n\n/**\n * TypingDNA - Typing Biometrics JavaScript API\n * https://api.typingdna.com/scripts/typingdna.js\n * https://typingdna.com/scripts/typingdna.js (alternative)\n *\n * @version 2.15\n * @author Raul Popa\n * @copyright SC TypingDNA SRL, http://typingdna.com\n * @license http://www.apache.org/licenses/LICENSE-2.0\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Typical usage:\n * var tdna = new TypingDNA(); // creates a new TypingDNA object and starts recording\n * var typingPattern = tdna.getTypingPattern({type=1, text=\"Hello5g21?*\"});\n * returns a type 1 typing pattern (and continues recording afterwards)\n *\n * Optional:\n * tdna.stop(); // ends recording and clears history stack (returns recording flag: false)\n * tdna.start(); // restarts the recording after a stop (returns recording flag: true)\n * tdna.reset(); // restarts the recording anytime, clears history stack and starts from scratch (returns nothing)\n * var typingPatternQuality = TypingDNA.getQuality(typingPattern); //returns the quality/strength of any typing pattern\n * (there is no need to initialize the class to do pattern quality checking)\n */\n\n/**\n * Creates a single instance (or a reference) of the TypingDNA class\n * @return {Object} Returns the single instance of the TypingDNA class.\n * @example var tdna = new TypingDNA();\n */\nmodule.exports = function TypingDNA() {\n  if (TypingDNA.initialized != true) {\n    TypingDNA.prototype.start = function() {\n      return TypingDNA.start.apply(this, arguments);\n    }\n    TypingDNA.prototype.stop = function() {\n      return TypingDNA.stop.apply(this, arguments);\n    }\n    TypingDNA.prototype.reset = function() {\n      return TypingDNA.reset.apply(this, arguments);\n    }\n    TypingDNA.prototype.addTarget = function() {\n      return TypingDNA.addTarget.apply(this, arguments);\n    }\n    TypingDNA.prototype.removeTarget = function() {\n      return TypingDNA.removeTarget.apply(this, arguments);\n    }\n    TypingDNA.prototype.getTypingPattern = function() {\n      return TypingDNA.getTypingPattern.apply(this, arguments);\n    }\n    TypingDNA.prototype.get = function() {\n      // still works but will be deprecated in favor of getTypignPattern()\n      return TypingDNA.get.apply(this, arguments);\n    }\n    TypingDNA.prototype.startDiagram = function() {\n      // deprecated in favor of start()\n      //return TypingDNA.startDiagram.apply(this, arguments);\n    }\n    TypingDNA.prototype.stopDiagram = function() {\n      // deprecated in favor of stop()\n      //return TypingDNA.stopDiagram.apply(this, arguments);\n    }\n    TypingDNA.prototype.getDiagram = function() {\n      // still works but will be deprecated in favor of getTypignPattern()\n      return TypingDNA.getDiagram.apply(this, arguments);\n    }\n    TypingDNA.prototype.getExtendedDiagram = function() {\n      // still works but will be deprecated in favor of getTypignPattern()\n      return TypingDNA.getExtendedDiagram.apply(this, arguments);\n    }\n    TypingDNA.prototype.getMouseDiagram = function() {\n      return TypingDNA.getMouseDiagram.apply(this, arguments);\n    }\n    TypingDNA.prototype.startMouse = function() {\n      return TypingDNA.startMouse.apply(this, arguments);\n    }\n    TypingDNA.prototype.stopMouse = function() {\n      return TypingDNA.stopMouse.apply(this, arguments);\n    }\n    TypingDNA.prototype.getQuality = function() {\n      return TypingDNA.getQuality.apply(this, arguments);\n    }\n    TypingDNA.prototype.getLength = function() {\n      return TypingDNA.getLength.apply(this, arguments);\n    }\n    TypingDNA.prototype.isMobile = function() {\n      return TypingDNA.isMobile.apply(this, arguments);\n    }\n    TypingDNA.prototype.getTextId = function() {\n      return TypingDNA.getTextId.apply(this, arguments)\n    }\n    TypingDNA.initialized = true;\n    TypingDNA.prototype.maxHistoryLength = TypingDNA.maxHistoryLength;\n    TypingDNA.prototype.defaultHistoryLength = TypingDNA.defaultHistoryLength;\n    TypingDNA.prototype.maxSeekTime = TypingDNA.maxSeekTime;\n    TypingDNA.prototype.maxPressTime = TypingDNA.maxPressTime;\n    TypingDNA.version = 2.15;\n    TypingDNA.flags = 0;\n    TypingDNA.instance = this;\n    TypingDNA.document = document;\n    TypingDNA.maxHistoryLength = 2000;\n    TypingDNA.maxSeekTime = 1500;\n    TypingDNA.maxPressTime = 300;\n    TypingDNA.defaultHistoryLength = 160;\n    TypingDNA.spKeyCodes = [8, 13, 32];\n    TypingDNA.spKeyCodesObj = {\n      8: 1,\n      13: 1,\n      32: 1\n    };\n    TypingDNA.keyCodes = [65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 32, 222, 188, 190, 186, 187, 189, 191, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57];\n    TypingDNA.keyCodesObj = {}\n    for (var i in TypingDNA.keyCodes) {\n      TypingDNA.keyCodesObj[TypingDNA.keyCodes[i]] = 1;\n    }\n    TypingDNA.pt1 = TypingDNA.ut1 = (new Date).getTime();\n    TypingDNA.wfk = [];\n    TypingDNA.sti = [];\n    TypingDNA.skt = [];\n    TypingDNA.recording = true;\n    TypingDNA.mouseRecording = true;\n    TypingDNA.mouseMoveRecording = false;\n    TypingDNA.spKeyRecording = true;\n    TypingDNA.diagramRecording = true;\n    TypingDNA.dwfk = [];\n    TypingDNA.dsti = [];\n    TypingDNA.dskt = [];\n    TypingDNA.drkc = [];\n    TypingDNA.dlastDownKey;\n    TypingDNA.prevKeyCode = 0;\n    TypingDNA.maxMoveDeltaTime = 600;\n    TypingDNA.maxScrollDeltaTime = 800;\n    TypingDNA.maxStopTime = 1500;\n    TypingDNA.maxClickTime = 600;\n    TypingDNA.maxMouseHistoryLength = 500;\n    TypingDNA.lastMouseMoveTime = TypingDNA.lastMouseDownTime = (new Date).getTime();\n    TypingDNA.stopTimes = [];\n    TypingDNA.clickTimes = [];\n    TypingDNA.lastMouseStop = true;\n    TypingDNA.zl = 0.0000001;\n    TypingDNA.isAndroidChrome = false;\n    TypingDNA.ACLastTime = (new Date).getTime();\n    TypingDNA.ACSeekTime = 0;\n    TypingDNA.ACPressTime = 0;\n    TypingDNA.ACLastCharCode = 0;\n    TypingDNA.ACLastKeyCode = 0;\n    TypingDNA.ACInputLengths = {\n      inputs: [],\n      lastLength: [],\n    };\n    TypingDNA.ACPreviousKeyCode = 0;\n    TypingDNA.targetIds = [];\n    TypingDNA.lastTarget = \"\";\n    TypingDNA.lastTargetFound = false;\n    TypingDNA.replaceMissingKeys = true;\n    TypingDNA.replaceMissingKeysPerc = 7;\n\n    TypingDNA.keyDown = function(e) {\n      if (!TypingDNA.recording && !TypingDNA.diagramRecording) {\n        return;\n      }\n      if (!TypingDNA.isTarget(e.target.id)) {\n        return;\n      }\n      var keyCode = e.keyCode;\n      if (TypingDNA.wfk[keyCode] == 1 || TypingDNA.dwfk[keyCode] == 1) {\n        //return;\n      }\n      if (keyCode == 229 && TypingDNA.isMobile() && !TypingDNA.isAndroidChrome) {\n        TypingDNA.isAndroidChrome = true;\n\n        TypingDNA.ACSeekTime = (new Date).getTime() - TypingDNA.ACLastTime;\n        TypingDNA.ACLastTime = (new Date).getTime();\n\n        TypingDNA.document.removeEventListener(\"keydown\", TypingDNA.keyDown);\n        TypingDNA.document.removeEventListener(\"keyup\", TypingDNA.keyUp);\n        TypingDNA.document.removeEventListener(\"keypress\", TypingDNA.keyPress);\n\n        // if android\n        TypingDNA.document.addEventListener(\"keydown\", TypingDNA.ACKeyDown);\n        TypingDNA.document.addEventListener(\"keyup\", TypingDNA.ACKeyUp);\n      } else {\n        var t0 = TypingDNA.pt1;\n        TypingDNA.pt1 = (new Date).getTime();\n        var seekTotal = TypingDNA.pt1 - t0;\n        var startTime = TypingDNA.pt1;\n        if (TypingDNA.recording == true || (TypingDNA.spKeyCodesObj[keyCode] && TypingDNA.spKeyRecording == true)) {\n          if (!e.shiftKey || TypingDNA.isMobile()) {\n            TypingDNA.wfk[keyCode] = 1;\n            TypingDNA.skt[keyCode] = seekTotal;\n            TypingDNA.sti[keyCode] = startTime;\n          }\n        }\n        if (TypingDNA.diagramRecording == true) {\n          TypingDNA.dwfk[keyCode] = 1;\n          TypingDNA.dskt[keyCode] = seekTotal;\n          TypingDNA.dsti[keyCode] = startTime;\n          TypingDNA.dlastDownKey = keyCode;\n        }\n      }\n    }\n\n    TypingDNA.keyPress = function(e) {\n      if (!TypingDNA.recording && !TypingDNA.diagramRecording) {\n        return;\n      }\n      if (!TypingDNA.isTarget(e.target.id)) {\n        return;\n      }\n      if (TypingDNA.diagramRecording == true) {\n        var keyCode = TypingDNA.dlastDownKey;\n        TypingDNA.drkc[keyCode] = e.charCode;\n      }\n    }\n\n    TypingDNA.keyUp = function(e) {\n      if (!TypingDNA.recording && !TypingDNA.diagramRecording) {\n        return;\n      }\n      if (!TypingDNA.isTarget(e.target.id)) {\n        return;\n      }\n      var ut = (new Date).getTime();\n      var keyCode = e.keyCode;\n      if (TypingDNA.recording == true || (TypingDNA.spKeyCodesObj[keyCode] && TypingDNA.spKeyRecording == true)) {\n        if (!e.shiftKey || TypingDNA.isMobile()) {\n          if (TypingDNA.wfk[keyCode] == 1) {\n            var pressTime = ut - TypingDNA.sti[keyCode];\n            var seekTime = TypingDNA.skt[keyCode];\n            var arr = [keyCode, seekTime, pressTime, TypingDNA.prevKeyCode, ut, e.target.id];\n            TypingDNA.history.add(arr);\n            TypingDNA.prevKeyCode = keyCode;\n          }\n        }\n        TypingDNA.wfk[keyCode] = 0;\n      }\n      if (TypingDNA.diagramRecording == true) {\n        if (TypingDNA.drkc[keyCode] != undefined && TypingDNA.drkc[keyCode] != 0) {\n          if (TypingDNA.dwfk[keyCode] == 1) {\n            var pressTime = ut - TypingDNA.dsti[keyCode];\n            var seekTime = TypingDNA.dskt[keyCode];\n            var realKeyCode = TypingDNA.drkc[keyCode];\n            var arrD = [keyCode, seekTime, pressTime, realKeyCode, ut, e.target.id];\n            TypingDNA.history.addDiagram(arrD);\n          }\n        }\n        TypingDNA.dwfk[keyCode] = 0;\n      }\n    }\n\n    TypingDNA.mouseScroll = function(e) {\n      if (TypingDNA.mouseRecording == true) {\n        if (TypingDNA.mouseMoveRecording == true) {\n          if (TypingDNA.mouse.scrollStarted == true) {\n            var currentTime = (new Date).getTime();\n            TypingDNA.mouse.scrollTimes.push(currentTime);\n            TypingDNA.mouse.scrollTopArr.push(TypingDNA.document.body.scrollTop);\n            clearInterval(TypingDNA.scrollInterval);\n            TypingDNA.scrollInterval = setInterval(TypingDNA.mouse.checkScroll, TypingDNA.maxScrollDeltaTime);\n          } else {\n            TypingDNA.mouse.scrollStarted = true\n          }\n        }\n      }\n    }\n\n    TypingDNA.mouseMove = function(e) {\n      if (TypingDNA.mouseRecording == true) {\n        var currentTime = (new Date).getTime();\n        if (TypingDNA.mouseMoveRecording == true) {\n          if (TypingDNA.mouse.started == true) {\n            TypingDNA.mouse.times.push(currentTime);\n            TypingDNA.mouse.xPositions.push(e.screenX);\n            TypingDNA.mouse.yPositions.push(e.screenY);\n            clearInterval(TypingDNA.moveInterval);\n            TypingDNA.moveInterval = setInterval(TypingDNA.mouse.checkMove, TypingDNA.maxMoveDeltaTime);\n          } else {\n            TypingDNA.mouse.started = true;\n          }\n        }\n        TypingDNA.lastMouseMoveTime = currentTime;\n      }\n    }\n\n    TypingDNA.mouseDown = function(e) {\n      if (TypingDNA.mouseRecording == true) {\n        TypingDNA.mouse.checkMove();\n        TypingDNA.mouse.checkScroll();\n        if (e.which == 1) {\n          TypingDNA.lastMouseDownTime = (new Date).getTime();\n          var stopTime = TypingDNA.lastMouseDownTime - TypingDNA.lastMouseMoveTime;\n          if (stopTime < TypingDNA.maxStopTime && TypingDNA.lastMouseStop == false) {\n            TypingDNA.stopTimes.push(stopTime);\n            if (TypingDNA.mouseMoveRecording == true) {\n              var eventType = 3;\n              var arr = [eventType, stopTime];\n              TypingDNA.mouse.history.add(arr);\n              TypingDNA.lastMouseStop = true;\n            }\n          }\n        }\n      }\n    }\n\n    TypingDNA.mouseUp = function(e) {\n      if (TypingDNA.mouseRecording == true) {\n        if (e.which == 1) {\n          var clickTime = (new Date).getTime() - TypingDNA.lastMouseDownTime;\n          if (clickTime < TypingDNA.maxClickTime && TypingDNA.lastMouseDownTime > TypingDNA.lastMouseMoveTime) {\n            TypingDNA.clickTimes.push(clickTime);\n            if (TypingDNA.mouseMoveRecording == true) {\n              var eventType = 4;\n              var arr = [eventType, clickTime];\n              TypingDNA.mouse.history.add(arr);\n            }\n          }\n        }\n      }\n    }\n\n    TypingDNA.ACKeyDown = function(e) {\n      if (!TypingDNA.recording && !TypingDNA.diagramRecording) {\n        return;\n      }\n      TypingDNA.ACSeekTime = (new Date).getTime() - TypingDNA.ACLastTime;\n      TypingDNA.ACLastTime = (new Date).getTime();\n      if (!TypingDNA.isTarget(e.target.id)) {\n        return;\n      }\n      if(TypingDNA.ACInputLengths.inputs.indexOf(e.target) === -1) {\n        TypingDNA.ACInputLengths.inputs.push(e.target);\n        TypingDNA.ACInputLengths.lastLength.push(0);\n      }\n    }\n\n    TypingDNA.ACKeyUp = function(e) {\n      if (!TypingDNA.recording && !TypingDNA.diagramRecording) {\n        return;\n      }\n      TypingDNA.ACPressTime = (new Date).getTime() - TypingDNA.ACLastTime;\n      TypingDNA.ACLastTime = (new Date).getTime();\n      if (!TypingDNA.isTarget(e.target.id)) {\n        return;\n      }\n      var keyCode = e.keyCode;\n      var targetIndex = TypingDNA.ACInputLengths.inputs.indexOf(e.target);\n      if(targetIndex === -1) {\n          TypingDNA.ACInputLengths.inputs.push(e.target);\n          TypingDNA.ACInputLengths.lastLength.push(0);\n          targetIndex = TypingDNA.ACInputLengths.inputs.indexOf(e.target);\n      }\n      if (keyCode == 229 && e.target.value.length >= TypingDNA.ACInputLengths.lastLength[targetIndex]) {\n          var char = e.target.value.substr((e.target.selectionStart - 1) || 0 , 1);\n          keyCode = char.toUpperCase().charCodeAt(0);\n          TypingDNA.ACLastCharCode = char.charCodeAt(0);\n          TypingDNA.ACLastKeyCode = char.toUpperCase().charCodeAt(0);\n      }\n      TypingDNA.ACInputLengths.lastLength[targetIndex] = e.target.value.length;\n      var arr = [keyCode, TypingDNA.ACSeekTime, TypingDNA.ACPressTime, TypingDNA.ACPreviousKeyCode, TypingDNA.ACLastTime];\n      TypingDNA.history.add(arr);\n      TypingDNA.ACPreviousKeyCode = keyCode;\n      if (TypingDNA.diagramRecording == true ) {\n        var arrD = [keyCode, TypingDNA.ACSeekTime, TypingDNA.ACPressTime, TypingDNA.ACLastCharCode];\n        TypingDNA.history.addDiagram(arrD);\n      }\n    }\n\n    TypingDNA.isTarget = function(target) {\n      if (TypingDNA.lastTarget == target && TypingDNA.lastTargetFound) {\n        return true;\n      } else {\n        var targetLength = TypingDNA.targetIds.length;\n        var targetFound = false;\n        if (targetLength > 0) {\n          for (var i = 0; i < targetLength; i++) {\n            if (TypingDNA.targetIds[i] == target) {\n              targetFound = true;\n              break;\n            }\n          }\n          TypingDNA.lastTarget = target;\n          TypingDNA.lastTargetFound = targetFound;\n          return targetFound;\n        } else {\n          TypingDNA.lastTarget = target;\n          TypingDNA.lastTargetFound = true;\n          return true;\n        }\n      }\n    }\n\n    if (TypingDNA.document.addEventListener) {\n      TypingDNA.document.addEventListener(\"keydown\", TypingDNA.keyDown);\n      TypingDNA.document.addEventListener(\"keyup\", TypingDNA.keyUp);\n      TypingDNA.document.addEventListener(\"keypress\", TypingDNA.keyPress);\n      TypingDNA.document.addEventListener(\"mousemove\", TypingDNA.mouseMove);\n      TypingDNA.document.addEventListener(\"mousedown\", TypingDNA.mouseDown);\n      TypingDNA.document.addEventListener(\"mouseup\", TypingDNA.mouseUp);\n      TypingDNA.document.addEventListener(\"scroll\", TypingDNA.mouseScroll);\n    } else if (TypingDNA.document.attachEvent) {\n      TypingDNA.document.attachEvent(\"onkeydown\", TypingDNA.keyDown);\n      TypingDNA.document.attachEvent(\"onkeyup\", TypingDNA.keyUp);\n      TypingDNA.document.attachEvent(\"onkeypress\", TypingDNA.keyPress);\n      TypingDNA.document.attachEvent(\"onmousemove\", TypingDNA.mouseMove);\n      TypingDNA.document.attachEvent(\"onmousedown\", TypingDNA.mouseDown);\n      TypingDNA.document.attachEvent(\"onmouseup\", TypingDNA.mouseUp);\n      TypingDNA.document.attachEvent(\"onscroll\", TypingDNA.mouseScroll);\n    } else {\n      console.log(\"browser not supported\");\n    }\n\n    TypingDNA.mouse = {};\n    TypingDNA.mouse.times = [];\n    TypingDNA.mouse.xPositions = [];\n    TypingDNA.mouse.yPositions = [];\n    TypingDNA.mouse.scrollTimes = [];\n    TypingDNA.mouse.scrollTopArr = [];\n    TypingDNA.mouse.history = {};\n    TypingDNA.mouse.history.stack = [];\n\n    TypingDNA.mouse.getDistance = function(a, b) {\n      return Math.sqrt((a * a) + (b * b));\n    }\n\n    TypingDNA.mouse.getTotalDistance = function(xPositions, yPositions) {\n      var totalDistance = 0;\n      var length = xPositions.length;\n      for (i = 1; i < length - 1; i++) {\n        var a = xPositions[i] - xPositions[i - 1];\n        var b = yPositions[i] - yPositions[i - 1];\n        totalDistance += TypingDNA.mouse.getDistance(a, b);\n      }\n      return totalDistance;\n    }\n\n    TypingDNA.mouse.getAngle = function(xPosDelta, yPosDelta) {\n      var angle = 0;\n      var leftRight = (xPosDelta >= 0); // 1 if left, 0 if right\n      var downUp = (yPosDelta < 0); // 1 if down, 0 if up\n      if (leftRight) {\n        if (downUp) {\n          angle = 180 + (Math.round(Math.atan(Math.abs(xPosDelta) / (Math.abs(yPosDelta) + 0.0000001)) / 0.01745329251)) // 0.01745329251 = pi/180\n        } else {\n          angle = 270 + (90 - Math.round(Math.atan(Math.abs(xPosDelta) / (Math.abs(yPosDelta) + 0.0000001)) / 0.01745329251))\n        }\n      } else {\n        if (downUp) {\n          angle = 90 + (90 - Math.round(Math.atan(Math.abs(xPosDelta) / (Math.abs(yPosDelta) + 0.0000001)) / 0.01745329251))\n        } else {\n          angle = Math.round(Math.atan(Math.abs(xPosDelta) / (Math.abs(yPosDelta) + 0.0000001)) / 0.01745329251)\n        }\n      }\n      return angle;\n    }\n\n    TypingDNA.mouse.recordMoveAction = function() {\n      var length = TypingDNA.mouse.times.length;\n      if (length < 3) {\n        return;\n      }\n      var deltaTime = TypingDNA.mouse.times[length - 1] - TypingDNA.mouse.times[0];\n      var xPosDelta = TypingDNA.mouse.xPositions[length - 1] - TypingDNA.mouse.xPositions[0];\n      var yPosDelta = TypingDNA.mouse.yPositions[length - 1] - TypingDNA.mouse.yPositions[0];\n      var directDistance = Math.round(TypingDNA.mouse.getDistance(xPosDelta, yPosDelta));\n      var totalDistance = Math.round(TypingDNA.mouse.getTotalDistance(TypingDNA.mouse.xPositions, TypingDNA.mouse.yPositions));\n      var ratioDistance = Math.round(totalDistance * 100 / directDistance);\n      var speed = Math.round(directDistance * 100 / deltaTime);\n      var angle = TypingDNA.mouse.getAngle(xPosDelta, yPosDelta);\n      var eventType = 1;\n      var arr = [eventType, deltaTime, directDistance, speed, angle, ratioDistance];\n      for (i in arr) {\n        if (isNaN(arr[i])) {\n          return;\n        }\n      }\n      TypingDNA.mouse.history.add(arr);\n      TypingDNA.lastMouseStop = false;\n    }\n\n    TypingDNA.mouse.recordScrollAction = function() {\n      var length = TypingDNA.mouse.scrollTimes.length;\n      if (length < 2) {\n        return;\n      }\n      var deltaTime = TypingDNA.mouse.scrollTimes[length - 1] - TypingDNA.mouse.scrollTimes[0];\n      var directDistance = TypingDNA.mouse.scrollTopArr[length - 1] - TypingDNA.mouse.scrollTopArr[0];\n      var speed = Math.round(directDistance * 100 / deltaTime);\n      var eventType = 2;\n      var arr = [eventType, deltaTime, directDistance, speed];\n      for (i in arr) {\n        if (isNaN(arr[i]) && !isFinite(arr[i])) {\n          return;\n        }\n      }\n      TypingDNA.mouse.history.add(arr);\n    }\n\n    TypingDNA.mouse.history.add = function(arr) {\n      this.stack.push(arr);\n      if (this.stack.length > TypingDNA.maxMouseHistoryLength) {\n        this.stack.shift();\n      }\n    }\n\n    TypingDNA.mouse.history.getDiagram = function() {\n      var mouseDiagram = this.stack.join(\"|\");\n      return [String(TypingDNA.isMobile()) + \",\" + String(TypingDNA.version), mouseDiagram].join(\"|\");\n    }\n\n    TypingDNA.mouse.clearLastMove = function() {\n      TypingDNA.mouse.times = [];\n      TypingDNA.mouse.xPositions = [];\n      TypingDNA.mouse.yPositions = [];\n    }\n\n    TypingDNA.mouse.checkMove = function() {\n      clearInterval(TypingDNA.moveInterval);\n      if (TypingDNA.mouse.started == true) {\n        TypingDNA.mouse.started = false;\n        TypingDNA.mouse.recordMoveAction();\n        TypingDNA.mouse.clearLastMove();\n      }\n    }\n\n    TypingDNA.mouse.clearLastScroll = function() {\n      TypingDNA.mouse.scrollTimes = [];\n      TypingDNA.mouse.scrollTopArr = [];\n    }\n\n    TypingDNA.mouse.checkScroll = function() {\n      clearInterval(TypingDNA.scrollInterval);\n      if (TypingDNA.mouse.scrollStarted == true) {\n        TypingDNA.mouse.scrollStarted = false;\n        TypingDNA.mouse.recordScrollAction();\n        TypingDNA.mouse.clearLastScroll();\n      }\n    }\n\n    /**\n     * Adds a target to the targetIds array.\n     */\n    TypingDNA.addTarget = function(target) {\n      var targetLength = TypingDNA.targetIds.length;\n      var targetFound = false;\n      if (targetLength > 0) {\n        for (var i = 0; i < targetLength; i++) {\n          if (TypingDNA.targetIds[i] == target) {\n            targetFound = true;\n            break;\n          }\n        }\n        if (!targetFound) {\n          TypingDNA.targetIds.push(target);\n        }\n      } else {\n        TypingDNA.targetIds.push(target);\n      }\n    }\n\n    /**\n     * Adds a target to the targetIds array.\n     */\n    TypingDNA.removeTarget = function(target) {\n      var targetLength = TypingDNA.targetIds.length;\n      if (targetLength > 0) {\n        for (var i = 0; i < targetLength; i++) {\n          if (TypingDNA.targetIds[i] == target) {\n            TypingDNA.targetIds.splice(i, 1);\n            break;\n          }\n        }\n      }\n    }\n\n    /**\n     * Resets the history stack\n     */\n    TypingDNA.reset = function(all) {\n      TypingDNA.history.stack = [];\n      TypingDNA.history.stackDiagram = [];\n      TypingDNA.clickTimes = [];\n      TypingDNA.stopTimes = [];\n      TypingDNA.ACInputLengths = {\n          inputs: [],\n          lastLength: [],\n      };\n      if (all == true) {\n        TypingDNA.mouse.history.stack = [];\n      }\n    }\n\n    /**\n     * Automatically called at initilization. It starts the recording of keystrokes.\n     */\n    TypingDNA.start = function() {\n      TypingDNA.diagramRecording = true;\n      return TypingDNA.recording = true;\n    }\n\n    /**\n     * Ends the recording of further keystrokes. To restart recording afterwards you can\n     * either call TypingDNA.start() or create a new TypingDNA object again, not recommended.\n     */\n    TypingDNA.stop = function() {\n      TypingDNA.diagramRecording = false;\n      return TypingDNA.recording = false;\n    }\n\n    /**\n     * Starts the recording of mouse activity.\n     */\n    TypingDNA.startMouse = function() {\n      return TypingDNA.mouseRecording = TypingDNA.mouseMoveRecording = true;\n    }\n\n    /**\n     * Stops the recording of mouse activity.\n     */\n    TypingDNA.stopMouse = function() {\n      return TypingDNA.mouseRecording = TypingDNA.mouseMoveRecording = false;\n    }\n\n    /**\n     * This is the main function that outputs the typing pattern as a String\n     * {type:Number, text:String, textId:Number, length: Number, targetId:String, caseSensitive:Boolean}\n     * @param {Object} obj an object with the following properties\n     * * * @param {String} type 0 for anytext pattern, 1 for sametext pattern (also called diagram pattern)\n     * * * and 2 for extended pattern (most versatile, can replace both anytext and sametext patterns)\n     * * * @param {Number} length (Optional) the length of the text in the history for which you want\n     * * * the typing pattern. length is ignored when text or targetId is set (or both).\n     * * * @param {String} text  (Only for type 1 and type 2) a typed string that you want the typing pattern for\n     * * * @param {Number} textId (Optional, only for type 1 and type 2) a personalized id for the typed text\n     * * * @param {String} targetId (Optional) specifies if pattern is obtain only from text typed in a certain target\n     * * * @param {Boolean} caseSensitive (Optional, default: false) Used if you pass a text for type 1 or type 2\n     * * * DEPRECATED * * * in favor of type = 2 * * *\n     * * * @param {Boolean} extended (Only for type 1) specifies if full information about what was typed is produced,\n     * * * including the actual key pressed, if false, only the order of pressed keys is kept (no actual content)\n     * @return {String} A typing pattern in string form\n     * @example var typingPattern = tdna.getTypingPattern({type=0, length=180});\n     * @example var typingPattern = tdna.getTypingPattern({type=1, text=\"Hello5g21?*\"});\n     * @example var typingPattern = tdna.getTypingPattern({type=2, text=\"example@mail.com\"});\n     */\n    TypingDNA.getTypingPattern = function(obj) {\n      if (typeof obj === 'object') {\n        switch (obj.type) {\n          case 0:\n            return TypingDNA.get(obj.length, obj.targetId);\n            break;\n          case 1:\n            var str = (obj.text != undefined) ? obj.text : obj.length;\n            return TypingDNA.history.getDiagram(obj.extended, str, obj.textId, obj.targetId, obj.caseSensitive);\n            break;\n          case 2:\n            var str = (obj.text != undefined) ? obj.text : obj.length;\n            return TypingDNA.history.getDiagram(true, str, obj.textId, obj.targetId, obj.caseSensitive);\n            break;\n          default:\n            return TypingDNA.get(obj.length);\n            break;\n        }\n      } else {\n        return TypingDNA.get();\n      }\n    }\n\n    TypingDNA.getDiagram = function(str, textId) {\n      return TypingDNA.history.getDiagram(false, str, textId, undefined, false);\n    }\n\n    TypingDNA.getExtendedDiagram = function(str, textId) {\n      return TypingDNA.history.getDiagram(true, str, textId, undefined, false);\n    }\n\n    TypingDNA.getMouseDiagram = function() {\n      return TypingDNA.mouse.history.getDiagram();\n    }\n\n    TypingDNA.get = function(length, targetId) {\n      var historyTotalLength = TypingDNA.history.stack.length;\n      if (length == undefined || length == 0) {\n        length = TypingDNA.defaultHistoryLength;\n      }\n      if (length > historyTotalLength) {\n        length = historyTotalLength;\n      }\n      var obj = {};\n      [obj.arr, targetLength] = TypingDNA.history.get(length, \"\", targetId);\n      if (targetId != undefined && targetId != \"\") {\n        length = targetLength;\n      }\n      var zl = TypingDNA.zl;\n      var histRev = length;\n      var histSktF = TypingDNA.math.fo(TypingDNA.history.get(length, \"seek\", targetId));\n      var histPrtF = TypingDNA.math.fo(TypingDNA.history.get(length, \"press\", targetId));\n      var pressHistMean = Math.round(TypingDNA.math.avg(histPrtF));\n      var seekHistMean = Math.round(TypingDNA.math.avg(histSktF));\n      var pressHistSD = Math.round(TypingDNA.math.sd(histPrtF));\n      var seekHistSD = Math.round(TypingDNA.math.sd(histSktF));\n      var charMeanTime = seekHistMean + pressHistMean;\n      var pressRatio = TypingDNA.math.rd((pressHistMean + zl) / (charMeanTime + zl), 4);\n      var seekToPressRatio = TypingDNA.math.rd((1 - pressRatio) / pressRatio, 4);\n      var pressSDToPressRatio = TypingDNA.math.rd((pressHistSD + zl) / (pressHistMean + zl), 4);\n      var seekSDToPressRatio = TypingDNA.math.rd((seekHistSD + zl) / (pressHistMean + zl), 4);\n      var cpm = Math.round(6E4 / (charMeanTime + zl));\n      if (histRev == 0) {\n        cpm = 0;\n      }\n      for (var i in obj.arr) {\n        var rev = obj.arr[i][1].length;\n        var seekMean = 0;\n        var pressMean = 0;\n        var postMean = 0;\n        var seekSD = 0;\n        var pressSD = 0;\n        var postSD = 0;\n        switch (obj.arr[i][0].length) {\n          case 0:\n            break;\n          case 1:\n            var seekMean = TypingDNA.math.rd((obj.arr[i][0][0] + zl) / (seekHistMean + zl), 4);\n            break;\n          default:\n            var arr = TypingDNA.math.fo(obj.arr[i][0]);\n            seekMean = TypingDNA.math.rd((TypingDNA.math.avg(arr) + zl) / (seekHistMean + zl), 4);\n            seekSD = TypingDNA.math.rd((TypingDNA.math.sd(arr) + zl) / (seekHistSD + zl), 4);\n        }\n        switch (obj.arr[i][1].length) {\n          case 0:\n            break;\n          case 1:\n            var pressMean = TypingDNA.math.rd((obj.arr[i][1][0] + zl) / (pressHistMean + zl), 4);\n            break;\n          default:\n            var arr = TypingDNA.math.fo(obj.arr[i][1]);\n            pressMean = TypingDNA.math.rd((TypingDNA.math.avg(arr) + zl) / (pressHistMean + zl), 4);\n            pressSD = TypingDNA.math.rd((TypingDNA.math.sd(arr) + zl) / (pressHistSD + zl), 4);\n        }\n        switch (obj.arr[i][2].length) {\n          case 0:\n            break;\n          case 1:\n            var postMean = TypingDNA.math.rd((obj.arr[i][2][0] + zl) / (seekHistMean + zl), 4);\n            break;\n          default:\n            var arr = TypingDNA.math.fo(obj.arr[i][2]);\n            postMean = TypingDNA.math.rd((TypingDNA.math.avg(arr) + zl) / (seekHistMean + zl), 4);\n            postSD = TypingDNA.math.rd((TypingDNA.math.sd(arr) + zl) / (seekHistSD + zl), 4);\n        }\n        delete obj.arr[i][2];\n        delete obj.arr[i][1];\n        delete obj.arr[i][0];\n        obj.arr[i][0] = rev;\n        obj.arr[i][1] = seekMean;\n        obj.arr[i][2] = pressMean;\n        obj.arr[i][3] = postMean;\n        obj.arr[i][4] = seekSD;\n        obj.arr[i][5] = pressSD;\n        obj.arr[i][6] = postSD;\n      }\n      var arr = [];\n      TypingDNA.apu(arr, histRev);\n      TypingDNA.apu(arr, cpm);\n      TypingDNA.apu(arr, charMeanTime);\n      TypingDNA.apu(arr, pressRatio);\n      TypingDNA.apu(arr, seekToPressRatio);\n      TypingDNA.apu(arr, pressSDToPressRatio);\n      TypingDNA.apu(arr, seekSDToPressRatio);\n      TypingDNA.apu(arr, pressHistMean);\n      TypingDNA.apu(arr, seekHistMean);\n      TypingDNA.apu(arr, pressHistSD);\n      TypingDNA.apu(arr, seekHistSD);\n      for (var c = 0; c <= 6; c++) {\n        for (var i = 0; i < 44; i++) {\n          var keyCode = TypingDNA.keyCodes[i];\n          var val = obj.arr[keyCode][c];\n          if (val == 0 && c > 0) {\n            val = 1;\n          }\n          TypingDNA.apu(arr, val);\n        }\n      }\n      TypingDNA.apu(arr, TypingDNA.isMobile());\n      TypingDNA.apu(arr, TypingDNA.version);\n      TypingDNA.apu(arr, TypingDNA.flags);\n      arr.push(TypingDNA.history.getSpecialKeys());\n      return arr.join(\",\");\n    }\n\n    TypingDNA.apu = function(arr, val) {\n      \"NaN\" == String(val) && (val = 0);\n      arr.push(val);\n    }\n\n    TypingDNA.math = {};\n\n    TypingDNA.math.rd = function(val, dec) {\n      return Number(val.toFixed(dec));\n    }\n\n    TypingDNA.math.avg = function(arr) {\n      var len = arr.length;\n      if (len > 0) {\n        var sum = 0;\n        for (var i = 0; i < len; i++) {\n          sum += arr[i];\n        }\n        return this.rd(sum / len, 4);\n      } else {\n        return 0;\n      }\n    }\n\n    TypingDNA.math.sd = function(arr) {\n      var len = arr.length;\n      if (len < 2) {\n        return 0;\n      } else {\n        var sumVS = 0;\n        var mean = this.avg(arr);\n        for (var i = 0; i < len; i++) {\n          sumVS += (arr[i] - mean) * (arr[i] - mean);\n        }\n        var sd = Math.sqrt(sumVS / len);\n        return sd;\n      }\n    }\n\n    TypingDNA.math.fo = function(arr) {\n      if (arr.length > 1) {\n        var values = arr.concat();\n        var len = arr.length;\n        values.sort(function(a, b) {\n          return a - b;\n        });\n        var asd = this.sd(values);\n        var aMean = values[Math.ceil(arr.length / 2)];\n        var multiplier = 2;\n        var maxVal = aMean + multiplier * asd;\n        var minVal = aMean - multiplier * asd;\n        if (len < 20) {\n          minVal = 0;\n        }\n        var fVal = [];\n        for (var i = 0; i < len; i++) {\n          var tempval = values[i];\n          if (tempval < maxVal && tempval > minVal) {\n            fVal.push(tempval);\n          }\n        }\n        return fVal;\n      } else {\n        return arr;\n      }\n    }\n\n    // Calculate a 32 bit FNV-1a hash\n    TypingDNA.math.fnv1aHash = function(str) {\n      if (str == undefined && typeof str !== 'string') {\n        return 0;\n      }\n      str = str.toLowerCase();\n      var i, l;\n      var hval = 0x721b5ad4;\n      for (i = 0, l = str.length; i < l; i++) {\n        hval ^= str.charCodeAt(i);\n        hval += (hval << 1) + (hval << 4) + (hval << 7) + (hval << 8) + (hval << 24);\n      }\n      return hval >>> 0;\n    }\n\n    TypingDNA.history = {};\n    TypingDNA.history.stack = [];\n    TypingDNA.history.stackDiagram = [];\n\n    TypingDNA.history.add = function(arr) {\n      this.stack.push(arr);\n      if (this.stack.length > TypingDNA.maxHistoryLength) {\n        this.stack.shift();\n      }\n    }\n\n    TypingDNA.history.addDiagram = function(arr) {\n      this.stackDiagram.push(arr);\n    }\n\n    TypingDNA.history.getDiagram = function(extended, str, textId, targetId, caseSensitive) {\n      var caseSensitive = (caseSensitive != undefined) ? caseSensitive : (str == undefined || str == \"\");\n      var returnArr = [];\n      var diagramType = (extended == true) ? 1 : 0;\n      var stackDiagram = this.stackDiagram;\n      if (targetId != undefined && targetId != \"\" && stackDiagram.length > 0) {\n        stackDiagram = TypingDNA.sliceStackByTargetId(stackDiagram, targetId);\n        if (str == undefined || str == \"\") {\n          var element = TypingDNA.document.getElementById(targetId);\n          if (element != null) {\n            str = element.value;\n          }\n        }\n      } else {\n        var targetLength = TypingDNA.targetIds.length;\n        if (str == undefined || str == \"\") {\n          if (targetLength > 0) {\n            str = \"\";\n            for (var i = 0; i < targetLength; i++) {\n              var element = TypingDNA.document.getElementById(TypingDNA.targetIds[i]);\n              if (element != null) {\n                str += element.value;\n              }\n            }\n          } else {\n            if (!extended) {\n              console.log(\"Please use extended pattern OR provide a fixed string param OR use the addTarget method.\");\n            }\n          }\n        }\n      }\n      var missingCount = 0;\n      var diagramHistoryLength = stackDiagram.length;\n      var strLength = diagramHistoryLength;\n      if (typeof str === 'string') {\n        strLength = str.length;\n      } else if (typeof str === 'number' && str < diagramHistoryLength) {\n        strLength = str;\n      }\n      var returnTextId = 0;\n      if (textId != undefined) {\n        if (isNaN(parseInt(textId))) {\n          returnTextId = TypingDNA.math.fnv1aHash(textId);\n        } else {\n          returnTextId = parseInt(textId);\n        }\n      } else {\n        if (typeof str === 'string') {\n          returnTextId = TypingDNA.math.fnv1aHash(str);\n        }\n      }\n      returnArr.push([TypingDNA.isMobile(), TypingDNA.version, TypingDNA.flags, diagramType, strLength, returnTextId, TypingDNA.history.getSpecialKeys()]);\n      if (str != undefined && str.length > 0 && typeof str === 'string') {\n        var strLower = str.toLowerCase();\n        var strUpper = str.toUpperCase();\n        var lastFoundPos = [];\n        var lastPos = 0;\n        var strUpperCharCode;\n        var currentSensitiveCharCode;\n        for (var i = 0; i < str.length; i++) {\n          var currentCharCode = str.charCodeAt(i);\n          if (!caseSensitive) {\n            strUpperCharCode = strUpper.charCodeAt(i);\n            currentSensitiveCharCode = (strUpperCharCode != currentCharCode) ? strUpperCharCode : strLower.charCodeAt(i);\n          }\n          var startPos = lastPos;\n          var finishPos = diagramHistoryLength;\n          var found = false;\n          while (found == false) {\n            for (var j = startPos; j < finishPos; j++) {\n              var arr = stackDiagram[j];\n              var charCode = arr[3];\n              if (charCode == currentCharCode || (!caseSensitive && charCode == currentSensitiveCharCode)) {\n                found = true;\n                if (j == lastPos) {\n                  lastPos++;\n                  lastFoundPos = [];\n                } else {\n                  lastFoundPos.push(j);\n                  var len = lastFoundPos.length;\n                  if (len > 1 && lastFoundPos[len - 1] == lastFoundPos[len - 2] + 1) {\n                    lastPos = j + 1;\n                    lastFoundPos = [];\n                  }\n                }\n                var keyCode = arr[0];\n                var seekTime = arr[1];\n                var pressTime = arr[2];\n                if (extended) {\n                  returnArr.push([charCode, seekTime, pressTime, keyCode]);\n                } else {\n                  returnArr.push([seekTime, pressTime]);\n                }\n                break;\n              }\n            }\n            if (found == false) {\n              if (startPos != 0) {\n                startPos = 0;\n                finishPos = lastPos;\n              } else {\n                found = true;\n                if (TypingDNA.replaceMissingKeys) {\n                  missingCount++;\n                  if (typeof TypingDNA.savedMissingAvgValues !== 'object' || TypingDNA.savedMissingAvgValues.historyLength != diagramHistoryLength) {\n                    var histSktF = TypingDNA.math.fo(TypingDNA.history.get(0, \"seek\"));\n                    var histPrtF = TypingDNA.math.fo(TypingDNA.history.get(0, \"press\"));\n                    var seekTime = Math.round(TypingDNA.math.avg(histSktF));\n                    var pressTime = Math.round(TypingDNA.math.avg(histPrtF));\n                    TypingDNA.savedMissingAvgValues = {\n                      seekTime: seekTime,\n                      pressTime: pressTime,\n                      historyLength: diagramHistoryLength\n                    };\n                  } else {\n                    var seekTime = TypingDNA.savedMissingAvgValues.seekTime;\n                    var pressTime = TypingDNA.savedMissingAvgValues.pressTime;\n                  }\n                  var missing = 1;\n                  if (extended) {\n                    returnArr.push([currentCharCode, seekTime, pressTime, currentCharCode, missing]);\n                  } else {\n                    returnArr.push([seekTime, pressTime, missing]);\n                  }\n                  break;\n                }\n              }\n            }\n          }\n          if (TypingDNA.replaceMissingKeysPerc < missingCount * 100 / strLength) {\n            return null;\n          }\n        }\n      } else {\n        var startCount = 0;\n        if (typeof str === 'number') {\n          startCount = diagramHistoryLength - str;\n        }\n        if (startCount < 0) {\n          startCount = 0;\n        }\n        for (var i = startCount; i < diagramHistoryLength; i++) {\n          var arr = stackDiagram[i];\n          var keyCode = arr[0];\n          var seekTime = arr[1];\n          var pressTime = arr[2];\n          if (extended) {\n            var charCode = arr[3];\n            returnArr.push([charCode, seekTime, pressTime, keyCode]);\n          } else {\n            returnArr.push([seekTime, pressTime]);\n          }\n        }\n      }\n      return returnArr.join(\"|\");\n    }\n\n    TypingDNA.sliceStackByTargetId = function(stack, targetId) {\n      var length = stack.length;\n      var newStack = [];\n      for (i = 0; i < length; i++) {\n        var arr = stack[i];\n        if (arr[5] == targetId) {\n          newStack.push(arr);\n        }\n      }\n      return newStack;\n    }\n\n    TypingDNA.history.get = function(length, type, targetId) {\n      var stack = this.stack;\n      if (targetId != undefined && targetId != \"\" && stack.length > 0) {\n        stack = TypingDNA.sliceStackByTargetId(stack, targetId);\n      }\n      var historyTotalLength = stack.length;\n      if (length == 0 || length == undefined) {\n        length = TypingDNA.defaultHistoryLength;\n      }\n      if (length > historyTotalLength) {\n        length = historyTotalLength;\n      }\n      switch (type) {\n        case \"seek\":\n          var seekArr = [];\n          for (i = 1; i <= length; i++) {\n            var seekTime = stack[historyTotalLength - i][1];\n            if (seekTime <= TypingDNA.maxSeekTime) {\n              seekArr.push(seekTime);\n            }\n          };\n          return seekArr;\n          break;\n        case \"press\":\n          var pressArr = [];\n          for (i = 1; i <= length; i++) {\n            var pressTime = stack[historyTotalLength - i][2];\n            if (pressTime <= TypingDNA.maxPressTime) {\n              pressArr.push(pressTime);\n            }\n          };\n          return pressArr;\n          break;\n        default:\n          var historyStackObj = {};\n          for (var i in TypingDNA.keyCodes) {\n            historyStackObj[TypingDNA.keyCodes[i]] = [\n              [],\n              [],\n              []\n            ];\n          }\n          for (i = 1; i <= length; i++) {\n            var arr = stack[historyTotalLength - i];\n            var keyCode = arr[0];\n            var seekTime = arr[1];\n            var pressTime = arr[2];\n            var prevKeyCode = arr[3];\n            if (TypingDNA.keyCodesObj[keyCode]) {\n              if (seekTime <= TypingDNA.maxSeekTime) {\n                historyStackObj[keyCode][0].push(seekTime);\n                if (prevKeyCode != 0 && TypingDNA.keyCodesObj[prevKeyCode]) {\n                  historyStackObj[prevKeyCode][2].push(seekTime);\n                }\n              }\n              if (pressTime <= TypingDNA.maxPressTime) {\n                historyStackObj[keyCode][1].push(pressTime);\n              }\n            }\n          };\n          return [historyStackObj, length];\n      }\n    }\n\n    TypingDNA.history.getSpecialKeys = function() {\n      var returnArr = [];\n      var length = this.stack.length;\n      var historyStackObj = {};\n      for (var i in TypingDNA.spKeyCodes) {\n        historyStackObj[TypingDNA.spKeyCodes[i]] = [\n          [],\n        ];\n      }\n      for (i = 1; i <= length; i++) {\n        var arr = this.stack[length - i];\n        if (TypingDNA.spKeyCodesObj[arr[0]]) {\n          var keyCode = arr[0];\n          var pressTime = arr[2];\n          if (pressTime <= TypingDNA.maxPressTime) {\n            historyStackObj[keyCode][0].push(pressTime);\n          }\n        }\n      }\n      for (var i in TypingDNA.spKeyCodes) {\n        var arr = TypingDNA.math.fo(historyStackObj[TypingDNA.spKeyCodes[i]][0]);\n        var arrLen = arr.length;\n        returnArr.push(arrLen);\n        if (arrLen > 1) {\n          returnArr.push(Math.round(TypingDNA.math.avg(arr)));\n          returnArr.push(Math.round(TypingDNA.math.sd(arr)));\n        } else if (arrLen == 1) {\n          returnArr.push([arr[0], -1]);\n        } else {\n          returnArr.push([-1, -1]);\n        }\n      }\n      var clicksArrLen = TypingDNA.clickTimes.length;\n      returnArr.push(clicksArrLen);\n      if (clicksArrLen > 1) {\n        returnArr.push(Math.round(TypingDNA.math.avg(TypingDNA.clickTimes)));\n        returnArr.push(Math.round(TypingDNA.math.sd(TypingDNA.clickTimes)));\n      } else if (clicksArrLen == 1) {\n        returnArr.push(TypingDNA.clickTimes[0], -1);\n      } else {\n        returnArr.push([-1, -1]);\n      }\n      var stopArrLen = TypingDNA.stopTimes.length;\n      returnArr.push(stopArrLen);\n      if (stopArrLen > 1) {\n        returnArr.push(Math.round(TypingDNA.math.avg(TypingDNA.stopTimes)));\n        returnArr.push(Math.round(TypingDNA.math.sd(TypingDNA.stopTimes)));\n      } else if (stopArrLen == 1) {\n        returnArr.push(TypingDNA.stopTimes[0], -1);\n      } else {\n        returnArr.push([-1, -1]);\n      }\n      return returnArr;\n    }\n\n    /**\n     * Checks the quality of a typing pattern, how well it is revelated, how useful the\n     * information will be for matching applications. It returns a value between 0 and 1.\n     * Values over 0.3 are acceptable, however a value over 0.7 shows good pattern strength.\n     * @param  {String} typingPattern The typing pattern string returned by the get() function.\n     * @return {Number} A real number between 0 and 1. A close to 1 value means a stronger pattern.\n     * @example var quality = tdna.getQuality(typingPattern);\n     */\n    TypingDNA.getQuality = function(typingPattern) {\n      var obj = typingPattern.split(\",\");\n      for (i = 0; i < obj.length; i++) {\n        obj[i] = Number(obj[i]);\n      }\n      var totalEvents = obj[0];\n      var acc = rec = avgAcc = 0;\n      var avg = TypingDNA.math.avg(obj);\n      var revs = obj.slice(11, 55);\n      for (var i in revs) {\n        rec += Number(revs[i] > 0);\n        acc += Number(revs[i] > 4);\n        avgAcc += Number(revs[i] > avg);\n      }\n      var tReturn = Math.sqrt(rec * acc * avgAcc) / 80;\n      return tReturn > 1 ? 1 : tReturn;\n    }\n\n    /**\n     * Checks the validity of a typing pattern if recorded on mobile.\n     * @param  {String} typingPattern The typing pattern string returned by the get() function.\n     * @return {Number} A real number between 0 and 1. A number larger than 0.7 usually means a valid pattern.\n     * @example var quality = tdna.checkMobileValidity(typingPattern);\n     */\n    TypingDNA.checkMobileValidity = function(typingPattern) {\n      var obj = typingPattern.split(\",\");\n      var totalEvents = obj[0];\n      if (totalEvents == 0) {\n        return 0;\n      }\n      var rec = 0;\n      var revs = obj.slice(11, 55);\n      for (var i in revs) {\n        rec += Number(revs[i]);\n      }\n      return rec / totalEvents;\n    }\n\n    TypingDNA.getLength = function(typingPattern) {\n      return Number(typingPattern.split(\",\")[1]);\n    }\n\n    TypingDNA.isMobile = function() {\n      if (TypingDNA.mobile != undefined) {\n        return TypingDNA.mobile;\n      } else {\n        var check = 0;\n        (function(a) {\n          if (\n            /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i\n            .test(a) ||\n            /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i\n            .test(a.substr(0, 4))) {\n            check = 1\n          }\n        })(navigator.userAgent || navigator.vendor || window.opera);\n        TypingDNA.mobile = check;\n        return check;\n      }\n    }\n\n    TypingDNA.getTextId = function(str) {\n      return TypingDNA.math.fnv1aHash(str);\n    }\n  } else {\n    // TypingDNA is a static class, currently doesn't support actual multiple instances (Singleton implementation)\n    return TypingDNA.instance;\n  }\n}\n"],"names":["module","TypingDNA","initialized","prototype","start","apply","arguments","stop","reset","addTarget","removeTarget","getTypingPattern","get","startDiagram","stopDiagram","getDiagram","getExtendedDiagram","getMouseDiagram","startMouse","stopMouse","getQuality","getLength","isMobile","getTextId","maxHistoryLength","defaultHistoryLength","maxSeekTime","maxPressTime","version","flags","instance","document","spKeyCodes","spKeyCodesObj","keyCodes","keyCodesObj","i","pt1","ut1","Date","getTime","wfk","sti","skt","recording","mouseRecording","mouseMoveRecording","spKeyRecording","diagramRecording","dwfk","dsti","dskt","drkc","prevKeyCode","maxMoveDeltaTime","maxScrollDeltaTime","maxStopTime","maxClickTime","maxMouseHistoryLength","lastMouseMoveTime","lastMouseDownTime","stopTimes","clickTimes","lastMouseStop","zl","isAndroidChrome","ACLastTime","ACSeekTime","ACPressTime","ACLastCharCode","ACLastKeyCode","ACInputLengths","inputs","lastLength","ACPreviousKeyCode","targetIds","lastTarget","lastTargetFound","replaceMissingKeys","replaceMissingKeysPerc","keyDown","e","isTarget","target","id","keyCode","removeEventListener","keyUp","keyPress","addEventListener","ACKeyDown","ACKeyUp","t0","seekTotal","startTime","shiftKey","dlastDownKey","charCode","ut","pressTime","seekTime","arr","history","add","undefined","realKeyCode","arrD","addDiagram","mouseScroll","mouse","scrollStarted","currentTime","scrollTimes","push","scrollTopArr","body","scrollTop","clearInterval","scrollInterval","setInterval","checkScroll","mouseMove","started","times","xPositions","screenX","yPositions","screenY","moveInterval","checkMove","mouseDown","which","stopTime","eventType","mouseUp","clickTime","indexOf","targetIndex","value","length","char","substr","selectionStart","toUpperCase","charCodeAt","targetLength","targetFound","attachEvent","stack","getDistance","a","b","Math","sqrt","getTotalDistance","totalDistance","getAngle","xPosDelta","yPosDelta","angle","leftRight","downUp","round","atan","abs","recordMoveAction","deltaTime","directDistance","ratioDistance","speed","isNaN","recordScrollAction","isFinite","shift","mouseDiagram","join","String","clearLastMove","clearLastScroll","splice","all","stackDiagram","obj","type","targetId","str","text","extended","textId","caseSensitive","historyTotalLength","histRev","histSktF","math","fo","histPrtF","pressHistMean","avg","seekHistMean","pressHistSD","sd","seekHistSD","charMeanTime","pressRatio","rd","seekToPressRatio","pressSDToPressRatio","seekSDToPressRatio","cpm","rev","seekMean","pressMean","postMean","seekSD","pressSD","postSD","apu","c","val","getSpecialKeys","dec","Number","toFixed","len","sum","sumVS","mean","values","concat","sort","asd","aMean","ceil","multiplier","maxVal","minVal","fVal","tempval","fnv1aHash","toLowerCase","l","hval","returnArr","diagramType","sliceStackByTargetId","element","getElementById","missingCount","diagramHistoryLength","strLength","returnTextId","parseInt","strLower","strUpper","lastFoundPos","lastPos","strUpperCharCode","currentSensitiveCharCode","currentCharCode","startPos","finishPos","found","j","savedMissingAvgValues","historyLength","missing","startCount","newStack","seekArr","pressArr","historyStackObj","arrLen","clicksArrLen","stopArrLen","typingPattern","split","acc","rec","avgAcc","revs","slice","tReturn","checkMobileValidity","totalEvents","mobile","check","test","navigator","userAgent","vendor","window","opera"],"mappings":"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"}
{"version":3,"file":"Clipboard.js","sources":["../../../../../../../../../packages/@okta/courage-dist/esm/src/courage/util/Clipboard.js"],"sourcesContent":["import clipboard from 'clipboard';\nimport oktaJQueryStatic from './jquery-wrapper.js';\nimport oktaUnderscore from './underscore-wrapper.js';\nimport FrameworkView from '../framework/View.js';\nimport Class from './Class.js';\n\nconst Clipboard = clipboard;\nconst OPTIONS = ['success', 'error', 'target', 'text'];\nconst ClipboardClipboardWrapper = Class.extend({\n  initialize: function (el, options) {\n    /* eslint complexity:0, max-statements: [2, 24] */\n    options = oktaUnderscore.pick(options || {}, OPTIONS);\n    let trigger;\n    let target;\n    let text;\n\n    if (oktaUnderscore.isString(el)) {\n      trigger = el;\n    }\n\n    if (oktaUnderscore.isElement(el)) {\n      trigger = el;\n    }\n\n    if (el instanceof oktaJQueryStatic) {\n      trigger = el.selector; // TODO: use stronger type\n    }\n\n    if (el instanceof FrameworkView) {\n      trigger = el.el;\n    }\n\n    if (oktaUnderscore.isFunction(options.target)) {\n      target = options.target;\n    }\n\n    if (oktaUnderscore.isElement(options.target)) {\n      target = oktaUnderscore.constant(options.target);\n    }\n\n    if (oktaUnderscore.isString(options.text)) {\n      text = oktaUnderscore.constant(options.text);\n    } else if (oktaUnderscore.isFunction(options.text)) {\n      text = options.text;\n    }\n\n    this.__instance = new Clipboard(trigger, {\n      target: target,\n      text: text\n    });\n    this.done = oktaUnderscore.partial(this.__setCallback, 'success');\n    this.error = oktaUnderscore.partial(this.__setCallback, 'error');\n    this.done(options.success);\n    this.error(options.error);\n  },\n  __setCallback: function (event, callback) {\n    if (!oktaUnderscore.isFunction(callback)) {\n      return;\n    }\n\n    this.__instance.on(event, callback);\n\n    return this.__instance;\n  }\n});\n/**\n * @class Clipboard\n * @abstract\n *\n * Abstract class that initializes a Clipboard\n *   https://clipboardjs.com/\n *\n * ### Example:\n *\n *  ```javascript\n *  //attach a selector\n *  Clipboard.attach('.copy-button');\n *\n *  //attach a node, and set a constant string\n *  Clipboard.attach(buttonView.el, {\n *    text: 'this is the content'\n *  });\n *\n *  //attach a view, set text dynamically, and set callback\n *  Clipboard.attach(buttonView, {\n *    text: function (triggerNode) {\n *      return $(triggerNode).attr('foo') + model.get('userName');\n *    }\n *  }).done(function (targetNode) {\n *    var msg = ['\"', targetNode.text, '\" is copied'].join('');\n *    view.notify('success', msg);\n *  });\n *\n *  //attach a jquery object, set the target node, and set callback\n *  Clipboard.attach($('.customizeTarget'), {\n *    target: function (triggerNode) {\n *      return triggerNode;\n *    },\n *    success: function (targetNode) {\n *      view.notify('success', 'copied!');\n *    }\n *  });\n *\n * ```\n */\n\nvar Clipboard$1 = {\n  /**\n   * @param {String|Node|View|jQuery} [el] el could be a selector (recommended),\n   *           a dom node, a view or a jquery object\n   * @param {Object} [options] Options hash\n   * @param  {Node|Function} [options.target] a static dom node\n   *           or a function that takes trigger node and returns a target node\n   * @param {String|Function} [options.text] a static string or a function that returns a string dynamically\n   * @param {Function} [options.success] success callback\n   * @param {Function} [options.error] error callback\n   * @return {Object} The clipboard object\n   */\n  attach: function (el, options) {\n    return new ClipboardClipboardWrapper(el, options);\n  }\n};\n\nexport { Clipboard$1 as default };\n"],"names":["Clipboard","clipboard","OPTIONS","ClipboardClipboardWrapper","Class","extend","initialize","el","options","oktaUnderscore","pick","trigger","target","text","isString","isElement","oktaJQueryStatic","selector","FrameworkView","isFunction","constant","__instance","done","partial","__setCallback","error","success","event","callback","on","Clipboard$1","attach"],"mappings":"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"}
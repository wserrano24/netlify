{"version":3,"file":"each.js","sources":["../../../../../../../../../../../../packages/@okta/courage-dist/esm/lib/handlebars/dist/cjs/handlebars/helpers/each.js"],"sourcesContent":["import { commonjsGlobal } from '../../../../../../_virtual/_commonjsHelpers.js';\nimport { e as each } from '../../../../../../_virtual/each.js';\nimport '../utils.js';\nimport '../exception.js';\nimport { __exports as utils } from '../../../../../../_virtual/utils.js';\nimport { e as exception } from '../../../../../../_virtual/exception.js';\n\n(function (module, exports) {\n\nexports.__esModule = true; // istanbul ignore next\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar _utils = utils;\n\nvar _exception = exception.exports;\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nexports['default'] = function (instance) {\n  instance.registerHelper('each', function (context, options) {\n    if (!options) {\n      throw new _exception2['default']('Must pass iterator to #each');\n    }\n\n    var fn = options.fn,\n        inverse = options.inverse,\n        i = 0,\n        ret = '',\n        data = undefined,\n        contextPath = undefined;\n\n    if (options.data && options.ids) {\n      contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]) + '.';\n    }\n\n    if (_utils.isFunction(context)) {\n      context = context.call(this);\n    }\n\n    if (options.data) {\n      data = _utils.createFrame(options.data);\n    }\n\n    function execIteration(field, index, last) {\n      if (data) {\n        data.key = field;\n        data.index = index;\n        data.first = index === 0;\n        data.last = !!last;\n\n        if (contextPath) {\n          data.contextPath = contextPath + field;\n        }\n      }\n\n      ret = ret + fn(context[field], {\n        data: data,\n        blockParams: _utils.blockParams([context[field], field], [contextPath + field, null])\n      });\n    }\n\n    if (context && typeof context === 'object') {\n      if (_utils.isArray(context)) {\n        for (var j = context.length; i < j; i++) {\n          if (i in context) {\n            execIteration(i, i, i === context.length - 1);\n          }\n        }\n      } else if (commonjsGlobal.Symbol && context[commonjsGlobal.Symbol.iterator]) {\n        var newContext = [];\n        var iterator = context[commonjsGlobal.Symbol.iterator]();\n\n        for (var it = iterator.next(); !it.done; it = iterator.next()) {\n          newContext.push(it.value);\n        }\n\n        context = newContext;\n\n        for (var j = context.length; i < j; i++) {\n          execIteration(i, i, i === context.length - 1);\n        }\n      } else {\n        (function () {\n          var priorKey = undefined;\n          Object.keys(context).forEach(function (key) {\n            // We're running the iterations one step out of sync so we can detect\n            // the last iteration without have to scan the object twice and create\n            // an itermediate keys array.\n            if (priorKey !== undefined) {\n              execIteration(priorKey, i - 1);\n            }\n\n            priorKey = key;\n            i++;\n          });\n\n          if (priorKey !== undefined) {\n            execIteration(priorKey, i - 1, true);\n          }\n        })();\n      }\n    }\n\n    if (i === 0) {\n      ret = inverse(this);\n    }\n\n    return ret;\n  });\n};\n\nmodule.exports = exports['default'];\n}(each, each.exports));\n"],"names":["module","exports","__esModule","_interopRequireDefault","obj","_utils","utils","_exception","exception","_exception2","instance","registerHelper","context","options","fn","inverse","i","ret","data","undefined","contextPath","ids","appendContextPath","isFunction","call","createFrame","execIteration","field","index","last","key","first","blockParams","isArray","j","length","commonjsGlobal","Symbol","iterator","newContext","it","next","done","push","value","priorKey","Object","keys","forEach","each"],"mappings":";;;;;;;AAOC,CAAUA,UAAAA,MAAV,EAAkBC,OAAlB,EAA2B;AAE5BA,EAAAA,OAAO,CAACC,UAAR,GAAqB,IAArB,CAF4B;;AAI5B,EAASC,SAAAA,sBAAT,CAAgCC,GAAhC,EAAqC;AACnC,IAAA,OAAOA,GAAG,IAAIA,GAAG,CAACF,UAAX,GAAwBE,GAAxB,GAA8B;AACnC,MAAWA,SAAAA,EAAAA,GAAAA;AADwB,KAArC,CAAA;AAGD,GAAA;;AAED,EAAIC,IAAAA,MAAM,GAAGC,KAAb,CAAA;AAEA,EAAA,IAAIC,UAAU,GAAGC,SAAS,CAACP,OAA3B,CAAA;;AAEA,EAAA,IAAIQ,WAAW,GAAGN,sBAAsB,CAACI,UAAD,CAAxC,CAAA;;AAEAN,EAAAA,OAAO,CAAC,SAAD,CAAP,GAAqB,UAAUS,QAAV,EAAoB;AACvCA,IAAAA,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgC,UAAUC,OAAV,EAAmBC,OAAnB,EAA4B;AAC1D,MAAI,IAAA,CAACA,OAAL,EAAc;AACZ,QAAA,MAAM,IAAIJ,WAAW,CAAC,SAAD,CAAf,CAA2B,6BAA3B,CAAN,CAAA;AACD,OAAA;;AAED,MAAA,IAAIK,EAAE,GAAGD,OAAO,CAACC,EAAjB;AAAA,UACIC,OAAO,GAAGF,OAAO,CAACE,OADtB;AAAA,UAEIC,CAAC,GAAG,CAFR;AAAA,UAGIC,GAAG,GAAG,EAHV;AAAA,UAIIC,IAAI,GAAGC,SAJX;AAAA,UAKIC,WAAW,GAAGD,SALlB,CAAA;;AAOA,MAAA,IAAIN,OAAO,CAACK,IAAR,IAAgBL,OAAO,CAACQ,GAA5B,EAAiC;AAC/BD,QAAAA,WAAW,GAAGf,MAAM,CAACiB,iBAAP,CAAyBT,OAAO,CAACK,IAAR,CAAaE,WAAtC,EAAmDP,OAAO,CAACQ,GAAR,CAAY,CAAZ,CAAnD,IAAqE,GAAnF,CAAA;AACD,OAAA;;AAED,MAAA,IAAIhB,MAAM,CAACkB,UAAP,CAAkBX,OAAlB,CAAJ,EAAgC;AAC9BA,QAAAA,OAAO,GAAGA,OAAO,CAACY,IAAR,CAAa,IAAb,CAAV,CAAA;AACD,OAAA;;AAED,MAAIX,IAAAA,OAAO,CAACK,IAAZ,EAAkB;AAChBA,QAAAA,IAAI,GAAGb,MAAM,CAACoB,WAAP,CAAmBZ,OAAO,CAACK,IAA3B,CAAP,CAAA;AACD,OAAA;;AAED,MAAA,SAASQ,aAAT,CAAuBC,KAAvB,EAA8BC,KAA9B,EAAqCC,IAArC,EAA2C;AACzC,QAAA,IAAIX,IAAJ,EAAU;AACRA,UAAAA,IAAI,CAACY,GAAL,GAAWH,KAAX,CAAA;AACAT,UAAAA,IAAI,CAACU,KAAL,GAAaA,KAAb,CAAA;AACAV,UAAAA,IAAI,CAACa,KAAL,GAAaH,KAAK,KAAK,CAAvB,CAAA;AACAV,UAAAA,IAAI,CAACW,IAAL,GAAY,CAAC,CAACA,IAAd,CAAA;;AAEA,UAAA,IAAIT,WAAJ,EAAiB;AACfF,YAAAA,IAAI,CAACE,WAAL,GAAmBA,WAAW,GAAGO,KAAjC,CAAA;AACD,WAAA;AACF,SAAA;;AAEDV,QAAAA,GAAG,GAAGA,GAAG,GAAGH,EAAE,CAACF,OAAO,CAACe,KAAD,CAAR,EAAiB;AAC7BT,UAAAA,IAAI,EAAEA,IADuB;AAE7Bc,UAAAA,WAAW,EAAE3B,MAAM,CAAC2B,WAAP,CAAmB,CAACpB,OAAO,CAACe,KAAD,CAAR,EAAiBA,KAAjB,CAAnB,EAA4C,CAACP,WAAW,GAAGO,KAAf,EAAsB,IAAtB,CAA5C,CAAA;AAFgB,SAAjB,CAAd,CAAA;AAID,OAAA;;AAED,MAAA,IAAIf,OAAO,IAAI,OAAOA,OAAP,KAAmB,QAAlC,EAA4C;AAC1C,QAAA,IAAIP,MAAM,CAAC4B,OAAP,CAAerB,OAAf,CAAJ,EAA6B;AAC3B,UAAA,KAAK,IAAIsB,CAAC,GAAGtB,OAAO,CAACuB,MAArB,EAA6BnB,CAAC,GAAGkB,CAAjC,EAAoClB,CAAC,EAArC,EAAyC;AACvC,YAAIA,IAAAA,CAAC,IAAIJ,OAAT,EAAkB;AAChBc,cAAAA,aAAa,CAACV,CAAD,EAAIA,CAAJ,EAAOA,CAAC,KAAKJ,OAAO,CAACuB,MAAR,GAAiB,CAA9B,CAAb,CAAA;AACD,aAAA;AACF,WAAA;AACF,SAND,MAMO,IAAIC,cAAc,CAACC,MAAf,IAAyBzB,OAAO,CAACwB,cAAc,CAACC,MAAf,CAAsBC,QAAvB,CAApC,EAAsE;AAC3E,UAAIC,IAAAA,UAAU,GAAG,EAAjB,CAAA;AACA,UAAID,IAAAA,QAAQ,GAAG1B,OAAO,CAACwB,cAAc,CAACC,MAAf,CAAsBC,QAAvB,CAAP,EAAf,CAAA;;AAEA,UAAA,KAAK,IAAIE,EAAE,GAAGF,QAAQ,CAACG,IAAT,EAAd,EAA+B,CAACD,EAAE,CAACE,IAAnC,EAAyCF,EAAE,GAAGF,QAAQ,CAACG,IAAT,EAA9C,EAA+D;AAC7DF,YAAAA,UAAU,CAACI,IAAX,CAAgBH,EAAE,CAACI,KAAnB,CAAA,CAAA;AACD,WAAA;;AAEDhC,UAAAA,OAAO,GAAG2B,UAAV,CAAA;;AAEA,UAAA,KAAK,IAAIL,CAAC,GAAGtB,OAAO,CAACuB,MAArB,EAA6BnB,CAAC,GAAGkB,CAAjC,EAAoClB,CAAC,EAArC,EAAyC;AACvCU,YAAAA,aAAa,CAACV,CAAD,EAAIA,CAAJ,EAAOA,CAAC,KAAKJ,OAAO,CAACuB,MAAR,GAAiB,CAA9B,CAAb,CAAA;AACD,WAAA;AACF,SAbM,MAaA;AACL,UAAA,CAAC,YAAY;AACX,YAAIU,IAAAA,QAAQ,GAAG1B,SAAf,CAAA;AACA2B,YAAAA,MAAM,CAACC,IAAP,CAAYnC,OAAZ,EAAqBoC,OAArB,CAA6B,UAAUlB,GAAV,EAAe;AAC1C;AACA;AACA;AACA,cAAIe,IAAAA,QAAQ,KAAK1B,SAAjB,EAA4B;AAC1BO,gBAAAA,aAAa,CAACmB,QAAD,EAAW7B,CAAC,GAAG,CAAf,CAAb,CAAA;AACD,eAAA;;AAED6B,cAAAA,QAAQ,GAAGf,GAAX,CAAA;AACAd,cAAAA,CAAC,EAAA,CAAA;AACF,aAVD,CAAA,CAAA;;AAYA,YAAI6B,IAAAA,QAAQ,KAAK1B,SAAjB,EAA4B;AAC1BO,cAAAA,aAAa,CAACmB,QAAD,EAAW7B,CAAC,GAAG,CAAf,EAAkB,IAAlB,CAAb,CAAA;AACD,aAAA;AACF,WAjBD,GAAA,CAAA;AAkBD,SAAA;AACF,OAAA;;AAED,MAAIA,IAAAA,CAAC,KAAK,CAAV,EAAa;AACXC,QAAAA,GAAG,GAAGF,OAAO,CAAC,IAAD,CAAb,CAAA;AACD,OAAA;;AAED,MAAA,OAAOE,GAAP,CAAA;AACD,KAzFD,CAAA,CAAA;AA0FD,GA3FD,CAAA;;AA6FAjB,EAAAA,MAAM,CAACC,OAAP,GAAiBA,OAAO,CAAC,SAAD,CAAxB,CAAA;AACC,CA9GA,EA8GCgD,IA9GD,EA8GOA,IAAI,CAAChD,OA9GZ,CAAD"}
{"version":3,"file":"InputContainer.js","sources":["../../../../../../../../../../../packages/@okta/courage-dist/esm/src/courage/views/forms/helpers/InputContainer.js"],"sourcesContent":["import _Handlebars2 from '../../../../../lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport oktaUnderscore from '../../../util/underscore-wrapper.js';\nimport Logger from '../../../util/Logger.js';\nimport Util from '../../../util/Util.js';\nimport StringUtil from '../../../util/StringUtil.js';\nimport BaseView from '../../BaseView.js';\n\nconst isABaseView = Util.isABaseView;\n/**\n * @class InputContainer\n * @private\n *\n * TODO: OKTA-80796\n * Attention: Please change with caution since this is used in other places\n */\n\nvar InputContainer = BaseView.extend({\n  attributes: function () {\n    return {\n      'data-se': 'o-form-input-container'\n    };\n  },\n  className: function () {\n    let className = 'o-form-input';\n\n    if (this.options.wide) {\n      className += ' o-form-wide';\n    }\n\n    if (oktaUnderscore.contains([1, 2, 3, 4], this.options.multi)) {\n      className += ' o-form-multi-input-' + this.options.multi;\n\n      if (oktaUnderscore.isArray(this.options.input)) {\n        const inputGroup = oktaUnderscore.find(this.options.input, function (input) {\n          return oktaUnderscore.contains(['text+select', 'select+text'], input.options.type);\n        });\n\n        inputGroup && (className += ' o-form-multi-input-group-' + this.options.multi);\n      }\n    }\n\n    return className;\n  },\n  _getNames: function () {\n    const names = oktaUnderscore.isArray(this.options.name) ? this.options.name : [this.options.name];\n    /*eslint complexity: 0 */\n\n    if (this.options.type === 'group') {\n      names.push.apply(names, oktaUnderscore.pluck(this.options.input[0].options.params.inputs, 'name'));\n    } else if (oktaUnderscore.isArray(this.options.name)) {\n      if (this.options.input && this.options.input.options && this.options.input.options.name) {\n        names.push(this.options.input.options.name);\n      }\n    } else if (this.options.input) {\n      if (oktaUnderscore.isArray(this.options.input)) {\n        oktaUnderscore.each(this.options.input, function (inputItem) {\n          names.push(inputItem.options.name);\n        });\n      } else {\n        names.push(this.options.input.options.name);\n      }\n    }\n\n    return oktaUnderscore.uniq(oktaUnderscore.compact(names));\n  },\n  _getInputElement: function () {\n    // NOTE: this.options.input is sometimes not an array under test\n    const lastInput = Array.isArray(this.options.input) ? oktaUnderscore.last(this.options.input) : this.options.input; // FIXME: replace with _.get\n\n    const id = lastInput && lastInput.options && lastInput.options.inputId;\n    const el = id ? this.$('#' + id) : null;\n    return el && el.length ? el : null;\n  },\n  constructor: function () {\n    /* eslint max-statements: [2, 18] */\n    BaseView.apply(this, arguments);\n    const explainTop = this.options['explain-top'] && this.options['label-top'];\n\n    if (this.options.input) {\n      if (oktaUnderscore.isArray(this.options.input)) {\n        oktaUnderscore.each(this.options.input, function (inputItem) {\n          this.add(inputItem, {\n            prepend: !explainTop\n          });\n        }, this);\n      } else {\n        this.add(this.options.input, {\n          prepend: !explainTop\n        });\n      }\n    }\n\n    this.__setExplain(this.options);\n\n    const names = this._getNames();\n\n    this.listenTo(this.model, 'form:field-error', function (name, errors) {\n      if (oktaUnderscore.contains(names, name)) {\n        this.__setError(errors, explainTop);\n      }\n    });\n    this.listenTo(this.model, 'form:clear-errors change:' + names.join(' change:'), this.__clearError);\n    this.listenTo(this.model, 'form:clear-error:' + names.join(' form:clear-error:'), this.__clearError);\n\n    if (oktaUnderscore.resultCtx(this.options, 'autoRender', this)) {\n      this.listenTo(this.model, 'change:' + this.options.name, this.render);\n    }\n\n    this.__errorState = false;\n  },\n\n  /**\n   * Populates the explain on the input container (if it exists). There are\n   * two ways to use this:\n   * 1. Raw text - wraps in the correct html template\n   * 2. Custom html\n   *    - pass in a View class (preferred)\n   *    - pass in an instance of a View\n   * Some additional notes:\n   * - You can pass a function that returns any of the above\n   * - This maintains support for the deprecated \"customExplain\" property\n   *   that was used before. This pattern is superseded by explain, so use\n   *   that instead.\n   * @private\n   */\n  __setExplain: function (options) {\n    let explain; // Deprecated - if you need custom html, use explain instead\n\n    if (options.customExplain) {\n      Logger.warn('Deprecated - use explain instead of customExplain');\n      this.add(this.options.customExplain);\n      return;\n    }\n\n    explain = options.explain;\n\n    if (oktaUnderscore.isFunction(explain) && !isABaseView(explain)) {\n      explain = oktaUnderscore.resultCtx(this.options, 'explain', this);\n    }\n\n    if (!explain) {\n      return;\n    }\n\n    if (isABaseView(explain)) {\n      this.template = _Handlebars2.template({\n        \"compiler\": [8, \">= 4.3.0\"],\n        \"main\": function (container, depth0, helpers, partials, data) {\n          return \"<p class=\\\"o-form-explain\\\"></p>\";\n        },\n        \"useData\": true\n      });\n      this.add(explain, ' > .o-form-explain');\n    } else {\n      this.template = _Handlebars2.template({\n        \"compiler\": [8, \">= 4.3.0\"],\n        \"main\": function (container, depth0, helpers, partials, data) {\n          var helper,\n              lookupProperty = container.lookupProperty || function (parent, propertyName) {\n            if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n              return parent[propertyName];\n            }\n\n            return undefined;\n          };\n\n          return \"<p class=\\\"o-form-explain\\\">\" + container.escapeExpression((helper = (helper = lookupProperty(helpers, \"explain\") || (depth0 != null ? lookupProperty(depth0, \"explain\") : depth0)) != null ? helper : container.hooks.helperMissing, typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : container.nullContext || {}, {\n            \"name\": \"explain\",\n            \"hash\": {},\n            \"data\": data,\n            \"loc\": {\n              \"start\": {\n                \"line\": 1,\n                \"column\": 26\n              },\n              \"end\": {\n                \"line\": 1,\n                \"column\": 37\n              }\n            }\n          }) : helper)) + \"</p>\";\n        },\n        \"useData\": true\n      });\n    }\n  },\n\n  /**\n   * Highlight the input as invalid (validation failed)\n   * Adds an explaination message of the error\n   * @private\n   */\n  __setError: function (errors, explainTop) {\n    this.__errorState = true;\n    this.$el.addClass('o-form-has-errors');\n\n    const errorId = oktaUnderscore.uniqueId('input-container-error');\n\n    const html = this.__getHTMLForError(oktaUnderscore.flatten(errors), errorId);\n\n    const $elExplain = this.$('.o-form-explain').not('.o-form-input-error').first();\n\n    if ($elExplain.length && !explainTop) {\n      $elExplain.before(html);\n    } else {\n      this.$el.append(html);\n    }\n\n    const target = this._getInputElement() || this.$el;\n    target.attr('aria-describedby', errorId);\n    target.attr('aria-invalid', true);\n  },\n  __getHTMLForError: function (errors, errorId) {\n    const tmpl = _Handlebars2.template({\n      \"compiler\": [8, \">= 4.3.0\"],\n      \"main\": function (container, depth0, helpers, partials, data) {\n        var helper,\n            alias1 = depth0 != null ? depth0 : container.nullContext || {},\n            alias2 = container.hooks.helperMissing,\n            alias3 = \"function\",\n            alias4 = container.escapeExpression,\n            lookupProperty = container.lookupProperty || function (parent, propertyName) {\n          if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n            return parent[propertyName];\n          }\n\n          return undefined;\n        };\n\n        return \"<p id=\\\"\" + alias4((helper = (helper = lookupProperty(helpers, \"errorId\") || (depth0 != null ? lookupProperty(depth0, \"errorId\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n          \"name\": \"errorId\",\n          \"hash\": {},\n          \"data\": data,\n          \"loc\": {\n            \"start\": {\n              \"line\": 1,\n              \"column\": 7\n            },\n            \"end\": {\n              \"line\": 1,\n              \"column\": 18\n            }\n          }\n        }) : helper)) + \"\\\" class=\\\"okta-form-input-error o-form-input-error o-form-explain\\\" role=\\\"alert\\\"><span class=\\\"icon icon-16 error-16-small\\\" role=\\\"img\\\" aria-label=\\\"\" + alias4((helper = (helper = lookupProperty(helpers, \"iconLabel\") || (depth0 != null ? lookupProperty(depth0, \"iconLabel\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n          \"name\": \"iconLabel\",\n          \"hash\": {},\n          \"data\": data,\n          \"loc\": {\n            \"start\": {\n              \"line\": 1,\n              \"column\": 162\n            },\n            \"end\": {\n              \"line\": 1,\n              \"column\": 175\n            }\n          }\n        }) : helper)) + \"\\\"></span>\" + alias4((helper = (helper = lookupProperty(helpers, \"text\") || (depth0 != null ? lookupProperty(depth0, \"text\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n          \"name\": \"text\",\n          \"hash\": {},\n          \"data\": data,\n          \"loc\": {\n            \"start\": {\n              \"line\": 1,\n              \"column\": 184\n            },\n            \"end\": {\n              \"line\": 1,\n              \"column\": 192\n            }\n          }\n        }) : helper)) + \"</p>\";\n      },\n      \"useData\": true\n    });\n\n    const iconLabel = StringUtil.localize('oform.error.icon.ariaLabel', 'courage'); // 'Error'\n\n    if (this.options.multirowError) {\n      let html = '';\n      errors.forEach(error => {\n        html = html + tmpl({\n          errorId: errorId,\n          iconLabel: iconLabel,\n          text: error\n        });\n      });\n      return html;\n    }\n\n    return tmpl({\n      errorId: errorId,\n      iconLabel: iconLabel,\n      text: errors.join(', ')\n    });\n  },\n\n  /**\n   * Un-highlight the input and remove explaination text\n   * @private\n   */\n  __clearError: function () {\n    if (this.__errorState) {\n      this.$('.o-form-input-error').remove();\n      const target = this._getInputElement() || this.$el;\n      target.attr('aria-describedby', null);\n      target.attr('aria-invalid', null);\n      this.$el.removeClass('o-form-has-errors');\n      this.__errorState = false;\n\n      oktaUnderscore.defer(() => {\n        this.model.trigger('form:resize');\n      });\n    }\n  },\n  focus: function () {\n    this.each(function (view) {\n      if (view.focus) {\n        return view.focus();\n      }\n    });\n    return this;\n  }\n});\n\nexport { InputContainer as default };\n"],"names":["isABaseView","Util","InputContainer","BaseView","extend","attributes","className","options","wide","oktaUnderscore","contains","multi","isArray","input","inputGroup","find","type","_getNames","names","name","push","apply","pluck","params","inputs","each","inputItem","uniq","compact","_getInputElement","lastInput","Array","last","id","inputId","el","$","length","constructor","arguments","explainTop","add","prepend","__setExplain","listenTo","model","errors","__setError","join","__clearError","resultCtx","render","__errorState","explain","customExplain","isFunction","template","_Handlebars2","container","depth0","helpers","partials","data","helper","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","undefined","escapeExpression","hooks","helperMissing","nullContext","$el","addClass","errorId","uniqueId","html","__getHTMLForError","flatten","$elExplain","not","first","before","append","target","attr","tmpl","alias1","alias2","alias3","alias4","iconLabel","StringUtil","localize","multirowError","forEach","error","text","remove","removeClass","defer","trigger","focus","view"],"mappings":"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"}
{"version":3,"file":"ViewUtil.js","sources":["../../../../../../../../../packages/@okta/courage-dist/esm/src/courage/util/ViewUtil.js"],"sourcesContent":["import oktaUnderscore from './underscore-wrapper.js';\n\nfunction changeEventString(doWhen) {\n  return 'change:' + oktaUnderscore.keys(doWhen).join(' change:');\n}\n\nfunction calcDoWhen(value, key) {\n  const modelValue = this.model.get(key);\n\n  if (oktaUnderscore.isFunction(value)) {\n    return value.call(this, modelValue);\n  } else {\n    return value === modelValue;\n  }\n}\n\nfunction _doWhen(view, doWhen, fn) {\n  const toggle = oktaUnderscore.bind(fn, view, view, doWhen);\n\n  view.render = oktaUnderscore.wrap(view.render, function (render) {\n    const val = render.call(view);\n    toggle({\n      animate: false\n    });\n    return val;\n  });\n  view.listenTo(view.model, changeEventString(doWhen), function () {\n    toggle({\n      animate: true\n    });\n  });\n}\n\nvar ViewUtil = {\n  applyDoWhen: function (view, doWhen, fn) {\n    if (!(view.model && oktaUnderscore.isObject(doWhen) && oktaUnderscore.size(doWhen) && oktaUnderscore.isFunction(fn))) {\n      return;\n    }\n\n    _doWhen(view, doWhen, function (view, doWhen, options) {\n      const result = oktaUnderscore.every(oktaUnderscore.map(doWhen, calcDoWhen, view));\n\n      fn.call(view, result, options);\n    });\n  }\n};\n\nexport { ViewUtil as default };\n"],"names":["changeEventString","doWhen","oktaUnderscore","keys","join","calcDoWhen","value","key","modelValue","model","get","isFunction","call","_doWhen","view","fn","toggle","bind","render","wrap","val","animate","listenTo","ViewUtil","applyDoWhen","isObject","size","options","result","every","map"],"mappings":";;AAEA,SAASA,iBAAT,CAA2BC,MAA3B,EAAmC;AACjC,EAAO,OAAA,SAAA,GAAYC,cAAc,CAACC,IAAf,CAAoBF,MAApB,CAA4BG,CAAAA,IAA5B,CAAiC,UAAjC,CAAnB,CAAA;AACD,CAAA;;AAED,SAASC,UAAT,CAAoBC,KAApB,EAA2BC,GAA3B,EAAgC;AAC9B,EAAMC,MAAAA,UAAU,GAAG,IAAKC,CAAAA,KAAL,CAAWC,GAAX,CAAeH,GAAf,CAAnB,CAAA;;AAEA,EAAA,IAAIL,cAAc,CAACS,UAAf,CAA0BL,KAA1B,CAAJ,EAAsC;AACpC,IAAA,OAAOA,KAAK,CAACM,IAAN,CAAW,IAAX,EAAiBJ,UAAjB,CAAP,CAAA;AACD,GAFD,MAEO;AACL,IAAOF,OAAAA,KAAK,KAAKE,UAAjB,CAAA;AACD,GAAA;AACF,CAAA;;AAED,SAASK,OAAT,CAAiBC,IAAjB,EAAuBb,MAAvB,EAA+Bc,EAA/B,EAAmC;AACjC,EAAA,MAAMC,MAAM,GAAGd,cAAc,CAACe,IAAf,CAAoBF,EAApB,EAAwBD,IAAxB,EAA8BA,IAA9B,EAAoCb,MAApC,CAAf,CAAA;AAEAa,EAAAA,IAAI,CAACI,MAAL,GAAchB,cAAc,CAACiB,IAAf,CAAoBL,IAAI,CAACI,MAAzB,EAAiC,UAAUA,MAAV,EAAkB;AAC/D,IAAA,MAAME,GAAG,GAAGF,MAAM,CAACN,IAAP,CAAYE,IAAZ,CAAZ,CAAA;AACAE,IAAAA,MAAM,CAAC;AACLK,MAAAA,OAAO,EAAE,KAAA;AADJ,KAAD,CAAN,CAAA;AAGA,IAAA,OAAOD,GAAP,CAAA;AACD,GANa,CAAd,CAAA;AAOAN,EAAAA,IAAI,CAACQ,QAAL,CAAcR,IAAI,CAACL,KAAnB,EAA0BT,iBAAiB,CAACC,MAAD,CAA3C,EAAqD,YAAY;AAC/De,IAAAA,MAAM,CAAC;AACLK,MAAAA,OAAO,EAAE,IAAA;AADJ,KAAD,CAAN,CAAA;AAGD,GAJD,CAAA,CAAA;AAKD,CAAA;;AAED,IAAIE,QAAQ,GAAG;AACbC,EAAAA,WAAW,EAAE,UAAUV,IAAV,EAAgBb,MAAhB,EAAwBc,EAAxB,EAA4B;AACvC,IAAI,IAAA,EAAED,IAAI,CAACL,KAAL,IAAcP,cAAc,CAACuB,QAAf,CAAwBxB,MAAxB,CAAd,IAAiDC,cAAc,CAACwB,IAAf,CAAoBzB,MAApB,CAAjD,IAAgFC,cAAc,CAACS,UAAf,CAA0BI,EAA1B,CAAlF,CAAJ,EAAsH;AACpH,MAAA,OAAA;AACD,KAAA;;AAEDF,IAAAA,OAAO,CAACC,IAAD,EAAOb,MAAP,EAAe,UAAUa,IAAV,EAAgBb,MAAhB,EAAwB0B,OAAxB,EAAiC;AACrD,MAAA,MAAMC,MAAM,GAAG1B,cAAc,CAAC2B,KAAf,CAAqB3B,cAAc,CAAC4B,GAAf,CAAmB7B,MAAnB,EAA2BI,UAA3B,EAAuCS,IAAvC,CAArB,CAAf,CAAA;AAEAC,MAAAA,EAAE,CAACH,IAAH,CAAQE,IAAR,EAAcc,MAAd,EAAsBD,OAAtB,CAAA,CAAA;AACD,KAJM,CAAP,CAAA;AAKD,GAAA;AAXY;;;;"}
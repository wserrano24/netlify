{"version":3,"file":"Select.js","sources":["../../../../../../../../../../../packages/@okta/courage-dist/esm/src/courage/views/forms/inputs/Select.js"],"sourcesContent":["import _Handlebars2 from '../../../../../lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport oktaJQueryStatic from '../../../util/jquery-wrapper.js';\nimport oktaUnderscore from '../../../util/underscore-wrapper.js';\nimport Keys from '../../../util/Keys.js';\nimport '../../../vendor/plugins/chosen.jquery.js';\nimport BaseInput from '../BaseInput.js';\nimport Util from '../../../util/Util.js';\nimport StringUtil from '../../../util/StringUtil.js';\n\nconst template = _Handlebars2.template({\n  \"compiler\": [8, \">= 4.3.0\"],\n  \"main\": function (container, depth0, helpers, partials, data) {\n    var helper,\n        alias1 = depth0 != null ? depth0 : container.nullContext || {},\n        alias2 = container.hooks.helperMissing,\n        alias3 = \"function\",\n        alias4 = container.escapeExpression,\n        lookupProperty = container.lookupProperty || function (parent, propertyName) {\n      if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n        return parent[propertyName];\n      }\n\n      return undefined;\n    };\n\n    return \"<select id=\\\"\" + alias4((helper = (helper = lookupProperty(helpers, \"inputId\") || (depth0 != null ? lookupProperty(depth0, \"inputId\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n      \"name\": \"inputId\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 12\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 23\n        }\n      }\n    }) : helper)) + \"\\\" name=\\\"\" + alias4((helper = (helper = lookupProperty(helpers, \"name\") || (depth0 != null ? lookupProperty(depth0, \"name\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n      \"name\": \"name\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 31\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 39\n        }\n      }\n    }) : helper)) + \"\\\"></select>\";\n  },\n  \"useData\": true\n});\n\nconst option = _Handlebars2.template({\n  \"compiler\": [8, \">= 4.3.0\"],\n  \"main\": function (container, depth0, helpers, partials, data) {\n    var helper,\n        alias1 = depth0 != null ? depth0 : container.nullContext || {},\n        alias2 = container.hooks.helperMissing,\n        alias3 = \"function\",\n        alias4 = container.escapeExpression,\n        lookupProperty = container.lookupProperty || function (parent, propertyName) {\n      if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n        return parent[propertyName];\n      }\n\n      return undefined;\n    };\n\n    return \"<option value=\\\"\" + alias4((helper = (helper = lookupProperty(helpers, \"key\") || (depth0 != null ? lookupProperty(depth0, \"key\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n      \"name\": \"key\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 15\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 22\n        }\n      }\n    }) : helper)) + \"\\\">\" + alias4((helper = (helper = lookupProperty(helpers, \"value\") || (depth0 != null ? lookupProperty(depth0, \"value\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n      \"name\": \"value\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 24\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 33\n        }\n      }\n    }) : helper)) + \"</option>\";\n  },\n  \"useData\": true\n});\n\nconst CHOSEN_WINDOW_MARGIN = 20;\nconst isSafari = Util.isSafari; // Chosen has known problems when it's at the bottom of a container that has\n// overflow:hidden set. Because it attaches to the parent container, its\n// dropdown will be cut off in the UI. Any modal with a chosen select element\n// at the bottom will manifest this behavior.\n//\n// The fix (aside from replacing Chosen) is to change Chosen's behavior -\n// use the existing styles, but attach it to 'body' and position it correctly\n// so that it is not affected by a parent overflow.\n//\n// More details can be found in OKTA-46489, OKTA-83570\n\nconst CHOSEN_MAX_HEIGHT = 240;\nconst CHOSEN_Z_INDEX = 50000;\n\nfunction defer(fn) {\n  if (this.params.autoWidth) {\n    return fn.call(this);\n  } else {\n    return oktaUnderscore.defer(oktaUnderscore.bind(fn, this));\n  }\n}\n\nfunction findSelectWidth(self) {\n  self.$select.hide();\n  const select = oktaJQueryStatic(self.$select[0]).hide();\n  oktaJQueryStatic('body').append(select);\n  const width = self.params.width = select.width() * 1.2 + 'px';\n  self.$el.append(select.show());\n  return width;\n}\n\nfunction recalculateChosen($chosen, $results, $clone) {\n  const offset = $clone.offset();\n  $chosen.css({\n    left: offset.left,\n    top: offset.top\n  }); // Update the max-height to fit within the constraints of the window. This\n  // is especially important for modals because page scrolling is disabled.\n\n  const $win = oktaJQueryStatic(window);\n  const rHeight = $results.outerHeight();\n  const rBottom = rHeight + $results.offset().top - $win.scrollTop();\n  const wHeight = $win.height() - CHOSEN_WINDOW_MARGIN;\n  const maxHeight = Math.min(rHeight + wHeight - rBottom, CHOSEN_MAX_HEIGHT);\n  $results.css('max-height', maxHeight);\n}\n\nfunction handleKeyUpEvent($select, $chosen, $results) {\n  const $highlightedOption = $results.find('.active-result.highlighted');\n  $chosen.find('#' + $select.attr('id') + '_txt').attr('aria-activedescendant', $highlightedOption.attr('id')); // change the old selected item aria-selected to false\n  // and add add it to new item.\n\n  $results.find('[aria-selected=true]').attr('aria-selected', 'false');\n  $highlightedOption.attr('aria-selected', 'true'); // In case of Safari, add message to aria-live node to be read by screenreader.\n  // We need to do this special handling for Safari due to falkiness with aria-activedescendant\n  // handling. https://bit.ly/3z45IZF\n\n  if (isSafari()) {\n    // message read by screenReader i.e optionValue selected(United States selected)\n    const message = StringUtil.localize('oform.selectInput.country', 'courage', [$highlightedOption.text()]);\n    const elementId = $select.attr('id');\n\n    if (message !== '') {\n      oktaJQueryStatic(`#${elementId}_aria_div_id`).text(message);\n    }\n  }\n\n  const noResult = $results.find('li.no-results');\n\n  if (noResult.length) {\n    noResult.attr('role', 'alert');\n  }\n}\n\nfunction fixChosenModal($select, textPlaceholder) {\n  const $chosen = $select.next('.chzn-container');\n  const $clone = $chosen.clone();\n  const $results = $chosen.find('.chzn-results');\n  const $searchInput = $chosen.find('.chzn-search input[type=text]');\n  $searchInput.on('keyup', () => {\n    handleKeyUpEvent($select, $chosen, $results);\n  });\n  $chosen.addClass('closed'); // Will be used in SIW to fix screen reader focus.\n  // Use a hidden clone to maintain layout and calculate offset. This is\n  // necessary for more complex layouts (like adding a group rule) where\n  // the chosen element is floated.\n\n  $clone.css('visibility', 'hidden');\n  $clone.removeAttr('id');\n  $clone.find('li').removeAttr('id'); // Save the original styles - we'll revert to them when the select closes\n\n  const baseStyles = {\n    left: $chosen.css('left'),\n    top: $chosen.css('top'),\n    position: $chosen.css('position'),\n    float: $chosen.css('float'),\n    'z-index': $chosen.css('z-index')\n  };\n  $results.hide(); // Handler for any resize events that happen when the results list is open\n\n  const resizeHandler = oktaUnderscore.debounce(function () {\n    recalculateChosen($chosen, $results, $clone);\n  }, 10); // When the dropdown opens, attach it to body, with the correct absolute\n  // position coordinates\n\n\n  $select.off('.fixChosen'); // Remove events we could have added before\n\n  $select.on('liszt:showing_dropdown.fixChosen', function () {\n    $chosen.width($chosen.width());\n    $select.after($clone); // .chzn-container can trigger the vertical scrollbar if it causes scrollHeight > window height after append to\n    // the body. Force top -999999 to avoid the scrollbar so $chosen can find the right offset for relocation.\n\n    $chosen.css({\n      position: 'absolute',\n      float: 'none',\n      'z-index': CHOSEN_Z_INDEX,\n      top: -999999\n    });\n    oktaJQueryStatic('body').append($chosen);\n    oktaJQueryStatic('.chzn-search > :text').prop('placeholder', textPlaceholder);\n    $results.show();\n    recalculateChosen($chosen, $results, $clone); // Capture scroll events:\n    // - for forms that use fixed positioning (like editing attributes in\n    //   Profile Editor) - window scroll\n    // - for forms that are too long for the modal - o-form-content scroll\n\n    $select.parents().scroll(resizeHandler);\n    oktaJQueryStatic(window).on('resize scroll', resizeHandler);\n  });\n  $select.on('liszt:showing_dropdown', function () {\n    $chosen.removeClass('closed');\n  }); // When the dropdown closes or the element is removed, revert to the\n  // original styles and reattach it to its original placement in the dom.\n\n  $select.on('liszt:hiding_dropdown.fixChosen remove.fixChosen', function () {\n    $select.parents().off('scroll', resizeHandler);\n    oktaJQueryStatic(window).off('resize scroll', resizeHandler);\n    $chosen.css(baseStyles);\n    $results.hide();\n    $chosen.addClass('closed');\n    $results.css('max-height', CHOSEN_MAX_HEIGHT);\n    $clone.remove();\n    $select.after($chosen);\n  }); // Do not change the order of event listeners. This event must execute after \n  // \"liszt:hiding_dropdown.fixChosen remove.fixChosen\"\n\n  $select.on('liszt:hiding_dropdown.fixChosen', function () {\n    $searchInput.focus(); // set focus back to input only when the dropdown is closed\n  });\n}\n\nvar Select = BaseInput.extend({\n  className: 'o-form-select',\n\n  /**\n   * @Override\n   */\n  events: {\n    'change select': 'update',\n    'keyup .chzn-search > :text': function (e) {\n      if (Keys.isEsc(e)) {\n        this.$('.chzn-search > :text').val('');\n        e.stopPropagation();\n      }\n    }\n  },\n  constructor: function () {\n    this.template = template;\n    this.option = this.option || option;\n    BaseInput.apply(this, arguments);\n    this.params = this.options.params || {};\n  },\n\n  /**\n   * @Override\n   */\n  editMode: function () {\n    /* eslint max-statements: [2, 17] */\n    this.$el.html(template(this.options));\n    this.$select = this.$('select');\n    this.appendOptions(); // Fix a regression in jQuery 1.x on Firefox\n    // jQuery.val(value) prepends an empty option to the dropdown\n    // if value doesnt exist in the dropdown.\n    // http://bugs.jquery.com/ticket/13514\n\n    const value = this.getModelValue();\n\n    if (value) {\n      this.$select.val(value);\n    } else {\n      this.$('option:first-child').prop('selected', true);\n    }\n\n    this.$el.addClass('o-form-control');\n\n    if (this.params.chosen !== false) {\n      this.__applyChosen();\n    }\n\n    return this;\n  },\n  appendOptions: function () {\n    if (!this.getOptions()) {\n      return;\n    }\n\n    const options = this.getOptions();\n    const keys = Object.keys(options);\n    this.applySortByKey(keys);\n    keys.forEach(key => {\n      this.$select.append(this.option({\n        key: key,\n        value: options[key]\n      }));\n    });\n  },\n  applySortByKey: function (keys) {\n    const sortByKey = this.options.sortByKey;\n\n    if (!sortByKey) {\n      return;\n    }\n\n    if (sortByKey instanceof Function) {\n      keys.sort(sortByKey);\n    }\n\n    if (sortByKey === 'asc') {\n      keys.sort();\n    }\n\n    if (sortByKey === 'desc') {\n      keys.sort();\n      keys.reverse();\n    }\n  },\n  __applyChosen: function (update) {\n    let width = this.options.wide ? '100%' : this.params.width || '62%';\n\n    if (this.params.autoWidth) {\n      width = findSelectWidth(this);\n    }\n\n    defer.call(this, function () {\n      const searchThreshold = this.getParam('searchThreshold', 10);\n\n      if (!oktaUnderscore.result(this.options, 'autoRender') && update !== false) {\n        this.update();\n      }\n\n      this.$select.chosen({\n        width: width,\n        disable_search_threshold: searchThreshold,\n        //eslint-disable-line camelcase\n        placeholder_text: this.options['placeholder'],\n        //eslint-disable-line camelcase\n        search_contains: true //eslint-disable-line camelcase\n\n      }); //if options are more than search threshold, consider it as a combobox\n\n      const isComboBox = this.options && this.options.options && Object.keys(this.options.options).length > searchThreshold;\n      this.accessibilityUpdate(isComboBox, this.params);\n      fixChosenModal(this.$select, this.searchPlaceholder);\n\n      if (this.params.autoWidth) {\n        // fix a chosen css bug\n        this.$el.width(0);\n      }\n\n      this.model.trigger('form:resize');\n    });\n  },\n\n  /**\n   * @Override\n   */\n  val: function () {\n    return this.$select && this.$select.val();\n  },\n\n  /**\n   * @Override\n   */\n  focus: function () {\n    if (this.$select) {\n      return this.$select.focus();\n    }\n  },\n\n  /**\n   * @Override\n   */\n  toStringValue: function () {\n    const selectedOption = this.getModelValue();\n    let displayString = selectedOption;\n    const options = this.getOptions();\n\n    if (!oktaUnderscore.isEmpty(options)) {\n      displayString = options[selectedOption];\n    }\n\n    if (oktaUnderscore.isUndefined(displayString)) {\n      displayString = this.defaultValue();\n    }\n\n    return displayString || '';\n  },\n\n  /**\n   * Convert options to an object\n   * support input options that is a\n   * 1. a static object such as {key1: val1, key2: val2...}\n   * 2. a function to be called to return a static object\n   * will return an object with key-value pairs or with empty content\n   * @return {Object} The value\n   */\n  getOptions: function () {\n    let options = this.options.options;\n\n    if (oktaUnderscore.isFunction(options)) {\n      options = options.call(this);\n    }\n\n    return oktaUnderscore.isObject(options) ? options : {};\n  },\n  remove: function () {\n    if (this.$select) {\n      this.$select.trigger('remove');\n    }\n\n    return BaseInput.prototype.remove.apply(this, arguments);\n  },\n\n  /**\n   * @param ariaDivId id for div element\n   * Create a div element and add it to chosen container.\n   */\n  createAriaLiveNode: function (ariaDivId) {\n    const $chosen = this.$select.next('.chzn-container'); // set this to off-screen such that no user will see this and only screenReaders will pick this up.\n    // we should announce to user only on additions and not on removals.\n\n    const $node = oktaJQueryStatic('<div></div>').attr('role', 'log').attr('aria-live', 'polite').attr('id', ariaDivId).attr('aria-relevant', 'additions').attr('aria-atomic', 'false').attr('class', 'off-screen');\n    $node.insertAfter($chosen);\n  },\n\n  /**\n   * Code to make the select/combobox component accessible with screen readers.\n   *\n   * @param {boolean} isComboBox - Is the select a combobox?\n   * @param {object} params - params like aria label\n   */\n  // eslint-disable-next-line max-statements\n  accessibilityUpdate: function (isComboBox, params) {\n    const txtBoxId = this.$select.attr('id') + '_txt';\n    const ariaDivId = this.$select.attr('id') + '_aria_div_id';\n    const ulTagId = this.$select.attr('id') + '_ul'; // this is to fix(OKTA-506711) the accessibility issue due to partial support of aria-activedescendant\n    // by Safari. Make use of aria-live to make screenReader announce the option selected by user as a workaround.\n\n    if (isSafari()) {\n      this.createAriaLiveNode(ariaDivId);\n    }\n\n    this.$('ul[class=chzn-results]').attr('role', 'listbox').attr('id', ulTagId);\n\n    if (isComboBox) {\n      this.$('input[type=text]').attr('id', txtBoxId).attr('aria-autocomplete', 'list').attr('aria-activedescendant', '').attr('role', 'combobox').attr('aria-expanded', 'true').attr('aria-controls', ulTagId);\n    } else {\n      this.$('input[type=text]').attr('id', txtBoxId).attr('role', 'listbox');\n    }\n\n    if (params && params.aria && params.aria.label) {\n      const ariaLabel = params.aria.label.trim();\n      this.$('input[type=text]').attr('id', txtBoxId).attr('aria-label', ariaLabel);\n      this.$('ul[class=chzn-results]').attr('aria-label', ariaLabel);\n    } else {\n      const ariaLabel = this.$el.parent().prev('.o-form-label').find('label').text().trim();\n      this.$('input[type=text]').attr('id', txtBoxId).attr('aria-label', ariaLabel);\n      this.$('ul[class=chzn-results]').attr('aria-label', ariaLabel);\n    }\n\n    this.$('.chzn-results .active-result').attr('role', 'option').attr('aria-selected', 'false');\n  }\n});\n\nexport { Select as default };\n"],"names":["template","_Handlebars2","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","undefined","option","CHOSEN_WINDOW_MARGIN","isSafari","Util","CHOSEN_MAX_HEIGHT","CHOSEN_Z_INDEX","defer","fn","params","autoWidth","oktaUnderscore","bind","findSelectWidth","self","$select","hide","select","oktaJQueryStatic","append","width","$el","show","recalculateChosen","$chosen","$results","$clone","offset","css","left","top","$win","window","rHeight","outerHeight","rBottom","scrollTop","wHeight","height","maxHeight","Math","min","handleKeyUpEvent","$highlightedOption","find","attr","message","StringUtil","localize","text","elementId","noResult","length","fixChosenModal","textPlaceholder","next","clone","$searchInput","on","addClass","removeAttr","baseStyles","position","float","resizeHandler","debounce","off","after","prop","parents","scroll","removeClass","remove","focus","Select","BaseInput","extend","className","events","e","Keys","isEsc","$","val","stopPropagation","constructor","apply","arguments","options","editMode","html","appendOptions","value","getModelValue","chosen","__applyChosen","getOptions","keys","applySortByKey","forEach","key","sortByKey","Function","sort","reverse","update","wide","searchThreshold","getParam","result","disable_search_threshold","placeholder_text","search_contains","isComboBox","accessibilityUpdate","searchPlaceholder","model","trigger","toStringValue","selectedOption","displayString","isEmpty","isUndefined","defaultValue","isFunction","isObject","createAriaLiveNode","ariaDivId","$node","insertAfter","txtBoxId","ulTagId","aria","label","ariaLabel","trim","prev"],"mappings":";;;;;;;;;AASA,MAAMA,QAAQ,GAAGC,YAAY,CAACD,QAAb,CAAsB;AACrC,EAAA,UAAA,EAAY,CAAC,CAAD,EAAI,UAAJ,CADyB;AAErC,EAAQ,MAAA,EAAA,UAAUE,SAAV,EAAqBC,MAArB,EAA6BC,OAA7B,EAAsCC,QAAtC,EAAgDC,IAAhD,EAAsD;AAC5D,IAAA,IAAIC,MAAJ;AAAA,QACIC,MAAM,GAAGL,MAAM,IAAI,IAAV,GAAiBA,MAAjB,GAA0BD,SAAS,CAACO,WAAV,IAAyB,EADhE;AAAA,QAEIC,MAAM,GAAGR,SAAS,CAACS,KAAV,CAAgBC,aAF7B;AAAA,QAGIC,MAAM,GAAG,UAHb;AAAA,QAIIC,MAAM,GAAGZ,SAAS,CAACa,gBAJvB;AAAA,QAKIC,cAAc,GAAGd,SAAS,CAACc,cAAV,IAA4B,UAAUC,MAAV,EAAkBC,YAAlB,EAAgC;AAC/E,MAAA,IAAIC,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCL,MAArC,EAA6CC,YAA7C,CAAJ,EAAgE;AAC9D,QAAOD,OAAAA,MAAM,CAACC,YAAD,CAAb,CAAA;AACD,OAAA;;AAED,MAAA,OAAOK,SAAP,CAAA;AACD,KAXD,CAAA;;AAaA,IAAO,OAAA,eAAA,GAAkBT,MAAM,EAAEP,MAAM,GAAG,CAACA,MAAM,GAAGS,cAAc,CAACZ,OAAD,EAAU,SAAV,CAAd,KAAuCD,MAAM,IAAI,IAAV,GAAiBa,cAAc,CAACb,MAAD,EAAS,SAAT,CAA/B,GAAqDA,MAA5F,CAAV,KAAkH,IAAlH,GAAyHI,MAAzH,GAAkIG,MAA3I,EAAmJ,OAAOH,MAAP,KAAkBM,MAAlB,GAA2BN,MAAM,CAACe,IAAP,CAAYd,MAAZ,EAAoB;AACjO,MAAA,MAAA,EAAQ,SADyN;AAEjO,MAAA,MAAA,EAAQ,EAFyN;AAGjO,MAAA,MAAA,EAAQF,IAHyN;AAIjO,MAAO,KAAA,EAAA;AACL,QAAS,OAAA,EAAA;AACP,UAAA,MAAA,EAAQ,CADD;AAEP,UAAU,QAAA,EAAA,EAAA;AAFH,SADJ;AAKL,QAAO,KAAA,EAAA;AACL,UAAA,MAAA,EAAQ,CADH;AAEL,UAAU,QAAA,EAAA,EAAA;AAFL,SAAA;AALF,OAAA;AAJ0N,KAApB,CAA3B,GAc/KC,MAd0B,EAAxB,GAcS,YAdT,GAcwBO,MAAM,EAAEP,MAAM,GAAG,CAACA,MAAM,GAAGS,cAAc,CAACZ,OAAD,EAAU,MAAV,CAAd,KAAoCD,MAAM,IAAI,IAAV,GAAiBa,cAAc,CAACb,MAAD,EAAS,MAAT,CAA/B,GAAkDA,MAAtF,CAAV,KAA4G,IAA5G,GAAmHI,MAAnH,GAA4HG,MAArI,EAA6I,OAAOH,MAAP,KAAkBM,MAAlB,GAA2BN,MAAM,CAACe,IAAP,CAAYd,MAAZ,EAAoB;AACjO,MAAA,MAAA,EAAQ,MADyN;AAEjO,MAAA,MAAA,EAAQ,EAFyN;AAGjO,MAAA,MAAA,EAAQF,IAHyN;AAIjO,MAAO,KAAA,EAAA;AACL,QAAS,OAAA,EAAA;AACP,UAAA,MAAA,EAAQ,CADD;AAEP,UAAU,QAAA,EAAA,EAAA;AAFH,SADJ;AAKL,QAAO,KAAA,EAAA;AACL,UAAA,MAAA,EAAQ,CADH;AAEL,UAAU,QAAA,EAAA,EAAA;AAFL,SAAA;AALF,OAAA;AAJ0N,KAApB,CAA3B,GAc/KC,MAdgC,EAd9B,GA4BS,cA5BhB,CAAA;AA6BD,GA7CoC;AA8CrC,EAAW,SAAA,EAAA,IAAA;AA9C0B,CAAtB,CAAjB,CAAA;;AAiDA,MAAMiB,MAAM,GAAGvB,YAAY,CAACD,QAAb,CAAsB;AACnC,EAAA,UAAA,EAAY,CAAC,CAAD,EAAI,UAAJ,CADuB;AAEnC,EAAQ,MAAA,EAAA,UAAUE,SAAV,EAAqBC,MAArB,EAA6BC,OAA7B,EAAsCC,QAAtC,EAAgDC,IAAhD,EAAsD;AAC5D,IAAA,IAAIC,MAAJ;AAAA,QACIC,MAAM,GAAGL,MAAM,IAAI,IAAV,GAAiBA,MAAjB,GAA0BD,SAAS,CAACO,WAAV,IAAyB,EADhE;AAAA,QAEIC,MAAM,GAAGR,SAAS,CAACS,KAAV,CAAgBC,aAF7B;AAAA,QAGIC,MAAM,GAAG,UAHb;AAAA,QAIIC,MAAM,GAAGZ,SAAS,CAACa,gBAJvB;AAAA,QAKIC,cAAc,GAAGd,SAAS,CAACc,cAAV,IAA4B,UAAUC,MAAV,EAAkBC,YAAlB,EAAgC;AAC/E,MAAA,IAAIC,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCL,MAArC,EAA6CC,YAA7C,CAAJ,EAAgE;AAC9D,QAAOD,OAAAA,MAAM,CAACC,YAAD,CAAb,CAAA;AACD,OAAA;;AAED,MAAA,OAAOK,SAAP,CAAA;AACD,KAXD,CAAA;;AAaA,IAAO,OAAA,kBAAA,GAAqBT,MAAM,EAAEP,MAAM,GAAG,CAACA,MAAM,GAAGS,cAAc,CAACZ,OAAD,EAAU,KAAV,CAAd,KAAmCD,MAAM,IAAI,IAAV,GAAiBa,cAAc,CAACb,MAAD,EAAS,KAAT,CAA/B,GAAiDA,MAApF,CAAV,KAA0G,IAA1G,GAAiHI,MAAjH,GAA0HG,MAAnI,EAA2I,OAAOH,MAAP,KAAkBM,MAAlB,GAA2BN,MAAM,CAACe,IAAP,CAAYd,MAAZ,EAAoB;AAC5N,MAAA,MAAA,EAAQ,KADoN;AAE5N,MAAA,MAAA,EAAQ,EAFoN;AAG5N,MAAA,MAAA,EAAQF,IAHoN;AAI5N,MAAO,KAAA,EAAA;AACL,QAAS,OAAA,EAAA;AACP,UAAA,MAAA,EAAQ,CADD;AAEP,UAAU,QAAA,EAAA,EAAA;AAFH,SADJ;AAKL,QAAO,KAAA,EAAA;AACL,UAAA,MAAA,EAAQ,CADH;AAEL,UAAU,QAAA,EAAA,EAAA;AAFL,SAAA;AALF,OAAA;AAJqN,KAApB,CAA3B,GAc1KC,MAd6B,EAA3B,GAcS,KAdT,GAciBO,MAAM,EAAEP,MAAM,GAAG,CAACA,MAAM,GAAGS,cAAc,CAACZ,OAAD,EAAU,OAAV,CAAd,KAAqCD,MAAM,IAAI,IAAV,GAAiBa,cAAc,CAACb,MAAD,EAAS,OAAT,CAA/B,GAAmDA,MAAxF,CAAV,KAA8G,IAA9G,GAAqHI,MAArH,GAA8HG,MAAvI,EAA+I,OAAOH,MAAP,KAAkBM,MAAlB,GAA2BN,MAAM,CAACe,IAAP,CAAYd,MAAZ,EAAoB;AAC5N,MAAA,MAAA,EAAQ,OADoN;AAE5N,MAAA,MAAA,EAAQ,EAFoN;AAG5N,MAAA,MAAA,EAAQF,IAHoN;AAI5N,MAAO,KAAA,EAAA;AACL,QAAS,OAAA,EAAA;AACP,UAAA,MAAA,EAAQ,CADD;AAEP,UAAU,QAAA,EAAA,EAAA;AAFH,SADJ;AAKL,QAAO,KAAA,EAAA;AACL,UAAA,MAAA,EAAQ,CADH;AAEL,UAAU,QAAA,EAAA,EAAA;AAFL,SAAA;AALF,OAAA;AAJqN,KAApB,CAA3B,GAc1KC,MAdyB,EAdvB,GA4BS,WA5BhB,CAAA;AA6BD,GA7CkC;AA8CnC,EAAW,SAAA,EAAA,IAAA;AA9CwB,CAAtB,CAAf,CAAA;;AAiDA,MAAMkB,oBAAoB,GAAG,EAA7B,CAAA;AACA,MAAMC,QAAQ,GAAGC,IAAI,CAACD,QAAtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAME,iBAAiB,GAAG,GAA1B,CAAA;AACA,MAAMC,cAAc,GAAG,KAAvB,CAAA;;AAEA,SAASC,KAAT,CAAeC,EAAf,EAAmB;AACjB,EAAA,IAAI,IAAKC,CAAAA,MAAL,CAAYC,SAAhB,EAA2B;AACzB,IAAA,OAAOF,EAAE,CAACT,IAAH,CAAQ,IAAR,CAAP,CAAA;AACD,GAFD,MAEO;AACL,IAAA,OAAOY,cAAc,CAACJ,KAAf,CAAqBI,cAAc,CAACC,IAAf,CAAoBJ,EAApB,EAAwB,IAAxB,CAArB,CAAP,CAAA;AACD,GAAA;AACF,CAAA;;AAED,SAASK,eAAT,CAAyBC,IAAzB,EAA+B;AAC7BA,EAAAA,IAAI,CAACC,OAAL,CAAaC,IAAb,EAAA,CAAA;AACA,EAAA,MAAMC,MAAM,GAAGC,gBAAgB,CAACJ,IAAI,CAACC,OAAL,CAAa,CAAb,CAAD,CAAhB,CAAkCC,IAAlC,EAAf,CAAA;AACAE,EAAAA,gBAAgB,CAAC,MAAD,CAAhB,CAAyBC,MAAzB,CAAgCF,MAAhC,CAAA,CAAA;AACA,EAAA,MAAMG,KAAK,GAAGN,IAAI,CAACL,MAAL,CAAYW,KAAZ,GAAoBH,MAAM,CAACG,KAAP,EAAiB,GAAA,GAAjB,GAAuB,IAAzD,CAAA;AACAN,EAAAA,IAAI,CAACO,GAAL,CAASF,MAAT,CAAgBF,MAAM,CAACK,IAAP,EAAhB,CAAA,CAAA;AACA,EAAA,OAAOF,KAAP,CAAA;AACD,CAAA;;AAED,SAASG,iBAAT,CAA2BC,OAA3B,EAAoCC,QAApC,EAA8CC,MAA9C,EAAsD;AACpD,EAAA,MAAMC,MAAM,GAAGD,MAAM,CAACC,MAAP,EAAf,CAAA;AACAH,EAAAA,OAAO,CAACI,GAAR,CAAY;AACVC,IAAAA,IAAI,EAAEF,MAAM,CAACE,IADH;AAEVC,IAAAA,GAAG,EAAEH,MAAM,CAACG,GAAAA;AAFF,GAAZ,EAFoD;AAMpD;;AAEA,EAAA,MAAMC,IAAI,GAAGb,gBAAgB,CAACc,MAAD,CAA7B,CAAA;AACA,EAAA,MAAMC,OAAO,GAAGR,QAAQ,CAACS,WAAT,EAAhB,CAAA;AACA,EAAA,MAAMC,OAAO,GAAGF,OAAO,GAAGR,QAAQ,CAACE,MAAT,EAAA,CAAkBG,GAA5B,GAAkCC,IAAI,CAACK,SAAL,EAAlD,CAAA;AACA,EAAA,MAAMC,OAAO,GAAGN,IAAI,CAACO,MAAL,KAAgBpC,oBAAhC,CAAA;AACA,EAAA,MAAMqC,SAAS,GAAGC,IAAI,CAACC,GAAL,CAASR,OAAO,GAAGI,OAAV,GAAoBF,OAA7B,EAAsC9B,iBAAtC,CAAlB,CAAA;AACAoB,EAAAA,QAAQ,CAACG,GAAT,CAAa,YAAb,EAA2BW,SAA3B,CAAA,CAAA;AACD,CAAA;;AAED,SAASG,gBAAT,CAA0B3B,OAA1B,EAAmCS,OAAnC,EAA4CC,QAA5C,EAAsD;AACpD,EAAA,MAAMkB,kBAAkB,GAAGlB,QAAQ,CAACmB,IAAT,CAAc,4BAAd,CAA3B,CAAA;AACApB,EAAAA,OAAO,CAACoB,IAAR,CAAa,GAAA,GAAM7B,OAAO,CAAC8B,IAAR,CAAa,IAAb,CAAN,GAA2B,MAAxC,CAAgDA,CAAAA,IAAhD,CAAqD,uBAArD,EAA8EF,kBAAkB,CAACE,IAAnB,CAAwB,IAAxB,CAA9E,CAAA,CAFoD;AAGpD;;AAEApB,EAAAA,QAAQ,CAACmB,IAAT,CAAc,sBAAd,EAAsCC,IAAtC,CAA2C,eAA3C,EAA4D,OAA5D,CAAA,CAAA;AACAF,EAAAA,kBAAkB,CAACE,IAAnB,CAAwB,eAAxB,EAAyC,MAAzC,EANoD;AAOpD;AACA;;AAEA,EAAI1C,IAAAA,QAAQ,EAAZ,EAAgB;AACd;AACA,IAAA,MAAM2C,OAAO,GAAGC,UAAU,CAACC,QAAX,CAAoB,2BAApB,EAAiD,SAAjD,EAA4D,CAACL,kBAAkB,CAACM,IAAnB,EAAD,CAA5D,CAAhB,CAAA;AACA,IAAA,MAAMC,SAAS,GAAGnC,OAAO,CAAC8B,IAAR,CAAa,IAAb,CAAlB,CAAA;;AAEA,IAAIC,IAAAA,OAAO,KAAK,EAAhB,EAAoB;AAClB5B,MAAAA,gBAAgB,CAAE,CAAGgC,CAAAA,EAAAA,SAAU,cAAf,CAAhB,CAA8CD,IAA9C,CAAmDH,OAAnD,CAAA,CAAA;AACD,KAAA;AACF,GAAA;;AAED,EAAA,MAAMK,QAAQ,GAAG1B,QAAQ,CAACmB,IAAT,CAAc,eAAd,CAAjB,CAAA;;AAEA,EAAIO,IAAAA,QAAQ,CAACC,MAAb,EAAqB;AACnBD,IAAAA,QAAQ,CAACN,IAAT,CAAc,MAAd,EAAsB,OAAtB,CAAA,CAAA;AACD,GAAA;AACF,CAAA;;AAED,SAASQ,cAAT,CAAwBtC,OAAxB,EAAiCuC,eAAjC,EAAkD;AAChD,EAAA,MAAM9B,OAAO,GAAGT,OAAO,CAACwC,IAAR,CAAa,iBAAb,CAAhB,CAAA;AACA,EAAA,MAAM7B,MAAM,GAAGF,OAAO,CAACgC,KAAR,EAAf,CAAA;AACA,EAAA,MAAM/B,QAAQ,GAAGD,OAAO,CAACoB,IAAR,CAAa,eAAb,CAAjB,CAAA;AACA,EAAA,MAAMa,YAAY,GAAGjC,OAAO,CAACoB,IAAR,CAAa,+BAAb,CAArB,CAAA;AACAa,EAAAA,YAAY,CAACC,EAAb,CAAgB,OAAhB,EAAyB,MAAM;AAC7BhB,IAAAA,gBAAgB,CAAC3B,OAAD,EAAUS,OAAV,EAAmBC,QAAnB,CAAhB,CAAA;AACD,GAFD,CAAA,CAAA;AAGAD,EAAAA,OAAO,CAACmC,QAAR,CAAiB,QAAjB,EARgD;AAShD;AACA;AACA;;AAEAjC,EAAAA,MAAM,CAACE,GAAP,CAAW,YAAX,EAAyB,QAAzB,CAAA,CAAA;AACAF,EAAAA,MAAM,CAACkC,UAAP,CAAkB,IAAlB,CAAA,CAAA;AACAlC,EAAAA,MAAM,CAACkB,IAAP,CAAY,IAAZ,EAAkBgB,UAAlB,CAA6B,IAA7B,CAAA,CAfgD;;AAiBhD,EAAA,MAAMC,UAAU,GAAG;AACjBhC,IAAAA,IAAI,EAAEL,OAAO,CAACI,GAAR,CAAY,MAAZ,CADW;AAEjBE,IAAAA,GAAG,EAAEN,OAAO,CAACI,GAAR,CAAY,KAAZ,CAFY;AAGjBkC,IAAAA,QAAQ,EAAEtC,OAAO,CAACI,GAAR,CAAY,UAAZ,CAHO;AAIjBmC,IAAAA,KAAK,EAAEvC,OAAO,CAACI,GAAR,CAAY,OAAZ,CAJU;AAKjB,IAAA,SAAA,EAAWJ,OAAO,CAACI,GAAR,CAAY,SAAZ,CAAA;AALM,GAAnB,CAAA;AAOAH,EAAAA,QAAQ,CAACT,IAAT,EAAA,CAxBgD;;AA0BhD,EAAA,MAAMgD,aAAa,GAAGrD,cAAc,CAACsD,QAAf,CAAwB,YAAY;AACxD1C,IAAAA,iBAAiB,CAACC,OAAD,EAAUC,QAAV,EAAoBC,MAApB,CAAjB,CAAA;AACD,GAFqB,EAEnB,EAFmB,CAAtB,CA1BgD;AA6BhD;;AAGAX,EAAAA,OAAO,CAACmD,GAAR,CAAY,YAAZ,EAhCgD;;AAkChDnD,EAAAA,OAAO,CAAC2C,EAAR,CAAW,kCAAX,EAA+C,YAAY;AACzDlC,IAAAA,OAAO,CAACJ,KAAR,CAAcI,OAAO,CAACJ,KAAR,EAAd,CAAA,CAAA;AACAL,IAAAA,OAAO,CAACoD,KAAR,CAAczC,MAAd,EAFyD;AAGzD;;AAEAF,IAAAA,OAAO,CAACI,GAAR,CAAY;AACVkC,MAAAA,QAAQ,EAAE,UADA;AAEVC,MAAAA,KAAK,EAAE,MAFG;AAGV,MAAA,SAAA,EAAWzD,cAHD;AAIVwB,MAAAA,GAAG,EAAE,CAAC,MAAA;AAJI,KAAZ,CAAA,CAAA;AAMAZ,IAAAA,gBAAgB,CAAC,MAAD,CAAhB,CAAyBC,MAAzB,CAAgCK,OAAhC,CAAA,CAAA;AACAN,IAAAA,gBAAgB,CAAC,sBAAD,CAAhB,CAAyCkD,IAAzC,CAA8C,aAA9C,EAA6Dd,eAA7D,CAAA,CAAA;AACA7B,IAAAA,QAAQ,CAACH,IAAT,EAAA,CAAA;AACAC,IAAAA,iBAAiB,CAACC,OAAD,EAAUC,QAAV,EAAoBC,MAApB,CAAjB,CAdyD;AAezD;AACA;AACA;;AAEAX,IAAAA,OAAO,CAACsD,OAAR,EAAkBC,CAAAA,MAAlB,CAAyBN,aAAzB,CAAA,CAAA;AACA9C,IAAAA,gBAAgB,CAACc,MAAD,CAAhB,CAAyB0B,EAAzB,CAA4B,eAA5B,EAA6CM,aAA7C,CAAA,CAAA;AACD,GArBD,CAAA,CAAA;AAsBAjD,EAAAA,OAAO,CAAC2C,EAAR,CAAW,wBAAX,EAAqC,YAAY;AAC/ClC,IAAAA,OAAO,CAAC+C,WAAR,CAAoB,QAApB,CAAA,CAAA;AACD,GAFD,EAxDgD;AA2DhD;;AAEAxD,EAAAA,OAAO,CAAC2C,EAAR,CAAW,kDAAX,EAA+D,YAAY;AACzE3C,IAAAA,OAAO,CAACsD,OAAR,EAAA,CAAkBH,GAAlB,CAAsB,QAAtB,EAAgCF,aAAhC,CAAA,CAAA;AACA9C,IAAAA,gBAAgB,CAACc,MAAD,CAAhB,CAAyBkC,GAAzB,CAA6B,eAA7B,EAA8CF,aAA9C,CAAA,CAAA;AACAxC,IAAAA,OAAO,CAACI,GAAR,CAAYiC,UAAZ,CAAA,CAAA;AACApC,IAAAA,QAAQ,CAACT,IAAT,EAAA,CAAA;AACAQ,IAAAA,OAAO,CAACmC,QAAR,CAAiB,QAAjB,CAAA,CAAA;AACAlC,IAAAA,QAAQ,CAACG,GAAT,CAAa,YAAb,EAA2BvB,iBAA3B,CAAA,CAAA;AACAqB,IAAAA,MAAM,CAAC8C,MAAP,EAAA,CAAA;AACAzD,IAAAA,OAAO,CAACoD,KAAR,CAAc3C,OAAd,CAAA,CAAA;AACD,GATD,EA7DgD;AAuEhD;;AAEAT,EAAAA,OAAO,CAAC2C,EAAR,CAAW,iCAAX,EAA8C,YAAY;AACxDD,IAAAA,YAAY,CAACgB,KAAb,EAAA,CADwD;AAEzD,GAFD,CAAA,CAAA;AAGD,CAAA;;AAED,IAAIC,MAAM,GAAGC,SAAS,CAACC,MAAV,CAAiB;AAC5BC,EAAAA,SAAS,EAAE,eADiB;;AAG5B;AACF;AACA;AACEC,EAAAA,MAAM,EAAE;AACN,IAAA,eAAA,EAAiB,QADX;AAEN,IAA8B,4BAAA,EAAA,UAAUC,CAAV,EAAa;AACzC,MAAA,IAAIC,IAAI,CAACC,KAAL,CAAWF,CAAX,CAAJ,EAAmB;AACjB,QAAA,IAAA,CAAKG,CAAL,CAAO,sBAAP,CAA+BC,CAAAA,GAA/B,CAAmC,EAAnC,CAAA,CAAA;AACAJ,QAAAA,CAAC,CAACK,eAAF,EAAA,CAAA;AACD,OAAA;AACF,KAAA;AAPK,GANoB;AAe5BC,EAAAA,WAAW,EAAE,YAAY;AACvB,IAAK5G,IAAAA,CAAAA,QAAL,GAAgBA,QAAhB,CAAA;AACA,IAAA,IAAA,CAAKwB,MAAL,GAAc,IAAKA,CAAAA,MAAL,IAAeA,MAA7B,CAAA;AACA0E,IAAAA,SAAS,CAACW,KAAV,CAAgB,IAAhB,EAAsBC,SAAtB,CAAA,CAAA;AACA,IAAA,IAAA,CAAK9E,MAAL,GAAc,IAAA,CAAK+E,OAAL,CAAa/E,MAAb,IAAuB,EAArC,CAAA;AACD,GApB2B;;AAsB5B;AACF;AACA;AACEgF,EAAAA,QAAQ,EAAE,YAAY;AACpB;AACA,IAAKpE,IAAAA,CAAAA,GAAL,CAASqE,IAAT,CAAcjH,QAAQ,CAAC,IAAA,CAAK+G,OAAN,CAAtB,CAAA,CAAA;AACA,IAAA,IAAA,CAAKzE,OAAL,GAAe,IAAA,CAAKmE,CAAL,CAAO,QAAP,CAAf,CAAA;AACA,IAAKS,IAAAA,CAAAA,aAAL,GAJoB;AAKpB;AACA;AACA;;AAEA,IAAA,MAAMC,KAAK,GAAG,IAAKC,CAAAA,aAAL,EAAd,CAAA;;AAEA,IAAA,IAAID,KAAJ,EAAW;AACT,MAAA,IAAA,CAAK7E,OAAL,CAAaoE,GAAb,CAAiBS,KAAjB,CAAA,CAAA;AACD,KAFD,MAEO;AACL,MAAKV,IAAAA,CAAAA,CAAL,CAAO,oBAAP,CAAA,CAA6Bd,IAA7B,CAAkC,UAAlC,EAA8C,IAA9C,CAAA,CAAA;AACD,KAAA;;AAED,IAAA,IAAA,CAAK/C,GAAL,CAASsC,QAAT,CAAkB,gBAAlB,CAAA,CAAA;;AAEA,IAAA,IAAI,KAAKlD,MAAL,CAAYqF,MAAZ,KAAuB,KAA3B,EAAkC;AAChC,MAAA,IAAA,CAAKC,aAAL,EAAA,CAAA;AACD,KAAA;;AAED,IAAA,OAAO,IAAP,CAAA;AACD,GAjD2B;AAkD5BJ,EAAAA,aAAa,EAAE,YAAY;AACzB,IAAA,IAAI,CAAC,IAAA,CAAKK,UAAL,EAAL,EAAwB;AACtB,MAAA,OAAA;AACD,KAAA;;AAED,IAAA,MAAMR,OAAO,GAAG,IAAKQ,CAAAA,UAAL,EAAhB,CAAA;AACA,IAAA,MAAMC,IAAI,GAAGrG,MAAM,CAACqG,IAAP,CAAYT,OAAZ,CAAb,CAAA;AACA,IAAKU,IAAAA,CAAAA,cAAL,CAAoBD,IAApB,CAAA,CAAA;AACAA,IAAAA,IAAI,CAACE,OAAL,CAAaC,GAAG,IAAI;AAClB,MAAA,IAAA,CAAKrF,OAAL,CAAaI,MAAb,CAAoB,IAAA,CAAKlB,MAAL,CAAY;AAC9BmG,QAAAA,GAAG,EAAEA,GADyB;AAE9BR,QAAAA,KAAK,EAAEJ,OAAO,CAACY,GAAD,CAAA;AAFgB,OAAZ,CAApB,CAAA,CAAA;AAID,KALD,CAAA,CAAA;AAMD,GAhE2B;AAiE5BF,EAAAA,cAAc,EAAE,UAAUD,IAAV,EAAgB;AAC9B,IAAA,MAAMI,SAAS,GAAG,IAAKb,CAAAA,OAAL,CAAaa,SAA/B,CAAA;;AAEA,IAAI,IAAA,CAACA,SAAL,EAAgB;AACd,MAAA,OAAA;AACD,KAAA;;AAED,IAAIA,IAAAA,SAAS,YAAYC,QAAzB,EAAmC;AACjCL,MAAAA,IAAI,CAACM,IAAL,CAAUF,SAAV,CAAA,CAAA;AACD,KAAA;;AAED,IAAIA,IAAAA,SAAS,KAAK,KAAlB,EAAyB;AACvBJ,MAAAA,IAAI,CAACM,IAAL,EAAA,CAAA;AACD,KAAA;;AAED,IAAIF,IAAAA,SAAS,KAAK,MAAlB,EAA0B;AACxBJ,MAAAA,IAAI,CAACM,IAAL,EAAA,CAAA;AACAN,MAAAA,IAAI,CAACO,OAAL,EAAA,CAAA;AACD,KAAA;AACF,GApF2B;AAqF5BT,EAAAA,aAAa,EAAE,UAAUU,MAAV,EAAkB;AAC/B,IAAA,IAAIrF,KAAK,GAAG,IAAKoE,CAAAA,OAAL,CAAakB,IAAb,GAAoB,MAApB,GAA6B,IAAKjG,CAAAA,MAAL,CAAYW,KAAZ,IAAqB,KAA9D,CAAA;;AAEA,IAAA,IAAI,IAAKX,CAAAA,MAAL,CAAYC,SAAhB,EAA2B;AACzBU,MAAAA,KAAK,GAAGP,eAAe,CAAC,IAAD,CAAvB,CAAA;AACD,KAAA;;AAEDN,IAAAA,KAAK,CAACR,IAAN,CAAW,IAAX,EAAiB,YAAY;AAC3B,MAAM4G,MAAAA,eAAe,GAAG,IAAKC,CAAAA,QAAL,CAAc,iBAAd,EAAiC,EAAjC,CAAxB,CAAA;;AAEA,MAAA,IAAI,CAACjG,cAAc,CAACkG,MAAf,CAAsB,IAAKrB,CAAAA,OAA3B,EAAoC,YAApC,CAAD,IAAsDiB,MAAM,KAAK,KAArE,EAA4E;AAC1E,QAAA,IAAA,CAAKA,MAAL,EAAA,CAAA;AACD,OAAA;;AAED,MAAK1F,IAAAA,CAAAA,OAAL,CAAa+E,MAAb,CAAoB;AAClB1E,QAAAA,KAAK,EAAEA,KADW;AAElB0F,QAAAA,wBAAwB,EAAEH,eAFR;AAGlB;AACAI,QAAAA,gBAAgB,EAAE,IAAA,CAAKvB,OAAL,CAAa,aAAb,CAJA;AAKlB;AACAwB,QAAAA,eAAe,EAAE,IANC;;AAAA,OAApB,EAP2B;;AAiB3B,MAAMC,MAAAA,UAAU,GAAG,IAAKzB,CAAAA,OAAL,IAAgB,IAAKA,CAAAA,OAAL,CAAaA,OAA7B,IAAwC5F,MAAM,CAACqG,IAAP,CAAY,IAAKT,CAAAA,OAAL,CAAaA,OAAzB,CAAA,CAAkCpC,MAAlC,GAA2CuD,eAAtG,CAAA;AACA,MAAA,IAAA,CAAKO,mBAAL,CAAyBD,UAAzB,EAAqC,KAAKxG,MAA1C,CAAA,CAAA;AACA4C,MAAAA,cAAc,CAAC,IAAA,CAAKtC,OAAN,EAAe,IAAA,CAAKoG,iBAApB,CAAd,CAAA;;AAEA,MAAA,IAAI,IAAK1G,CAAAA,MAAL,CAAYC,SAAhB,EAA2B;AACzB;AACA,QAAA,IAAA,CAAKW,GAAL,CAASD,KAAT,CAAe,CAAf,CAAA,CAAA;AACD,OAAA;;AAED,MAAA,IAAA,CAAKgG,KAAL,CAAWC,OAAX,CAAmB,aAAnB,CAAA,CAAA;AACD,KA3BD,CAAA,CAAA;AA4BD,GAxH2B;;AA0H5B;AACF;AACA;AACElC,EAAAA,GAAG,EAAE,YAAY;AACf,IAAA,OAAO,KAAKpE,OAAL,IAAgB,KAAKA,OAAL,CAAaoE,GAAb,EAAvB,CAAA;AACD,GA/H2B;;AAiI5B;AACF;AACA;AACEV,EAAAA,KAAK,EAAE,YAAY;AACjB,IAAI,IAAA,IAAA,CAAK1D,OAAT,EAAkB;AAChB,MAAA,OAAO,IAAKA,CAAAA,OAAL,CAAa0D,KAAb,EAAP,CAAA;AACD,KAAA;AACF,GAxI2B;;AA0I5B;AACF;AACA;AACE6C,EAAAA,aAAa,EAAE,YAAY;AACzB,IAAA,MAAMC,cAAc,GAAG,IAAK1B,CAAAA,aAAL,EAAvB,CAAA;AACA,IAAI2B,IAAAA,aAAa,GAAGD,cAApB,CAAA;AACA,IAAA,MAAM/B,OAAO,GAAG,IAAKQ,CAAAA,UAAL,EAAhB,CAAA;;AAEA,IAAA,IAAI,CAACrF,cAAc,CAAC8G,OAAf,CAAuBjC,OAAvB,CAAL,EAAsC;AACpCgC,MAAAA,aAAa,GAAGhC,OAAO,CAAC+B,cAAD,CAAvB,CAAA;AACD,KAAA;;AAED,IAAA,IAAI5G,cAAc,CAAC+G,WAAf,CAA2BF,aAA3B,CAAJ,EAA+C;AAC7CA,MAAAA,aAAa,GAAG,IAAKG,CAAAA,YAAL,EAAhB,CAAA;AACD,KAAA;;AAED,IAAOH,OAAAA,aAAa,IAAI,EAAxB,CAAA;AACD,GA3J2B;;AA6J5B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACExB,EAAAA,UAAU,EAAE,YAAY;AACtB,IAAA,IAAIR,OAAO,GAAG,IAAKA,CAAAA,OAAL,CAAaA,OAA3B,CAAA;;AAEA,IAAA,IAAI7E,cAAc,CAACiH,UAAf,CAA0BpC,OAA1B,CAAJ,EAAwC;AACtCA,MAAAA,OAAO,GAAGA,OAAO,CAACzF,IAAR,CAAa,IAAb,CAAV,CAAA;AACD,KAAA;;AAED,IAAOY,OAAAA,cAAc,CAACkH,QAAf,CAAwBrC,OAAxB,CAAmCA,GAAAA,OAAnC,GAA6C,EAApD,CAAA;AACD,GA7K2B;AA8K5BhB,EAAAA,MAAM,EAAE,YAAY;AAClB,IAAI,IAAA,IAAA,CAAKzD,OAAT,EAAkB;AAChB,MAAA,IAAA,CAAKA,OAAL,CAAasG,OAAb,CAAqB,QAArB,CAAA,CAAA;AACD,KAAA;;AAED,IAAO1C,OAAAA,SAAS,CAAC9E,SAAV,CAAoB2E,MAApB,CAA2Bc,KAA3B,CAAiC,IAAjC,EAAuCC,SAAvC,CAAP,CAAA;AACD,GApL2B;;AAsL5B;AACF;AACA;AACA;AACEuC,EAAAA,kBAAkB,EAAE,UAAUC,SAAV,EAAqB;AACvC,IAAMvG,MAAAA,OAAO,GAAG,IAAA,CAAKT,OAAL,CAAawC,IAAb,CAAkB,iBAAlB,CAAhB,CADuC;AAEvC;;AAEA,IAAA,MAAMyE,KAAK,GAAG9G,gBAAgB,CAAC,aAAD,CAAhB,CAAgC2B,IAAhC,CAAqC,MAArC,EAA6C,KAA7C,EAAoDA,IAApD,CAAyD,WAAzD,EAAsE,QAAtE,EAAgFA,IAAhF,CAAqF,IAArF,EAA2FkF,SAA3F,CAAsGlF,CAAAA,IAAtG,CAA2G,eAA3G,EAA4H,WAA5H,CAAyIA,CAAAA,IAAzI,CAA8I,aAA9I,EAA6J,OAA7J,CAAsKA,CAAAA,IAAtK,CAA2K,OAA3K,EAAoL,YAApL,CAAd,CAAA;AACAmF,IAAAA,KAAK,CAACC,WAAN,CAAkBzG,OAAlB,CAAA,CAAA;AACD,GAhM2B;;AAkM5B;AACF;AACA;AACA;AACA;AACA;AACE;AACA0F,EAAAA,mBAAmB,EAAE,UAAUD,UAAV,EAAsBxG,MAAtB,EAA8B;AACjD,IAAMyH,MAAAA,QAAQ,GAAG,IAAKnH,CAAAA,OAAL,CAAa8B,IAAb,CAAkB,IAAlB,CAAA,GAA0B,MAA3C,CAAA;AACA,IAAMkF,MAAAA,SAAS,GAAG,IAAKhH,CAAAA,OAAL,CAAa8B,IAAb,CAAkB,IAAlB,CAAA,GAA0B,cAA5C,CAAA;AACA,IAAMsF,MAAAA,OAAO,GAAG,IAAA,CAAKpH,OAAL,CAAa8B,IAAb,CAAkB,IAAlB,CAAA,GAA0B,KAA1C,CAHiD;AAIjD;;AAEA,IAAI1C,IAAAA,QAAQ,EAAZ,EAAgB;AACd,MAAK2H,IAAAA,CAAAA,kBAAL,CAAwBC,SAAxB,CAAA,CAAA;AACD,KAAA;;AAED,IAAA,IAAA,CAAK7C,CAAL,CAAO,wBAAP,CAAA,CAAiCrC,IAAjC,CAAsC,MAAtC,EAA8C,SAA9C,CAAyDA,CAAAA,IAAzD,CAA8D,IAA9D,EAAoEsF,OAApE,CAAA,CAAA;;AAEA,IAAA,IAAIlB,UAAJ,EAAgB;AACd,MAAA,IAAA,CAAK/B,CAAL,CAAO,kBAAP,CAA2BrC,CAAAA,IAA3B,CAAgC,IAAhC,EAAsCqF,QAAtC,CAAA,CAAgDrF,IAAhD,CAAqD,mBAArD,EAA0E,MAA1E,CAAA,CAAkFA,IAAlF,CAAuF,uBAAvF,EAAgH,EAAhH,EAAoHA,IAApH,CAAyH,MAAzH,EAAiI,UAAjI,CAA6IA,CAAAA,IAA7I,CAAkJ,eAAlJ,EAAmK,MAAnK,CAAA,CAA2KA,IAA3K,CAAgL,eAAhL,EAAiMsF,OAAjM,CAAA,CAAA;AACD,KAFD,MAEO;AACL,MAAA,IAAA,CAAKjD,CAAL,CAAO,kBAAP,CAAA,CAA2BrC,IAA3B,CAAgC,IAAhC,EAAsCqF,QAAtC,CAAgDrF,CAAAA,IAAhD,CAAqD,MAArD,EAA6D,SAA7D,CAAA,CAAA;AACD,KAAA;;AAED,IAAIpC,IAAAA,MAAM,IAAIA,MAAM,CAAC2H,IAAjB,IAAyB3H,MAAM,CAAC2H,IAAP,CAAYC,KAAzC,EAAgD;AAC9C,MAAMC,MAAAA,SAAS,GAAG7H,MAAM,CAAC2H,IAAP,CAAYC,KAAZ,CAAkBE,IAAlB,EAAlB,CAAA;AACA,MAAA,IAAA,CAAKrD,CAAL,CAAO,kBAAP,CAAA,CAA2BrC,IAA3B,CAAgC,IAAhC,EAAsCqF,QAAtC,CAAgDrF,CAAAA,IAAhD,CAAqD,YAArD,EAAmEyF,SAAnE,CAAA,CAAA;AACA,MAAKpD,IAAAA,CAAAA,CAAL,CAAO,wBAAP,CAAA,CAAiCrC,IAAjC,CAAsC,YAAtC,EAAoDyF,SAApD,CAAA,CAAA;AACD,KAJD,MAIO;AACL,MAAA,MAAMA,SAAS,GAAG,IAAA,CAAKjH,GAAL,CAAS3B,MAAT,GAAkB8I,IAAlB,CAAuB,eAAvB,CAAA,CAAwC5F,IAAxC,CAA6C,OAA7C,EAAsDK,IAAtD,EAAA,CAA6DsF,IAA7D,EAAlB,CAAA;AACA,MAAA,IAAA,CAAKrD,CAAL,CAAO,kBAAP,CAAA,CAA2BrC,IAA3B,CAAgC,IAAhC,EAAsCqF,QAAtC,CAAgDrF,CAAAA,IAAhD,CAAqD,YAArD,EAAmEyF,SAAnE,CAAA,CAAA;AACA,MAAKpD,IAAAA,CAAAA,CAAL,CAAO,wBAAP,CAAA,CAAiCrC,IAAjC,CAAsC,YAAtC,EAAoDyF,SAApD,CAAA,CAAA;AACD,KAAA;;AAED,IAAA,IAAA,CAAKpD,CAAL,CAAO,8BAAP,CAAA,CAAuCrC,IAAvC,CAA4C,MAA5C,EAAoD,QAApD,CAA8DA,CAAAA,IAA9D,CAAmE,eAAnE,EAAoF,OAApF,CAAA,CAAA;AACD,GAAA;AAtO2B,CAAjB;;;;"}
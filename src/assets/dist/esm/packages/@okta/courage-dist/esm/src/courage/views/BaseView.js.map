{"version":3,"file":"BaseView.js","sources":["../../../../../../../../../packages/@okta/courage-dist/esm/src/courage/views/BaseView.js"],"sourcesContent":["import Backbone from '../vendor/lib/backbone.js';\nimport oktaUnderscore from '../util/underscore-wrapper.js';\nimport FrameworkView from '../framework/View.js';\nimport TemplateUtil from '../util/TemplateUtil.js';\n\nconst eventBus = oktaUnderscore.clone(Backbone.Events); // add `broadcast` and `listen` functionality to all views\n// We use one event emitter per all views\n// This means we need to be very careful with event names\n\n\nconst proto = {\n  constructor: function (options, ...rest) {\n    FrameworkView.call(this, options, ...rest);\n    this.module && this.$el.attr('data-view', this.module.id);\n  },\n\n  /**\n   * @deprecated Use {@link #removeChildren}\n   */\n  empty: function () {\n    return this.removeChildren();\n  },\n  compileTemplate: TemplateUtil.tpl,\n\n  /**\n   *\n   * Broadcasts a global event that all views and controllers can subscribe to\n   * for framework use only - prefer using a shared model\n   *\n   * @param {String} eventName A unique identifier for the event\n   * @param {...String} param Parameter to pass with the event (can pass more than one parameter)\n   * @deprecated For internal use only\n   * @private\n   */\n  broadcast: function () {\n    eventBus.trigger.apply(eventBus, arguments);\n    return this;\n  },\n\n  /**\n   * Subscribe to broadcast events\n   * for framework use only - prefer using a shared model\n   *\n   * @param {String} eventName The event identifier to subscribe\n   * @param {Function} fn The callback function to invoke\n   * @deprecated For internal use only\n   * @private\n   */\n  listen: function (name, fn) {\n    eventBus.off(name, fn);\n    this.listenTo(eventBus, name, fn);\n    return this;\n  },\n\n  /**\n   * Shows a notification box\n   * @param {String} level success / warning / error\n   * @param {String} message The message to display\n   * @param {Object} [options]\n   * @param {Number} [options.width] Set a custom width\n   * @param {String} [options.title] Set a custom title\n   * @param {Boolean} [options.hide=true] Do we want to auto-hide this notification?\n   * @param {Boolean} [options.dismissable] Show a dismiss button\n   * @example\n   * view.notify('success', 'Group created successfully');\n   */\n  notify: function (level, message, options) {\n    this.broadcast('notification', oktaUnderscore.defaults({\n      message: message,\n      level: level\n    }, options));\n    return this;\n  },\n\n  /**\n   * Shows a confirmation dialog\n   *\n   * Uses https://www.ericmmartin.com/projects/simplemodal/.\n   * If you want to configure the simplemodal options use ConfirmationDialog instead.\n   *\n   * The main difference between this and the native javascript `confirm` method\n   * Is this method is non blocking (note the callback pattern).\n   *\n   * The callback function will run in the context (`this`) of the invoking view.\n   *\n   * @param {String} [title] The title of the confirmation dialog\n   * @param {String} [message] The message of the confirmation dialog\n   * @param {Function} [okfn] The callback to run when the user hits \"OK\" (runs in the context of the invoking view)\n   * @param {Function} [cancelfn] The callback to run when the user hits \"Cancel\"\n   *        (runs in the context of the invoking view)\n   * @example\n   * view.confirm('Delete Group', 'Are you sure you want to delete the selected group?', function () {\n   *   model.destroy();\n   * });\n   *\n   * // title will be auto-set to \"Okta\"\n   * view.confirm('Are you sure you want to delete the selected group?', function () {\n   *   model.destroy();\n   * });\n   *\n   * view.confirm({\n   *   title: 'Delete Group', //=> Modal title\n   *   subtitle: 'Are you sure you want to delete the selected group?', //=> Modal subtitle\n   *   content: '<h3 color=\"red\">THIS WILL DELETE THE GROUP!</h3>', //=> A template or a view to add to the modal\n   *   save: 'Delete Group', //=> Button label\n   *   ok: _.bind(model.save, model) // Callback function on hitting \"ok\" button\n   *   cancel: 'Cancel', //=> Button label\n   *   cancelFn: _.bind(model.destroy, model) // Callback function on hitting \"cancel\" button\n   * });\n   */\n  confirm: function (title, message, okfn, cancelfn) {\n    let options;\n    /* eslint max-statements: [2, 12] */\n\n    if (typeof title === 'object') {\n      options = title;\n    } else {\n      // eslint-disable-next-line no-lonely-if\n      if (arguments.length === 2 && oktaUnderscore.isFunction(message)) {\n        options = {\n          title: 'Okta',\n          // eslint-disable-line @okta/okta/no-unlocalized-text\n          subtitle: title,\n          ok: message\n        };\n      } else {\n        options = {\n          title: title,\n          subtitle: message,\n          ok: okfn,\n          cancelFn: cancelfn\n        };\n      }\n    }\n\n    if (oktaUnderscore.isFunction(options.ok)) {\n      options.ok = oktaUnderscore.bind(options.ok, this);\n    }\n\n    if (oktaUnderscore.isFunction(options.cancelFn)) {\n      options.cancelFn = oktaUnderscore.bind(options.cancelFn, this);\n    }\n\n    this.broadcast('confirmation', options);\n    return this;\n  },\n\n  /**\n   * Shows an alert box\n   *\n   * The main difference between this and the native javascript `alert` method\n   * Is this method is non blocking.\n   *\n   * @param {String} message The message\n   * @example\n   * view.alert('Mission complete');\n   */\n  alert: function (params) {\n    if (oktaUnderscore.isString(params)) {\n      params = {\n        subtitle: params\n      };\n    }\n\n    this.confirm(oktaUnderscore.extend({}, params, {\n      noCancelButton: true\n    }));\n    return this;\n  }\n};\n/**\n * See {@link src/framework/View} for more detail and examples from the base class.\n * @class module:Okta.View\n * @extends src/framework/View\n */\n\n/** @lends module:Okta.View.prototype */\n\nvar BaseView = FrameworkView.extend(proto,\n/** @lends View.prototype */\n{\n  /** @method */\n  decorate: function (TargetView) {\n    const BaseViewView = TargetView.extend({});\n\n    oktaUnderscore.defaults(BaseViewView.prototype, proto);\n\n    return BaseViewView;\n  }\n});\n\nexport { BaseView as default };\n"],"names":["eventBus","oktaUnderscore","clone","Backbone","Events","proto","constructor","options","rest","FrameworkView","call","module","$el","attr","id","empty","removeChildren","compileTemplate","TemplateUtil","tpl","broadcast","trigger","apply","arguments","listen","name","fn","off","listenTo","notify","level","message","defaults","confirm","title","okfn","cancelfn","length","isFunction","subtitle","ok","cancelFn","bind","alert","params","isString","extend","noCancelButton","BaseView","decorate","TargetView","BaseViewView","prototype"],"mappings":"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"}
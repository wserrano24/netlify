{"version":3,"file":"InputWrapper.js","sources":["../../../../../../../../../../../packages/@okta/courage-dist/esm/src/courage/views/forms/helpers/InputWrapper.js"],"sourcesContent":["import oktaUnderscore from '../../../util/underscore-wrapper.js';\nimport BaseView from '../../BaseView.js';\nimport FormUtil from './FormUtil.js';\n\nfunction runCallback(callback, field) {\n  callback.apply(this, oktaUnderscore.map(field.split(/\\s+/), function (field) {\n    return this.model.get(field);\n  }, this));\n}\n\nfunction runIf(fn, ctx) {\n  if (oktaUnderscore.isFunction(fn)) {\n    fn.call(ctx);\n  }\n}\n/**\n * @class InputWrapper\n * @extends Okta.View\n * @private\n * The outer wrapper that warps the label and the input container\n */\n\n\nvar InputWrapper = BaseView.extend({\n  tagName: function () {\n    if (this.options.group) {\n      return 'fieldset';\n    }\n\n    return 'div';\n  },\n  className: function () {\n    let className = 'o-form-fieldset';\n\n    if (this.options['label-top']) {\n      className += ' o-form-label-top';\n    }\n\n    if (this.options.readOnly) {\n      className += ' o-form-read-mode';\n    }\n\n    return className;\n  },\n  attributes: function () {\n    return {\n      'data-se': this.options['data-se'] || 'o-form-fieldset'\n    };\n  },\n\n  /**\n   * @constructor\n   * @param  {Object} options options hash\n   * @param  {Object} [options.events]\n   * @param  {Object} [options.bindings]\n   * @param  {Object} [options.showWhen]\n   * @param  {Function} [options.initialize] post initialize callback\n   * @param  {Function} [options.render] post render callback\n   */\n  constructor: function (options) {\n    if (options.className) {\n      this.inputWrapperClassName = this.className;\n      this.optionsClassName = options.className;\n\n      options.className = function () {\n        return oktaUnderscore.result(this, 'inputWrapperClassName', '') + ' ' + oktaUnderscore.result(this, 'optionsClassName');\n      };\n    }\n\n    BaseView.apply(this, arguments);\n\n    oktaUnderscore.each(options.events || {}, function (callback, event) {\n      this.listenTo(this.model, event, callback);\n    }, this);\n\n    oktaUnderscore.each(options.bindings || {}, function (callback, field) {\n      this.listenTo(this.model, FormUtil.changeEventString(field.split(/\\s+/)), oktaUnderscore.bind(runCallback, this, callback, field));\n    }, this);\n\n    FormUtil.applyShowWhen(this, options.showWhen);\n    FormUtil.applyToggleWhen(this, options.toggleWhen);\n    runIf(options.initialize, this);\n  },\n  postRender: function () {\n    oktaUnderscore.each(this.options.bindings || {}, runCallback, this);\n\n    runIf(this.options.render, this);\n  },\n\n  /**\n   * @return {InputLabel}\n   */\n  getLabel: function () {\n    return this.size() > 1 ? this.at(0) : null;\n  },\n\n  /**\n   * @deprecated ambiguous naming, use {@link #getInputContainer}\n   */\n  getInput: function () {\n    return this.getInputContainer();\n  },\n\n  /**\n   * @return {InputContainer}\n   */\n  getInputContainer: function () {\n    return this.at(this.size() > 1 ? 1 : 0);\n  },\n\n  /**\n   * @return {BaseInput[]}\n   */\n  getInputs: function () {\n    return this.getInputContainer().toArray();\n  },\n  focus: function () {\n    return this.getInput().focus();\n  }\n});\n\nexport { InputWrapper as default };\n"],"names":["runCallback","callback","field","apply","oktaUnderscore","map","split","model","get","runIf","fn","ctx","isFunction","call","InputWrapper","BaseView","extend","tagName","options","group","className","readOnly","attributes","constructor","inputWrapperClassName","optionsClassName","result","arguments","each","events","event","listenTo","bindings","FormUtil","changeEventString","bind","applyShowWhen","showWhen","applyToggleWhen","toggleWhen","initialize","postRender","render","getLabel","size","at","getInput","getInputContainer","getInputs","toArray","focus"],"mappings":"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"}
{"version":3,"file":"BaseFooter.js","sources":["../../../../../../src/v2/view-builder/internals/BaseFooter.js"],"sourcesContent":["import { View, _, $} from 'okta';\nimport Link from '../components/Link';\nimport ToggleTextLink from '../components/ToggleTextLink';\nimport { getSignOutLink } from '../utils/LinksUtil';\n\n/**\n * When `href` is present, the Link behaviors as normal link (anchor element).\n * When `actionPath` is present, the Link behaviors as link button\n *   on which user clicks, will trigger the action `actionPath`.\n * When `formName` is present, the link behaviors as link button\n *   on which user clicks, will submit a remediation form.\n *\n * @typedef {Object} Link\n * @property {string} label\n * @property {string} name\n * @property {string=} href\n * @property {string=} actionPath\n * @property {string=} formName\n */\n\n\nexport default View.extend({\n\n  className: 'auth-footer',\n\n  /**\n   * {Link[]} links\n   */\n  links: [],\n\n  /**\n   * View\n   * adds any view to the footer in footer info section\n   */ \n  footerInfo: null,\n\n  /**\n   * Boolean\n   * If false then 'Back to sign in' does not get added to the view\n   */\n  hasBackToSignInLink: true,\n\n  initialize() {\n    let links = _.resultCtx(this, 'links', this);\n    const footerInfo = _.resultCtx(this, 'footerInfo', this);\n    const hasBackToSignInLink = _.resultCtx(this, 'hasBackToSignInLink', this);\n\n    // safe check\n    // 1. avoid none array from override\n    // 2. ignore any none plain object arguments\n    if (!Array.isArray(links)) {\n      links = [];\n    } else {\n      links = links.filter(l => $.isPlainObject(l));\n    }\n\n    // add 'back to sign in' link if the form qualifies for it by default.\n    // Previously called cancel/Sign Out links\n    if (this.options.appState.shouldShowSignOutLinkInCurrentForm(\n      this.options.settings.get('features.hideSignOutLinkInMFA') ||\n      this.settings.get('features.mfaOnlyFlow')) && hasBackToSignInLink) {\n      links = links.concat(getSignOutLink(this.options.settings));\n    }\n\n    links.forEach(link => {\n      let LinkView = Link;\n      if (link.type === 'toggle-text-link') {\n        LinkView = ToggleTextLink;\n      }\n      this.add(LinkView, { options: link });\n    });\n\n    if (footerInfo) {\n      this.add(View.extend({\n        className: 'footer-info',\n      }));\n\n      this.add(footerInfo, '.footer-info');\n    }\n  }\n});\n"],"names":["View","extend","className","links","footerInfo","hasBackToSignInLink","initialize","_","resultCtx","Array","isArray","filter","l","$","isPlainObject","options","appState","shouldShowSignOutLinkInCurrentForm","settings","get","concat","getSignOutLink","forEach","link","LinkView","Link","type","ToggleTextLink","add"],"mappings":";;;;;;;;;;;;;;;;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,iBAAeA,IAAI,CAACC,MAAL,CAAY;AAEzBC,EAAAA,SAAS,EAAE,aAFc;;AAIzB;AACF;AACA;AACEC,EAAAA,KAAK,EAAE,EAPkB;;AASzB;AACF;AACA;AACA;AACEC,EAAAA,UAAU,EAAE,IAba;;AAezB;AACF;AACA;AACA;AACEC,EAAAA,mBAAmB,EAAE,IAnBI;AAqBzBC,EAAAA,UArByB,EAqBZ,YAAA;AACX,IAAIH,IAAAA,KAAK,GAAGI,cAAC,CAACC,SAAF,CAAY,IAAZ,EAAkB,OAAlB,EAA2B,IAA3B,CAAZ,CAAA;;AACA,IAAMJ,MAAAA,UAAU,GAAGG,cAAC,CAACC,SAAF,CAAY,IAAZ,EAAkB,YAAlB,EAAgC,IAAhC,CAAnB,CAAA;;AACA,IAAA,MAAMH,mBAAmB,GAAGE,cAAC,CAACC,SAAF,CAAY,IAAZ,EAAkB,qBAAlB,EAAyC,IAAzC,CAA5B,CAHW;AAMX;AACA;;;AACA,IAAA,IAAI,CAACC,KAAK,CAACC,OAAN,CAAcP,KAAd,CAAL,EAA2B;AACzBA,MAAAA,KAAK,GAAG,EAAR,CAAA;AACD,KAFD,MAEO;AACLA,MAAAA,KAAK,GAAGA,KAAK,CAACQ,MAAN,CAAaC,CAAC,IAAIC,gBAAC,CAACC,aAAF,CAAgBF,CAAhB,CAAlB,CAAR,CAAA;AACD,KAZU;AAeX;;;AACA,IAAI,IAAA,IAAA,CAAKG,OAAL,CAAaC,QAAb,CAAsBC,kCAAtB,CACF,IAAA,CAAKF,OAAL,CAAaG,QAAb,CAAsBC,GAAtB,CAA0B,+BAA1B,CACA,IAAA,IAAA,CAAKD,QAAL,CAAcC,GAAd,CAAkB,sBAAlB,CAFE,CAE4Cd,IAAAA,mBAFhD,EAEqE;AACnEF,MAAAA,KAAK,GAAGA,KAAK,CAACiB,MAAN,CAAaC,cAAc,CAAC,IAAKN,CAAAA,OAAL,CAAaG,QAAd,CAA3B,CAAR,CAAA;AACD,KAAA;;AAEDf,IAAAA,KAAK,CAACmB,OAAN,CAAcC,IAAI,IAAI;AACpB,MAAIC,IAAAA,QAAQ,GAAGC,IAAf,CAAA;;AACA,MAAA,IAAIF,IAAI,CAACG,IAAL,KAAc,kBAAlB,EAAsC;AACpCF,QAAAA,QAAQ,GAAGG,cAAX,CAAA;AACD,OAAA;;AACD,MAAKC,IAAAA,CAAAA,GAAL,CAASJ,QAAT,EAAmB;AAAET,QAAAA,OAAO,EAAEQ,IAAAA;AAAX,OAAnB,CAAA,CAAA;AACD,KAND,CAAA,CAAA;;AAQA,IAAA,IAAInB,UAAJ,EAAgB;AACd,MAAA,IAAA,CAAKwB,GAAL,CAAS5B,IAAI,CAACC,MAAL,CAAY;AACnBC,QAAAA,SAAS,EAAE,aAAA;AADQ,OAAZ,CAAT,CAAA,CAAA;AAIA,MAAA,IAAA,CAAK0B,GAAL,CAASxB,UAAT,EAAqB,cAArB,CAAA,CAAA;AACD,KAAA;AACF,GAAA;AA1DwB,CAAZ,CAAf;;;;"}
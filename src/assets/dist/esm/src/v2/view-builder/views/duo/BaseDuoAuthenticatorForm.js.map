{"version":3,"file":"BaseDuoAuthenticatorForm.js","sources":["../../../../../../../src/v2/view-builder/views/duo/BaseDuoAuthenticatorForm.js"],"sourcesContent":["import { loc, createCallout } from 'okta';\nimport Duo from 'duo';\nimport { BaseForm } from '../../internals';\n\nexport default BaseForm.extend({\n\n  noButtonBar: true,\n\n  postRender: function() {\n    const contextualData = this.getContextualData();\n    // This is the place to check contextualData.integrationType once we support more types\n    // Currently we only support IFRAME\n    const duoFrame = this.add(`<iframe frameborder=\"0\" title=\"'${this.title()}'\"></iframe>`).last();\n    try {\n      Duo.init({\n        host: contextualData.host,\n        sig_request: contextualData.signedToken, // eslint-disable-line camelcase\n        iframe: duoFrame.el,\n        post_action: (signedData) => { // eslint-disable-line camelcase\n          this.model.set('credentials.signatureData', signedData);\n          this.saveForm(this.model);\n        },\n      });\n    } catch (e) {\n      duoFrame.remove();\n      this.add(createCallout({\n        type: 'error',\n        subtitle: loc('oie.duo.iFrameError', 'login'),\n      }), '.o-form-error-container');\n      console.error(e); // eslint-disable-line no-console\n    }\n  },\n\n  getContextualData() {\n    // to be overriden\n  }\n});\n"],"names":["BaseForm","extend","noButtonBar","postRender","contextualData","getContextualData","duoFrame","add","title","last","Duo","init","host","sig_request","signedToken","iframe","el","post_action","signedData","model","set","saveForm","e","remove","createCallout","type","subtitle","loc"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,+BAAeA,QAAQ,CAACC,MAAT,CAAgB;AAE7BC,EAAAA,WAAW,EAAE,IAFgB;AAI7BC,EAAAA,UAAU,EAAE,YAAW;AACrB,IAAA,MAAMC,cAAc,GAAG,IAAA,CAAKC,iBAAL,EAAvB,CADqB;AAGrB;;AACA,IAAA,MAAMC,QAAQ,GAAG,IAAKC,CAAAA,GAAL,CAAU,CAAA,gCAAA,EAAkC,IAAKC,CAAAA,KAAL,EAAa,CAAA,YAAA,CAAzD,CAAwEC,CAAAA,IAAxE,EAAjB,CAAA;;AACA,IAAI,IAAA;AACFC,MAAAA,GAAG,CAACC,IAAJ,CAAS;AACPC,QAAAA,IAAI,EAAER,cAAc,CAACQ,IADd;AAEPC,QAAAA,WAAW,EAAET,cAAc,CAACU,WAFrB;AAEkC;AACzCC,QAAAA,MAAM,EAAET,QAAQ,CAACU,EAHV;AAIPC,QAAAA,WAAW,EAAGC,UAAD,IAAgB;AAAE;AAC7B,UAAA,IAAA,CAAKC,KAAL,CAAWC,GAAX,CAAe,2BAAf,EAA4CF,UAA5C,CAAA,CAAA;AACA,UAAKG,IAAAA,CAAAA,QAAL,CAAc,IAAA,CAAKF,KAAnB,CAAA,CAAA;AACD,SAAA;AAPM,OAAT,CAAA,CAAA;AASD,KAVD,CAUE,OAAOG,CAAP,EAAU;AACVhB,MAAAA,QAAQ,CAACiB,MAAT,EAAA,CAAA;AACA,MAAKhB,IAAAA,CAAAA,GAAL,CAASiB,aAAa,CAAC;AACrBC,QAAAA,IAAI,EAAE,OADe;AAErBC,QAAAA,QAAQ,EAAEC,GAAG,CAAC,qBAAD,EAAwB,OAAxB,CAAA;AAFQ,OAAD,CAAtB,EAGI,yBAHJ,CAAA,CAFU;AAOX,KAAA;AACF,GA3B4B;AA6B7BtB,EAAAA,iBA7B6B,cA6BT;AAEnB,GAAA;AA/B4B,CAAhB,CAAf;;;;"}
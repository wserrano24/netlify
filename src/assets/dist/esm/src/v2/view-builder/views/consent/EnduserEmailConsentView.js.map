{"version":3,"file":"EnduserEmailConsentView.js","sources":["../../../../../../../src/v2/view-builder/views/consent/EnduserEmailConsentView.js"],"sourcesContent":["import { loc } from 'okta';\nimport { BaseForm } from '../../internals';\nimport ConsentViewForm from './ConsentViewForm';\nimport BaseAuthenticatorView from '../../components/BaseAuthenticatorView';\nimport hbs from 'handlebars-inline-precompile';\nimport EmailAuthenticatorHeader from '../../components/EmailAuthenticatorHeader';\n\nconst getInfo = hbs`\n  {{#if browser}}\n    <div class=\"enduser-email-consent--info no-translate\">\n      <i class=\"enduser-email-consent--icon icon--desktop\"></i>\n      <div>{{browser}}</div>\n    </div>\n  {{/if}}\n  {{#if app}}\n    <div class=\"enduser-email-consent--info no-translate\">\n      <i class=\"enduser-email-consent--icon icon--app\"></i>\n      <div>{{app}}</div>\n    </div>\n  {{/if}}`;\nconst enduserEmailConsentViewBody = ConsentViewForm.extend({\n  className: 'enduser-email-consent',\n\n  title() {\n    return loc('oie.consent.enduser.title', 'login');\n  },\n  save() {\n    return loc('oie.consent.enduser.accept.label', 'login');\n  },\n  cancel() {\n    return loc('oie.consent.enduser.deny.label', 'login');\n  },\n  initialize() {\n    BaseForm.prototype.initialize.apply(this, arguments);\n    const info = getInfo(this.model.pick('browser', 'app'));\n    this.add(info);\n  },\n  getUISchema() {\n    const uiSchemas = BaseForm.prototype.getUISchema.apply(this, arguments);\n    return uiSchemas.filter(uiSchema => uiSchema.name !== 'consent' );\n  },\n});\n\nexport default BaseAuthenticatorView.extend({\n  Header: EmailAuthenticatorHeader,\n\n  buttonOrder: ['cancel', 'save'],\n\n  postRender() {\n    const buttonContainer = this.$el.find('.o-form-button-bar');\n    buttonContainer.find('.button-primary').removeClass('button-primary');\n  },\n\n  Body: enduserEmailConsentViewBody,\n\n  createModelClass({ requestInfo }) {\n    const ModelClass = BaseAuthenticatorView.prototype.createModelClass.apply(this, arguments);\n    const browser = requestInfo.find(({ name }) => name === 'browser');\n    const app = requestInfo.find(({ name }) => name === 'appName');\n\n    const local = Object.assign({\n      browser: {\n        type: 'string',\n        value: browser?.value\n      },\n      app: {\n        type: 'string',\n        value: app?.value\n      },\n    }, ModelClass.prototype.local );\n    return ModelClass.extend({\n      local,\n      toJSON() {\n        return {\n          consent: this.get('consent'),\n        };\n      },\n    });\n  }\n});\n"],"names":["getInfo","enduserEmailConsentViewBody","ConsentViewForm","extend","className","title","loc","save","cancel","initialize","BaseForm","prototype","apply","arguments","info","model","pick","add","getUISchema","uiSchemas","filter","uiSchema","name","BaseAuthenticatorView","Header","EmailAuthenticatorHeader","buttonOrder","postRender","buttonContainer","$el","find","removeClass","Body","createModelClass","requestInfo","ModelClass","browser","app","local","Object","assign","type","value","toJSON","consent","get"],"mappings":"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"}
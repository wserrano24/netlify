{"version":3,"file":"ChallengeAuthenticatorEmailView.js","sources":["../../../../../../../src/v2/view-builder/views/email/ChallengeAuthenticatorEmailView.js"],"sourcesContent":["import BaseAuthenticatorEmailView from './BaseAuthenticatorEmailView';\nimport { getCheckYourEmailTitle, getEnterCodeLink } from './AuthenticatorEmailViewUtil';\n\nconst BaseAuthenticatorEmailForm = BaseAuthenticatorEmailView.prototype.Body;\n\nconst Body = BaseAuthenticatorEmailForm.extend(\n  Object.assign({\n    noButtonBar: true,\n    resendEmailAction: 'currentAuthenticatorEnrollment-resend',\n\n    events: {\n      'click .enter-auth-code-instead-link': 'showAuthCodeEntry',\n    },\n\n    initialize() {\n      BaseAuthenticatorEmailForm.prototype.initialize.apply(this, arguments);\n\n      const { email } =\n        this.options.currentViewState.relatesTo?.value?.profile || {};\n\n      const useEmailMagicLinkValue = this.isUseEmailMagicLink();\n\n      if (useEmailMagicLinkValue) {\n        this.add(getEnterCodeLink(), {\n          prepend: true,\n          selector: '.o-form-error-container',\n        });\n      } \n\n      this.add(getCheckYourEmailTitle(), {\n        prepend: true,\n        selector: '.o-form-error-container',\n        options: { email, useEmailMagicLinkValue },\n      });\n    },\n\n    postRender() {\n      BaseAuthenticatorEmailForm.prototype.postRender.apply(this, arguments);\n      if (this.isUseEmailMagicLink()) {\n        this.showCodeEntryField(false);\n      } else {\n        this.noButtonBar = false;\n      }\n    },\n\n    isUseEmailMagicLink() {\n      const useEmailMagicLink = this.options.appState.get('currentAuthenticatorEnrollment')?.\n      contextualData?.useEmailMagicLink;\n      return useEmailMagicLink !== undefined ? useEmailMagicLink : true;\n    },\n\n    showAuthCodeEntry() {\n      this.noButtonBar = false;\n      this.render();\n\n      this.showCodeEntryField(true);\n      this.removeEnterAuthCodeInsteadLink();\n    },\n\n    showCodeEntryField(show = true) {\n      const $textField = this.$el.find('.o-form-fieldset-container');\n      $textField.toggle(show);\n    },\n\n    removeEnterAuthCodeInsteadLink() {\n      this.$el.find('.enter-auth-code-instead-link').remove();\n    },\n  })\n);\n\nexport default BaseAuthenticatorEmailView.extend({\n  Body,\n});\n"],"names":["BaseAuthenticatorEmailForm","BaseAuthenticatorEmailView","prototype","Body","extend","Object","assign","noButtonBar","resendEmailAction","events","initialize","apply","arguments","email","options","currentViewState","relatesTo","value","profile","useEmailMagicLinkValue","isUseEmailMagicLink","add","getEnterCodeLink","prepend","selector","getCheckYourEmailTitle","postRender","showCodeEntryField","useEmailMagicLink","appState","get","contextualData","undefined","showAuthCodeEntry","render","removeEnterAuthCodeInsteadLink","show","$textField","$el","find","toggle","remove"],"mappings":"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"}
{"version":3,"file":"EnrollAuthenticatorOnPremView.js","sources":["../../../../../../../src/v2/view-builder/views/on-prem/EnrollAuthenticatorOnPremView.js"],"sourcesContent":["import { loc } from 'okta';\nimport { BaseForm } from '../../internals';\nimport BaseAuthenticatorView from '../../components/BaseAuthenticatorView';\n\nconst ON_PREM_TOKEN_CHANGE_KEY = 'errors.E0000113';\n\nconst Body = BaseForm.extend({\n\n  className: 'on-prem-authenticator-enroll',\n\n  modelEvents: {\n    'error': '_checkTokenChange'\n  },\n\n  title() {\n    const vendorName =\n      this.options.appState.getAuthenticatorDisplayName() ||\n      loc('oie.on_prem.authenticator.default.vendorName', 'login');\n    return loc('oie.on_prem.enroll.title', 'login', [vendorName]);\n  },\n\n  _checkTokenChange(model, convertedErrors) {\n    const errorSummaryKeys = convertedErrors?.responseJSON?.errorSummaryKeys;\n    if (errorSummaryKeys && errorSummaryKeys.includes(ON_PREM_TOKEN_CHANGE_KEY)) {\n      // this means we are in change pin, so we should clear out answer input\n      this.model.set('credentials.passcode', '');\n      this.render();\n    }\n  },\n\n  save() {\n    return loc('mfa.challenge.verify', 'login');\n  },\n});\n\nexport default BaseAuthenticatorView.extend({\n  Body,\n});\n"],"names":["ON_PREM_TOKEN_CHANGE_KEY","Body","BaseForm","extend","className","modelEvents","title","vendorName","options","appState","getAuthenticatorDisplayName","loc","_checkTokenChange","model","convertedErrors","errorSummaryKeys","responseJSON","includes","set","render","save","BaseAuthenticatorView"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,MAAMA,wBAAwB,GAAG,iBAAjC,CAAA;AAEA,MAAMC,IAAI,GAAGC,QAAQ,CAACC,MAAT,CAAgB;AAE3BC,EAAAA,SAAS,EAAE,8BAFgB;AAI3BC,EAAAA,WAAW,EAAE;AACX,IAAS,OAAA,EAAA,mBAAA;AADE,GAJc;AAQ3BC,EAAAA,KAR2B,EAQnB,YAAA;AACN,IAAA,MAAMC,UAAU,GACd,IAAKC,CAAAA,OAAL,CAAaC,QAAb,CAAsBC,2BAAtB,EAAA,IACAC,GAAG,CAAC,8CAAD,EAAiD,OAAjD,CAFL,CAAA;AAGA,IAAOA,OAAAA,GAAG,CAAC,0BAAD,EAA6B,OAA7B,EAAsC,CAACJ,UAAD,CAAtC,CAAV,CAAA;AACD,GAb0B;AAe3BK,EAAAA,iBAf2B,EAAA,UAeTC,KAfS,EAeFC,eAfE,EAee;AAAA,IAAA,IAAA,qBAAA,CAAA;;AACxC,IAAMC,MAAAA,gBAAgB,GAAGD,eAAH,KAAGA,IAAAA,IAAAA,eAAH,KAAGA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,CAAAA,qBAAAA,GAAAA,eAAe,CAAEE,YAApB,MAAG,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,qBAAA,CAA+BD,gBAAxD,CAAA;;AACA,IAAIA,IAAAA,gBAAgB,IAAIA,gBAAgB,CAACE,QAAjB,CAA0BjB,wBAA1B,CAAxB,EAA6E;AAC3E;AACA,MAAA,IAAA,CAAKa,KAAL,CAAWK,GAAX,CAAe,sBAAf,EAAuC,EAAvC,CAAA,CAAA;AACA,MAAA,IAAA,CAAKC,MAAL,EAAA,CAAA;AACD,KAAA;AACF,GAtB0B;AAwB3BC,EAAAA,IAxB2B,EAwBpB,YAAA;AACL,IAAA,OAAOT,GAAG,CAAC,sBAAD,EAAyB,OAAzB,CAAV,CAAA;AACD,GAAA;AA1B0B,CAAhB,CAAb,CAAA;AA6BA,oCAAeU,qBAAqB,CAAClB,MAAtB,CAA6B;AAC1CF,EAAAA,IAAI,EAAJA,IAAAA;AAD0C,CAA7B,CAAf;;;;"}
{"version":3,"file":"EnrollAuthenticatorEmailView.js","sources":["../../../../../../../src/v2/view-builder/views/email/EnrollAuthenticatorEmailView.js"],"sourcesContent":["import { loc } from 'okta';\nimport BaseAuthenticatorEmailView from './BaseAuthenticatorEmailView';\nimport { getCheckYourEmailTitle, getEnterCodeLink } from './AuthenticatorEmailViewUtil';\n\nconst BaseAuthenticatorEmailForm = BaseAuthenticatorEmailView.prototype.Body;\n\nconst Body = BaseAuthenticatorEmailForm.extend(\n  Object.assign({\n    resendEmailAction: 'currentAuthenticator-resend',\n\n    initialize() {\n      BaseAuthenticatorEmailForm.prototype.initialize.apply(this, arguments);\n\n      const email = this.options.appState.get('user')?.identifier || {};\n\n      const useEmailMagicLinkValue = this.isUseEmailMagicLink();\n\n      if (useEmailMagicLinkValue !== undefined) {\n        \n        this.noButtonBar = true;\n        this.events['click .enter-auth-code-instead-link'] = 'showAuthCodeEntry';\n\n        if (useEmailMagicLinkValue) {\n          this.add(getEnterCodeLink(), {\n            prepend: true,\n            selector: '.o-form-error-container',\n          });\n        } \n  \n        this.add(getCheckYourEmailTitle(), {\n          prepend: true,\n          selector: '.o-form-error-container',\n          options: { email, useEmailMagicLinkValue },\n        });\n      } else {\n        this.subtitle = loc('oie.email.enroll.subtitle', 'login');\n      }\n    },\n\n    postRender() {\n      if (this.isUseEmailMagicLink() !== undefined) {\n        BaseAuthenticatorEmailForm.prototype.postRender.apply(this, arguments);\n        if (this.isUseEmailMagicLink()) {\n          this.showCodeEntryField(false);\n        } else {\n          this.noButtonBar = false;\n        }\n      }\n    },\n\n    isUseEmailMagicLink() {\n      return this.options.appState.get('currentAuthenticator')?.\n      contextualData?.useEmailMagicLink;\n    },\n\n    showAuthCodeEntry() {\n      this.noButtonBar = false;\n      this.render();\n\n      this.showCodeEntryField(true);\n      this.removeEnterAuthCodeInsteadLink();\n    },\n\n    showCodeEntryField(show = true) {\n      const $textField = this.$el.find('.o-form-fieldset-container');\n      $textField.toggle(show);\n    },\n\n    removeEnterAuthCodeInsteadLink() {\n      this.$el.find('.enter-auth-code-instead-link').remove();\n    },\n  })\n);\n\nexport default BaseAuthenticatorEmailView.extend({\n  Body,\n});\n"],"names":["BaseAuthenticatorEmailForm","BaseAuthenticatorEmailView","prototype","Body","extend","Object","assign","resendEmailAction","initialize","apply","arguments","email","options","appState","get","identifier","useEmailMagicLinkValue","isUseEmailMagicLink","undefined","noButtonBar","events","add","getEnterCodeLink","prepend","selector","getCheckYourEmailTitle","subtitle","loc","postRender","showCodeEntryField","contextualData","useEmailMagicLink","showAuthCodeEntry","render","removeEnterAuthCodeInsteadLink","show","$textField","$el","find","toggle","remove"],"mappings":"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"}
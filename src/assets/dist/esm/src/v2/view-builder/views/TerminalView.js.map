{"version":3,"file":"TerminalView.js","sources":["../../../../../../src/v2/view-builder/views/TerminalView.js"],"sourcesContent":["import { loc, createCallout } from 'okta';\nimport { BaseForm, BaseFooter, BaseView } from '../internals';\nimport { getBackToSignInLink, getSkipSetupLink, getReloadPageButtonLink } from '../utils/LinksUtil';\nimport EmailAuthenticatorHeader from '../components/EmailAuthenticatorHeader';\nimport { OTPInformationTerminalView } from './consent/EmailMagicLinkOTPTerminalView';\nimport CustomAccessDeniedErrorMessage from './shared/CustomAccessDeniedErrorMessage';\n\nconst RETURN_LINK_EXPIRED_KEY = 'idx.return.link.expired';\nconst IDX_RETURN_LINK_OTP_ONLY = 'idx.enter.otp.in.original.tab';\nconst SAFE_MODE_KEY_PREFIX = 'idx.error.server.safe.mode';\nconst UNLOCK_ACCOUNT_TERMINAL_KEY = 'oie.selfservice.unlock_user.success.message';\nconst UNLOCK_ACCOUNT_FAILED_PERMISSIONS = 'oie.selfservice.unlock_user.challenge.failed.permissions';\nconst RESET_PASSWORD_NOT_ALLOWED = 'oie.selfservice.reset.password.not.allowed';\nconst RETURN_TO_ORIGINAL_TAB_KEY = 'idx.return.to.original.tab';\nconst OPERATION_CANCELED_ON_OTHER_DEVICE_KEY = 'idx.operation.cancelled.on.other.device';\nconst OPERATION_CANCELED_BY_USER_KEY = 'idx.operation.cancelled.by.user';\nconst DEVICE_ACTIVATED = 'idx.device.activated';\nconst DEVICE_NOT_ACTIVATED_CONSENT_DENIED = 'idx.device.not.activated.consent.denied';\nconst DEVICE_NOT_ACTIVATED_INTERNAL_ERROR = 'idx.device.not.activated.internal.error';\nconst FLOW_CONTINUE_IN_NEW_TAB = 'idx.transferred.to.new.tab';\nconst EMAIL_LINK_OUT_OF_DATE = 'idx.return.stale';\nconst EMAIL_LINK_CANT_BE_PROCESSED = 'idx.return.error';\nconst EMAIL_VERIFICATION_REQUIRED = 'idx.email.verification.required';\n\nconst EMAIL_ACTIVATION_EMAIL_EXPIRE = 'idx.expired.activation.token';\nconst EMAIL_ACTIVATION_EMAIL_INVALID = 'idx.missing.activation.token';\nconst EMAIL_ACTIVATION_EMAIL_SUBMITTED = 'idx.request.activation.email';\nconst EMAIL_ACTIVATION_EMAIL_SUSPENDED = 'idx.activating.inactive.user';\n\nconst CUSTOM_ACCESS_DENIED_KEY = 'security.access_denied_custom_message';\n\nexport const REGISTRATION_NOT_ENABLED = 'oie.registration.is.not.enabled';\nexport const FORGOT_PASSWORD_NOT_ENABLED = 'oie.forgot.password.is.not.enabled';\n\nconst EMAIL_AUTHENTICATOR_TERMINAL_KEYS = [\n  FLOW_CONTINUE_IN_NEW_TAB,\n  EMAIL_LINK_OUT_OF_DATE,\n  EMAIL_LINK_CANT_BE_PROCESSED,\n  EMAIL_VERIFICATION_REQUIRED,\n  RETURN_TO_ORIGINAL_TAB_KEY,\n  RETURN_LINK_EXPIRED_KEY,\n  OPERATION_CANCELED_ON_OTHER_DEVICE_KEY,\n  OPERATION_CANCELED_BY_USER_KEY,\n  IDX_RETURN_LINK_OTP_ONLY,\n];\n\nconst DEVICE_CODE_ERROR_KEYS = [\n  DEVICE_NOT_ACTIVATED_CONSENT_DENIED,\n  DEVICE_NOT_ACTIVATED_INTERNAL_ERROR\n];\n\nconst DEVICE_CODE_FLOW_TERMINAL_KEYS = [\n  DEVICE_ACTIVATED,\n  ...DEVICE_CODE_ERROR_KEYS\n];\n\n// These terminal views build their own links, basically they have cancel remediation in error response\n// Or doesn't require a Back to Sign in link because the flow didn't start from login screen\nconst NO_BACKTOSIGNIN_LINK_VIEWS = [\n  UNLOCK_ACCOUNT_TERMINAL_KEY,\n  RETURN_TO_ORIGINAL_TAB_KEY,\n  FLOW_CONTINUE_IN_NEW_TAB,\n  OPERATION_CANCELED_ON_OTHER_DEVICE_KEY,\n  ...DEVICE_CODE_FLOW_TERMINAL_KEYS,\n  UNLOCK_ACCOUNT_FAILED_PERMISSIONS,\n  RESET_PASSWORD_NOT_ALLOWED,\n  IDX_RETURN_LINK_OTP_ONLY,\n];\n\n// Key map to transform terminal view titles {ApiKey : WidgetKey}  \nconst terminalViewTitles = {\n  [RETURN_LINK_EXPIRED_KEY] : 'oie.email.return.link.expired.title',\n  [UNLOCK_ACCOUNT_TERMINAL_KEY] : 'account.unlock.unlocked.title',\n  [DEVICE_ACTIVATED] : 'device.code.activated.success.title',\n  [REGISTRATION_NOT_ENABLED] : 'oie.registration.form.title',\n  [FORGOT_PASSWORD_NOT_ENABLED] : 'password.reset.title.generic',\n  [EMAIL_ACTIVATION_EMAIL_EXPIRE] : 'oie.activation.request.email.title.expire',\n  [EMAIL_ACTIVATION_EMAIL_SUBMITTED] : 'oie.activation.request.email.title.submitted',\n  [EMAIL_ACTIVATION_EMAIL_SUSPENDED] : 'oie.activation.request.email.title.suspended',\n  [EMAIL_ACTIVATION_EMAIL_INVALID] : 'oie.activation.request.email.title.invalid',\n  [DEVICE_NOT_ACTIVATED_CONSENT_DENIED] : 'device.code.activated.error.title',\n  [DEVICE_NOT_ACTIVATED_INTERNAL_ERROR] : 'device.code.activated.error.title',\n  [RETURN_TO_ORIGINAL_TAB_KEY] : 'oie.consent.enduser.email.allow.title',\n  [IDX_RETURN_LINK_OTP_ONLY]: 'idx.return.link.otponly.your.verification.code',\n};\n\nconst Body = BaseForm.extend({\n  noButtonBar: true,\n\n  postRender() {\n    BaseForm.prototype.postRender.apply(this, arguments);\n    this.$el.addClass('terminal-state');\n\n    // show device code terminal icons\n    if (this.options.appState.containsMessageWithI18nKey(DEVICE_CODE_FLOW_TERMINAL_KEYS)) {\n      const iconClass = this.options.appState.containsMessageWithI18nKey(DEVICE_ACTIVATED)\n        ? 'success-24-green' : 'error-24-red';\n      this.$('.o-form-head').before('<div class=\"device-code-terminal--icon-container\">' +\n        '<span class=\"device-code-terminal--icon ' + iconClass + '\"></span>' +\n        '</div>');\n    }\n  },\n\n  title() {\n    return this.getTerminalViewTitle();\n  },\n\n  getTerminalViewTitle() {\n    if (this.options.appState.containsMessageStartingWithI18nKey(SAFE_MODE_KEY_PREFIX)) {\n      return loc('oie.safe.mode.title', 'login');\n    }\n\n    const apiKeys = Object.keys(terminalViewTitles);\n    const key = apiKeys.find(key => this.options.appState.containsMessageWithI18nKey(key));\n    if (key) {\n      return loc(terminalViewTitles[key], 'login');\n    }\n  },\n\n  showMessages() {\n    const messagesObjs = this.options.appState.get('messages');\n    let hasCustomView = false;\n    let description;\n    if (this.options.appState.containsMessageWithI18nKey(OPERATION_CANCELED_ON_OTHER_DEVICE_KEY)) {\n      description = loc('idx.operation.cancelled.on.other.device', 'login');\n      messagesObjs.value.push({ message: loc('oie.consent.enduser.deny.description', 'login') });\n    } else if (this.options.appState.containsMessageWithI18nKey(RETURN_TO_ORIGINAL_TAB_KEY)) {\n      description = loc('oie.consent.enduser.email.allow.description', 'login');\n      messagesObjs.value.push({ message: loc('oie.return.to.original.tab', 'login')});\n    } else if (this.options.appState.containsMessageWithI18nKey('tooManyRequests')) {\n      description = loc('oie.tooManyRequests', 'login');\n    } else if (this.options.appState.containsMessageWithI18nKey(RETURN_LINK_EXPIRED_KEY)) {\n      messagesObjs.value[0].class = 'ERROR';\n    } else if (this.options.appState.containsMessageWithI18nKey(IDX_RETURN_LINK_OTP_ONLY)) {\n      this.add(OTPInformationTerminalView);\n      hasCustomView = true;\n    } else if (this.options.appState.containsMessageStartingWithI18nKey(CUSTOM_ACCESS_DENIED_KEY)) {\n      this.add(createCallout({\n        type: 'error',\n        content: new CustomAccessDeniedErrorMessage(\n          { message: messagesObjs.value[0].message, links: messagesObjs.value[0].links })\n      }));\n      hasCustomView = true;\n    }\n\n    if (description && Array.isArray(messagesObjs?.value)) {\n      messagesObjs.value[0].message = description;\n    }\n\n    this.options.appState.set('messages', messagesObjs);\n    if (!hasCustomView) {\n      BaseForm.prototype.showMessages.call(this);\n    }\n  },\n\n});\n\nconst Footer = BaseFooter.extend({\n  // All terminal views should have Back to sign in link either widget configured or server configured.\n  links: function() {\n    if (this.options.appState.containsMessageStartingWithI18nKey(SAFE_MODE_KEY_PREFIX)) {\n      return getSkipSetupLink(this.options.appState);\n    }\n    if (this.options.appState.containsMessageWithI18nKey(DEVICE_CODE_ERROR_KEYS)) {\n      return getReloadPageButtonLink();\n    }\n    // If cancel object exists idx response then view would take care of rendering back to sign in link\n    if (!this.options.appState.hasActionObject('cancel') &&\n        !this.options.appState.containsMessageWithI18nKey(NO_BACKTOSIGNIN_LINK_VIEWS)) {\n      // TODO OKTA-432869 \"back to sign in\" links to org baseUrl, does not work correctly with embedded widget\n      return getBackToSignInLink(this.options);\n    }\n  }\n});\n\nexport default BaseView.extend({\n  initialize() {\n    BaseView.prototype.initialize.apply(this, arguments);\n    if (this.options.appState.containsMessageWithI18nKey(EMAIL_AUTHENTICATOR_TERMINAL_KEYS)) {\n      this.Header = EmailAuthenticatorHeader;\n    }\n  },\n  Body,\n  Footer\n});\n"],"names":["RETURN_LINK_EXPIRED_KEY","IDX_RETURN_LINK_OTP_ONLY","SAFE_MODE_KEY_PREFIX","UNLOCK_ACCOUNT_TERMINAL_KEY","UNLOCK_ACCOUNT_FAILED_PERMISSIONS","RESET_PASSWORD_NOT_ALLOWED","RETURN_TO_ORIGINAL_TAB_KEY","OPERATION_CANCELED_ON_OTHER_DEVICE_KEY","OPERATION_CANCELED_BY_USER_KEY","DEVICE_ACTIVATED","DEVICE_NOT_ACTIVATED_CONSENT_DENIED","DEVICE_NOT_ACTIVATED_INTERNAL_ERROR","FLOW_CONTINUE_IN_NEW_TAB","EMAIL_LINK_OUT_OF_DATE","EMAIL_LINK_CANT_BE_PROCESSED","EMAIL_VERIFICATION_REQUIRED","EMAIL_ACTIVATION_EMAIL_EXPIRE","EMAIL_ACTIVATION_EMAIL_INVALID","EMAIL_ACTIVATION_EMAIL_SUBMITTED","EMAIL_ACTIVATION_EMAIL_SUSPENDED","CUSTOM_ACCESS_DENIED_KEY","REGISTRATION_NOT_ENABLED","FORGOT_PASSWORD_NOT_ENABLED","EMAIL_AUTHENTICATOR_TERMINAL_KEYS","DEVICE_CODE_ERROR_KEYS","DEVICE_CODE_FLOW_TERMINAL_KEYS","NO_BACKTOSIGNIN_LINK_VIEWS","terminalViewTitles","Body","BaseForm","extend","noButtonBar","postRender","prototype","apply","arguments","$el","addClass","options","appState","containsMessageWithI18nKey","iconClass","$","before","title","getTerminalViewTitle","containsMessageStartingWithI18nKey","loc","apiKeys","Object","keys","key","find","showMessages","messagesObjs","get","hasCustomView","description","value","push","message","class","add","OTPInformationTerminalView","createCallout","type","content","CustomAccessDeniedErrorMessage","links","Array","isArray","set","call","Footer","BaseFooter","getSkipSetupLink","getReloadPageButtonLink","hasActionObject","getBackToSignInLink","BaseView","initialize","Header","EmailAuthenticatorHeader"],"mappings":"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"}
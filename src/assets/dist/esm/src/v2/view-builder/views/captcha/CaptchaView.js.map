{"version":3,"file":"CaptchaView.js","sources":["../../../../../../../src/v2/view-builder/views/captcha/CaptchaView.js"],"sourcesContent":["/*!\n * Copyright (c) 2021, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { View } from 'okta';\nimport Enums from 'util/Enums';\nimport hbs from 'handlebars-inline-precompile';\nimport { WIDGET_FOOTER_CLASS } from '../../utils/Constants';\n\nconst OktaSignInWidgetOnCaptchaLoadedCallback = 'OktaSignInWidgetOnCaptchaLoaded';\nconst OktaSignInWidgetOnCaptchaSolvedCallback = 'OktaSignInWidgetOnCaptchaSolved';\n\nconst HCAPTCHA_URL = \n  `https://hcaptcha.com/1/api.js?onload=${OktaSignInWidgetOnCaptchaLoadedCallback}&render=explicit`;\nconst RECAPTCHAV2_URL = \n  `https://www.google.com/recaptcha/api.js?onload=${OktaSignInWidgetOnCaptchaLoadedCallback}&render=explicit`;\n\nexport default View.extend({\n  className: 'captcha-view',\n\n  template: hbs`\n    {{#if isCaptchaConfigured}}\\\n      <div id =\"captcha-container\"\n          class=\"{{className}}\"\n          data-sitekey=\"{{siteKey}}\"\n          data-callback=\"{{onCaptchaSolvedCallback}}\"\n          data-size=\"invisible\">\n      </div>\n    {{/if}}\\\n  `,\n\n  getTemplateData: function() {\n    if (this.captchaConfig) {\n      const className = this.captchaConfig.type === 'HCAPTCHA' ? 'h-captcha' : 'g-recaptcha';\n      return { \n        siteKey: this.captchaConfig.siteKey,\n        isCaptchaConfigured: true,\n        onCaptchaSolvedCallback: OktaSignInWidgetOnCaptchaSolvedCallback,\n        className, \n      };\n    } else {\n      return {};\n    }\n  },\n\n  initialize() {\n    if (this.options.appState.get('captcha')) {\n      this.captchaConfig = this.options.appState.get('captcha');\n      this._addCaptcha();\n    }\n  },\n\n  remove: function(){\n    View.prototype.remove.apply(this, arguments);\n\n    // Cleanup global Captcha references\n    if (this.captchaConfig.type === 'HCAPTCHA') {\n      window.hcaptcha = undefined;\n    } else if (this.captchaConfig.type === 'RECAPTCHA_V2') {\n      window.grecaptcha = undefined;\n    }\n  },\n\n  /**\n   *  Load the CAPTCHA lib dynamically (either HCAPTCHA or RECAPTCHAV2). Once loaded, trigger an event to inform\n   *  the parent form to actually render the CAPTCHA.\n  * */   \n  _addCaptcha() {\n    // Callback invoked when CAPTCHA is solved.\n    const onCaptchaSolved = (token) => {\n      const captchaObject = this._getCaptchaOject();\n\n      // We reset the Captcha. We need to reset because every time the \n      // Captcha resolves back with a token and say we have a server side error, \n      // if we submit the form again it won't work otherwise. The Captcha \n      // has to be reset for it to work again in that scenario.\n      const captchaId = this.$el.find('#captcha-container').attr('data-captcha-id');\n      captchaObject.reset(captchaId);\n\n      // Set the token in the model\n      const fieldName = this.options.name;\n      this.model.set(fieldName, token);\n\n      this.options.appState.trigger('saveForm', this.model); \n    };\n\n    // Callback when CAPTCHA lib is loaded\n    const onCaptchaLoaded = () => {\n      // This is just a safeguard to ensure we don't bind Captcha to an already bound element.\n      // It shouldn't happen in practice.\n      if (this.$el.find('#captcha-container').attr('data-captcha-id')) {\n        return;\n      }\n\n      const captchaObject = this._getCaptchaOject();\n\n      // We set a temporary token for Captcha because this is a required field for the form and is normally set\n      // at a later time. In order to prevent client-side validation errors because of this, we have to set a \n      // dummy value. We then overwrite this with the proper token in the onCaptchaSolved callback.\n      this.model.set(this.options.name, 'tempToken');\n\n      const captchaId = captchaObject.render('captcha-container', {\n        sitekey: this.captchaConfig.siteKey,\n        callback: onCaptchaSolved\n      });\n      \n      this.$el.find('#captcha-container').attr('data-captcha-id', captchaId);\n\n      // Let the Baseform know that Captcha is loaded.\n      this.options.appState.trigger('onCaptchaLoaded', captchaObject);\n\n      // Render the HCAPTCHA footer - we need to do this manually since the HCAPTCHA lib doesn't do it\n      if (this.captchaConfig.type === 'HCAPTCHA') {\n        this._addHCaptchaFooter();\n      }  \n    };\n\n    // Attaching the callback to the window object so that the CAPTCHA script that we dynamically render\n    // can have access to it since it won't have access to this view's scope.\n    window[OktaSignInWidgetOnCaptchaLoadedCallback] = onCaptchaLoaded;\n\n    // Attaching the Captcha solved callback to the window object because we reference it in our template under\n    // the 'data-callback' attribute which the Captcha library uses to invoke the callback.\n    window[OktaSignInWidgetOnCaptchaSolvedCallback] = onCaptchaSolved;\n\n    \n    if (this.captchaConfig.type === 'HCAPTCHA') {\n      this._loadCaptchaLib(this._getCaptchaUrl(HCAPTCHA_URL));\n    } else if (this.captchaConfig.type === 'RECAPTCHA_V2') {\n      this._loadCaptchaLib(this._getCaptchaUrl(RECAPTCHAV2_URL));\n    }\n  },\n  \n  /**\n   *  We dynamically inject <script> tag into our login container because in case the customer is hosting\n   *  the SIW, we need to ensure we don't go out of scope when injecting the script.\n  * */ \n  _loadCaptchaLib(url) {\n    let scriptTag = document.createElement('script');\n    scriptTag.src = url;\n    scriptTag.async = true;\n    scriptTag.defer = true;\n    document.getElementById(Enums.WIDGET_CONTAINER_ID).appendChild(scriptTag);\n  },\n\n  _addHCaptchaFooter() {\n    // NOTE: insetAdjacentHTML() is supported in all major browsers: \n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML#browser_compatibility\n    const footerContainer = document.getElementsByClassName(WIDGET_FOOTER_CLASS);\n    if (footerContainer.length) {\n      const template = hbs('<div class=\"captcha-footer\">\\\n        <span class=\"footer-text\">\\\n          {{i18n code=\"hcaptcha.footer.label\" bundle=\"login\" \\\n          $1=\"<a href=\\'https://hcaptcha.com/privacy\\' target=\\'_blank\\'>$1</a>\" \\\n          $2=\"<a href=\\'https://hcaptcha.com/terms\\' target=\\'_blank\\'>$2</a>\"}}\\\n        </span>\\\n      </div>');\n\n      footerContainer[0].insertAdjacentHTML('beforeend',\n        template()\n      );\n    }\n  },\n\n  _getCaptchaOject() {\n    const captchaObject = this.captchaConfig.type === 'HCAPTCHA' ? window.hcaptcha : window.grecaptcha;\n    return captchaObject;\n  },\n\n  _getCaptchaUrl(baseURL) {\n    const locale = this.options.settings.get('language');\n    return `${baseURL}&hl=${locale || navigator.language}`;\n  }\n});\n"],"names":["OktaSignInWidgetOnCaptchaLoadedCallback","OktaSignInWidgetOnCaptchaSolvedCallback","HCAPTCHA_URL","RECAPTCHAV2_URL","View","extend","className","template","getTemplateData","captchaConfig","type","siteKey","isCaptchaConfigured","onCaptchaSolvedCallback","initialize","options","appState","get","_addCaptcha","remove","prototype","apply","arguments","window","hcaptcha","undefined","grecaptcha","onCaptchaSolved","token","captchaObject","_getCaptchaOject","captchaId","$el","find","attr","reset","fieldName","name","model","set","trigger","onCaptchaLoaded","render","sitekey","callback","_addHCaptchaFooter","_loadCaptchaLib","_getCaptchaUrl","url","scriptTag","document","createElement","src","async","defer","getElementById","Enums","WIDGET_CONTAINER_ID","appendChild","footerContainer","getElementsByClassName","WIDGET_FOOTER_CLASS","length","insertAdjacentHTML","baseURL","locale","settings","navigator","language"],"mappings":"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"}
{"version":3,"file":"EnrollProfileUpdateView.js","sources":["../../../../../../src/v2/view-builder/views/EnrollProfileUpdateView.js"],"sourcesContent":["import { loc, View } from 'okta';\nimport { BaseFooter, BaseForm, BaseView } from '../internals';\nimport hbs from 'handlebars-inline-precompile';\nimport { getSkipSetupLink } from '../utils/LinksUtil';\n\nconst Body = BaseForm.extend({\n\n  className: 'profile-update',\n\n  title() {\n    return loc('oie.profile.additional.title', 'login');\n  },\n  \n  save() {\n    return loc('enroll.choices.submit.finish', 'login');\n  },\n\n  getUISchema() {\n    const uiSchemas = BaseForm.prototype.getUISchema.apply(this, arguments);\n    uiSchemas.forEach(input => {\n      if (input.name === 'userProfile.secondEmail') {\n        input.explain = View.extend({\n          template: hbs`{{{i18n\n            code=\"oie.profile.additional.secondemail.subtitle\"\n            bundle=\"login\" \n            $1=\"<span class='strong'>$1</span>\"}}}`\n        });\n      }\n    });\n    \n    return uiSchemas;\n  },\n\n  initialize() {\n    BaseForm.prototype.initialize.apply(this, arguments);\n  },\n});\n\nconst Footer = BaseFooter.extend({\n  className: 'auth-footer side-by-side-links',\n  links: function() {\n    const { uiSchema } = this.options.currentViewState;\n    const optionalParams = uiSchema.filter(item => item.required === false);\n    if(uiSchema.length === optionalParams.length) {\n      return getSkipSetupLink(this.options.appState, loc('oie.enroll.skip.profile', 'login'));\n    } else {\n      this.$el.removeClass('.side-by-side-links');\n    }\n  }\n});\n\nexport default BaseView.extend({\n  Body,\n  Footer,\n\n  postRender() {\n    BaseView.prototype.postRender.apply(this, arguments);\n    /**\n     * As per requirement of this flow set secondEmail default to empty string, if exists in remediation\n     * ideally server should have passed default string in remediation\n     */\n    if (this.options.appState.getSchemaByName('userProfile.secondEmail')) {\n      this.model.set('userProfile.secondEmail', '');\n    }\n  }\n});"],"names":["Body","BaseForm","extend","className","title","loc","save","getUISchema","uiSchemas","prototype","apply","arguments","forEach","input","name","explain","View","template","initialize","Footer","BaseFooter","links","uiSchema","options","currentViewState","optionalParams","filter","item","required","length","getSkipSetupLink","appState","$el","removeClass","BaseView","postRender","getSchemaByName","model","set"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,MAAMA,IAAI,GAAGC,QAAQ,CAACC,MAAT,CAAgB;AAE3BC,EAAAA,SAAS,EAAE,gBAFgB;AAI3BC,EAAAA,KAJ2B,EAInB,YAAA;AACN,IAAA,OAAOC,GAAG,CAAC,8BAAD,EAAiC,OAAjC,CAAV,CAAA;AACD,GAN0B;AAQ3BC,EAAAA,IAR2B,EAQpB,YAAA;AACL,IAAA,OAAOD,GAAG,CAAC,8BAAD,EAAiC,OAAjC,CAAV,CAAA;AACD,GAV0B;AAY3BE,EAAAA,WAZ2B,EAYb,YAAA;AACZ,IAAA,MAAMC,SAAS,GAAGP,QAAQ,CAACQ,SAAT,CAAmBF,WAAnB,CAA+BG,KAA/B,CAAqC,IAArC,EAA2CC,SAA3C,CAAlB,CAAA;AACAH,IAAAA,SAAS,CAACI,OAAV,CAAkBC,KAAK,IAAI;AACzB,MAAA,IAAIA,KAAK,CAACC,IAAN,KAAe,yBAAnB,EAA8C;AAC5CD,QAAAA,KAAK,CAACE,OAAN,GAAgBC,IAAI,CAACd,MAAL,CAAY;AAC1Be,UAAAA,QAAQ,EAAA,YAAA,CAAA,QAAA,CAAA;AAAA,YAAA,UAAA,EAAA,CAAA,CAAA,EAAA,UAAA,CAAA;AAAA,YAAA,MAAA,EAAA,UAAA,SAAA,EAAA,MAAA,EAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA;AAAA,cAAA,IAAA,MAAA;AAAA,kBAAA,cAAA,GAAA,SAAA,CAAA,cAAA,IAAA,UAAA,MAAA,EAAA,YAAA,EAAA;AAAA,gBAAA,IAAA,MAAA,CAAA,SAAA,CAAA,cAAA,CAAA,IAAA,CAAA,MAAA,EAAA,YAAA,CAAA,EAAA;AAAA,kBAAA,OAAA,MAAA,CAAA,YAAA,CAAA,CAAA;AAAA,iBAAA;;AAAA,gBAAA,OAAA,SAAA,CAAA;AAAA,eAAA,CAAA;;AAAA,cAAA,OAAA,CAAA,MAAA,GAAA,CAAA,cAAA,CAAA,OAAA,EAAA,MAAA,CAAA,IAAA,MAAA,IAAA,cAAA,CAAA,MAAA,EAAA,MAAA,CAAA,IAAA,SAAA,CAAA,KAAA,CAAA,aAAA,EAAA,IAAA,CAAA,MAAA,IAAA,IAAA,GAAA,MAAA,GAAA,SAAA,CAAA,WAAA,IAAA,EAAA,EAAA;AAAA,gBAAA,MAAA,EAAA,MAAA;AAAA,gBAAA,MAAA,EAAA;AAAA,kBAAA,IAAA,EAAA,gCAAA;AAAA,kBAAA,QAAA,EAAA,OAAA;AAAA,kBAAA,MAAA,EAAA,6CAAA;AAAA,iBAAA;AAAA,gBAAA,MAAA,EAAA,IAAA;AAAA,gBAAA,KAAA,EAAA;AAAA,kBAAA,OAAA,EAAA;AAAA,oBAAA,MAAA,EAAA,CAAA;AAAA,oBAAA,QAAA,EAAA,CAAA;AAAA,mBAAA;AAAA,kBAAA,KAAA,EAAA;AAAA,oBAAA,MAAA,EAAA,CAAA;AAAA,oBAAA,QAAA,EAAA,GAAA;AAAA,mBAAA;AAAA,iBAAA;AAAA,eAAA,CAAA,KAAA,IAAA,GAAA,MAAA,GAAA,EAAA,CAAA;AAAA,aAAA;AAAA,YAAA,SAAA,EAAA,IAAA;AAAA,WAAA,CAAA;AADkB,SAAZ,CAAhB,CAAA;AAMD,OAAA;AACF,KATD,CAAA,CAAA;AAWA,IAAA,OAAOT,SAAP,CAAA;AACD,GA1B0B;AA4B3BU,EAAAA,UA5B2B,EA4Bd,YAAA;AACXjB,IAAAA,QAAQ,CAACQ,SAAT,CAAmBS,UAAnB,CAA8BR,KAA9B,CAAoC,IAApC,EAA0CC,SAA1C,CAAA,CAAA;AACD,GAAA;AA9B0B,CAAhB,CAAb,CAAA;AAiCA,MAAMQ,MAAM,GAAGC,UAAU,CAAClB,MAAX,CAAkB;AAC/BC,EAAAA,SAAS,EAAE,gCADoB;AAE/BkB,EAAAA,KAAK,EAAE,YAAW;AAChB,IAAM,MAAA;AAAEC,MAAAA,QAAQ,EAARA,QAAAA;AAAF,KAAe,GAAA,IAAA,CAAKC,OAAL,CAAaC,gBAAlC,CAAA;AACA,IAAA,MAAMC,cAAc,GAAGH,QAAQ,CAACI,MAAT,CAAgBC,IAAI,IAAIA,IAAI,CAACC,QAAL,KAAkB,KAA1C,CAAvB,CAAA;;AACA,IAAA,IAAGN,QAAQ,CAACO,MAAT,KAAoBJ,cAAc,CAACI,MAAtC,EAA8C;AAC5C,MAAA,OAAOC,gBAAgB,CAAC,IAAKP,CAAAA,OAAL,CAAaQ,QAAd,EAAwB1B,GAAG,CAAC,yBAAD,EAA4B,OAA5B,CAA3B,CAAvB,CAAA;AACD,KAFD,MAEO;AACL,MAAA,IAAA,CAAK2B,GAAL,CAASC,WAAT,CAAqB,qBAArB,CAAA,CAAA;AACD,KAAA;AACF,GAAA;AAV8B,CAAlB,CAAf,CAAA;AAaA,8BAAeC,QAAQ,CAAChC,MAAT,CAAgB;AAC7BF,EAAAA,IAAI,EAAJA,IAD6B;AAE7BmB,EAAAA,MAAM,EAANA,MAF6B;AAI7BgB,EAAAA,UAJ6B,EAIhB,YAAA;AACXD,IAAAA,QAAQ,CAACzB,SAAT,CAAmB0B,UAAnB,CAA8BzB,KAA9B,CAAoC,IAApC,EAA0CC,SAA1C,CAAA,CAAA;AACA;AACJ;AACA;AACA;;AACI,IAAI,IAAA,IAAA,CAAKY,OAAL,CAAaQ,QAAb,CAAsBK,eAAtB,CAAsC,yBAAtC,CAAJ,EAAsE;AACpE,MAAA,IAAA,CAAKC,KAAL,CAAWC,GAAX,CAAe,yBAAf,EAA0C,EAA1C,CAAA,CAAA;AACD,KAAA;AACF,GAAA;AAb4B,CAAhB,CAAf;;;;"}
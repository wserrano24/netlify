{"version":3,"file":"Settings.js","sources":["../../../../src/models/Settings.ts"],"sourcesContent":["/* eslint max-statements: [2, 22],  complexity: [2, 12] */\n\n/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { _, Model, loc, internal, ModelProperty } from 'okta';\nimport config from 'config/config.json';\nimport hbs from 'handlebars-inline-precompile';\nimport Q from 'q';\nimport BrowserFeatures from 'util/BrowserFeatures';\nimport {\n  ConfigError,\n  UnsupportedBrowserError\n} from 'util/Errors';\nimport IDP from 'util/IDP';\nimport Logger from 'util/Logger';\nimport Util from 'util/Util';\nimport CountryUtil from 'util/CountryUtil';\nimport { OktaAuth } from '@okta/okta-auth-js';\nconst SharedUtil = internal.util.Util;\nconst assetBaseUrlTpl = hbs('https://global.oktacdn.com/okta-signin-widget/{{version}}');\n\nconst local: Record<string, ModelProperty> = {\n  baseUrl: ['string', true],\n  recoveryToken: ['string', false, undefined],\n  stateToken: ['string', false, undefined],\n  username: ['string', false],\n  relayState: ['string', false],\n\n  // These two settings are aliases. Setting either value will set `backToSignInUri` \n  signOutLink: ['string', false], // for backward compatibility\n  backToSignInLink: ['string', false], // preferred setting\n\n  redirect: {\n    type: 'string',\n    values: ['never', 'always', 'auto'],\n    value: 'auto',\n  },\n\n  // allows bootstrapping the Widget into a specific view such\n  // as register or forgot password\n  flow: ['string', false, 'default'],\n\n  // Function to transform the username before passing it to the API\n  // for Primary Auth, Forgot Password and Unlock Account.\n  transformUsername: ['function', false],\n\n  // CALLBACKS\n  globalSuccessFn: 'function',\n  globalErrorFn: 'function',\n  processCreds: 'function',\n  hooks: 'object',\n\n  // IMAGES\n  logo: 'string',\n  logoText: ['string', false],\n  helpSupportNumber: 'string',\n\n  // <OIE>\n  // attribute to hold proxy (fake) idx response\n  // to render static pages without initiating idx pipeline\n  proxyIdxResponse: ['object', false],\n\n  // <OIE>\n  // By default, state handle will be saved to session storage\n  // and will be clear when terminal error or success redirect.\n  // Set this flag to true if you want to override this behavior.\n  // a.k.a dishonor the state handle stored in session storage.\n  overrideExistingStateToken: ['boolean', false, false],\n\n  // FEATURES\n  'features.router': ['boolean', true, false],\n  'features.securityImage': ['boolean', true, false],\n  'features.rememberMe': ['boolean', true, true],\n  'features.autoPush': ['boolean', true, false],\n  'features.smsRecovery': ['boolean', true, false],\n  'features.callRecovery': ['boolean', true, false],\n  'features.emailRecovery': ['boolean', false, true],\n  'features.webauthn': ['boolean', true, false],\n  'features.selfServiceUnlock': ['boolean', true, false],\n  'features.multiOptionalFactorEnroll': ['boolean', true, false],\n  'features.deviceFingerprinting': ['boolean', false, false],\n  'features.hideSignOutLinkInMFA': ['boolean', false, false],\n  'features.skipIdpFactorVerificationBtn': ['boolean', false, false],\n  'features.hideBackToSignInForReset': ['boolean', false, false],\n  'features.customExpiredPassword': ['boolean', true, false],\n  'features.registration': ['boolean', false, false],\n  'features.idpDiscovery': ['boolean', false, false],\n  'features.passwordlessAuth': ['boolean', false, false],\n  'features.showPasswordToggleOnSignInPage': ['boolean', false, false],\n  'features.trackTypingPattern': ['boolean', false, false],\n  'features.redirectByFormSubmit': ['boolean', false, false],\n  'features.useDeviceFingerprintForSecurityImage': ['boolean', false, true],\n  'features.showPasswordRequirementsAsHtmlList': ['boolean', false, false],\n  'features.mfaOnlyFlow': ['boolean', false, false],\n  'features.scrollOnError': ['boolean', false, true],\n  'features.showKeepMeSignedIn': ['boolean', false, true],\n  'features.showIdentifier': ['boolean', false, true],\n  'features.autoFocus': ['boolean', false, true],\n  'features.rememberMyUsernameOnOIE': ['boolean', false, false],\n  \n  defaultCountryCode: ['string', false, 'US'],\n\n  // I18N\n  language: ['any', false], // Can be a string or a function\n  i18n: ['object', false],\n\n  // ASSETS\n  'assets.baseUrl': ['string', false],\n  'assets.rewrite': {\n    type: 'function',\n    value: _.identity,\n  },\n  'assets.languages': ['array', false],\n\n  // OAUTH2\n  issuer: 'string',\n  clientId: 'string',\n  redirectUri: 'string',\n  state: 'string',\n  nonce: 'string',\n  scopes: 'array',\n  codeChallenge: 'string',\n  codeChallengeMethod: ['string', false],\n  oAuthTimeout: ['number', false],\n\n  authScheme: ['string', false, 'OAUTH2'],\n\n  // External IdPs\n  idps: ['array', false, []],\n  idpDisplay: {\n    type: 'string',\n    values: ['PRIMARY', 'SECONDARY'],\n    value: 'SECONDARY',\n  },\n\n  // HELP LINKS\n  'helpLinks.help': 'string',\n  'helpLinks.forgotPassword': 'string',\n  'helpLinks.unlock': 'string',\n  'helpLinks.custom': 'array',\n  'helpLinks.factorPage.href': 'string',\n  'helpLinks.factorPage.text': 'string',\n\n  //Custom Buttons\n  customButtons: ['array', false, []],\n\n  //Registration\n  policyId: 'string',\n  'registration.click': 'function',\n  'registration.parseSchema': 'function',\n  'registration.preSubmit': 'function',\n  'registration.postSubmit': 'function',\n\n  //Consent\n  'consent.cancel': 'function',\n\n  //IDP Discovery\n  'idpDiscovery.requestContext': 'string',\n\n  //Colors\n  'colors.brand': 'string',\n\n  //Descriptions\n  brandName: 'string',\n\n  //PIV\n  piv: ['object', false, {}],\n\n  //Email verify callback\n  otp: 'string',\n};\n\nconst derived: Record<string, ModelProperty>  = {\n  backToSignInUri: {\n    deps: ['backToSignInLink', 'signOutLink'],\n    fn: function(backToSignInLink, signOutLink) {\n      return backToSignInLink || signOutLink; // prefer backToSignInLink over signOutLink, but they are aliases\n    }\n  },\n  showPasswordToggle: {\n    deps: ['features.showPasswordToggleOnSignInPage'],\n    fn: function() {\n      // showPasswordToggle is for OIE only.\n      // Used to default showPasswordToggleOnSignInPage to true.\n      const defaultValue = true;\n      const customizedValue = this.options?.features?.showPasswordToggleOnSignInPage ??\n        this.options?.['features.showPasswordToggleOnSignInPage'];\n      return customizedValue ?? defaultValue;\n    },\n    cache: true,\n  },\n  redirectUtilFn: {\n    deps: ['features.redirectByFormSubmit'],\n    fn: function(redirectByFormSubmit) {\n      return redirectByFormSubmit ? Util.redirectWithFormGet.bind(Util) : SharedUtil.redirect.bind(SharedUtil);\n    },\n    cache: true,\n  },\n  supportedLanguages: {\n    deps: ['i18n', 'language', 'assets.languages'],\n    fn: function(i18n, language, hostedLanguages) {\n      // By default, the language be automatically detected from the browser\n      // Developers can specify the language. It will be added to the supportedLanguages list.\n      // Developers can also provide a list of languages with hosted assets, these replace the default list\n      const supportedLanguages = hostedLanguages || config.supportedLanguages;\n      return _.union(\n        supportedLanguages, \n        _.keys(i18n), \n        _.isString(language) ? [language] : []\n      );\n    },\n    cache: true,\n  },\n  languageCode: {\n    deps: ['language', 'supportedLanguages'],\n    fn: function(language, supportedLanguages) {\n      const userLanguages = BrowserFeatures.getUserLanguages();\n\n      // TODO: revisit this fix - OKTA-491150\n      userLanguages.forEach((val, idx) => {\n        if (val === 'nl') {\n          userLanguages[idx] = 'nl-NL';\n        }\n        else if (val === 'pt') {\n          userLanguages[idx] = 'pt-BR';\n        }\n      });\n      \n      const preferred = _.clone(userLanguages);\n\n      const supportedLowerCase = Util.toLower(supportedLanguages);\n\n      // Any developer defined \"language\" takes highest priority:\n      // As a string, i.e. 'en', 'ja', 'zh-CN'\n      if (_.isString(language)) {\n        preferred.unshift(language);\n      } else if (_.isFunction(language)) {\n        // As a callback function, which is passed the list of supported\n        // languages and detected user languages. This function must return\n        // a languageCode, i.e. 'en', 'ja', 'zh-CN'\n        preferred.unshift(language(supportedLanguages, userLanguages));\n      }\n\n      // Add default language, and expand to include any language\n      // codes that do not include region, dialect, etc.\n      preferred.push(config.defaultLanguage);\n      const expanded = Util.toLower(Util.expandLanguages(preferred));\n\n      // Perform a case insensitive search - this is necessary in the case\n      // of browsers like Safari\n      let i;\n      let supportedPos;\n\n      for (i = 0; i < expanded.length; i++) {\n        supportedPos = supportedLowerCase.indexOf(expanded[i]);\n        if (supportedPos > -1) {\n          return supportedLanguages[supportedPos];\n        }\n      }\n    },\n  },\n  countryCode: {\n    deps: ['defaultCountryCode'],\n    fn: function(defaultCountryCode) {\n      const countries = CountryUtil.getCountries();\n      return Object.keys(countries).includes(defaultCountryCode)\n        ? defaultCountryCode : 'US';\n    },\n  },\n  mode: {\n    deps: ['useInteractionCodeFlow', 'codeChallenge'],\n    fn: function(useInteractionCodeFlow, codeChallenge) {\n      if (useInteractionCodeFlow && codeChallenge) {\n        return 'remediation';\n      }\n      return 'relying-party';\n    }\n  },\n  oauth2Enabled: {\n    deps: ['clientId', 'authScheme'],\n    fn: function(clientId, authScheme) {\n      return (!!clientId) && authScheme.toLowerCase() === 'oauth2';\n    },\n    cache: true,\n  },\n  oieEnabled: {\n    deps: ['stateToken', 'proxyIdxResponse', 'useInteractionCodeFlow'],\n    fn: function(stateToken, proxyIdxResponse, useInteractionCodeFlow) {\n      return stateToken || proxyIdxResponse || useInteractionCodeFlow;\n    },\n    cache: true,\n  },\n  // Redirect Uri to provide in the oauth API\n  oauthRedirectUri: {\n    deps: ['redirectUri'],\n    fn: function(redirectUri) {\n      if (redirectUri) {\n        return redirectUri;\n      }\n\n      let origin = window.location.origin;\n\n      // IE8\n      if (!origin) {\n        const href = window.location.href;\n        const path = window.location.pathname;\n\n        if (path !== '') {\n          origin = href.substring(0, href.lastIndexOf(path));\n        }\n      }\n\n      return encodeURI(origin);\n    },\n  },\n  // Adjusts the idps passed into the widget based on if they get explicit support\n  configuredSocialIdps: {\n    deps: ['idps'],\n    fn: function(idps) {\n      return _.map(idps, function(idpConfig) {\n        const idp = _.clone(idpConfig);\n\n        let type = idp.type && idp.type.toLowerCase();\n\n        if (!(type && _.contains(IDP.SUPPORTED_SOCIAL_IDPS, type))) {\n          type = 'general-idp';\n          idp.text = idp.text || '{ Please provide a text value }';\n        }\n\n        idp.className = [\n          'social-auth-button',\n          'social-auth-' + type + '-button ',\n          idp.className ? idp.className : '',\n        ].join(' ');\n        idp.dataAttr = 'social-auth-' + type + '-button';\n        idp.i18nKey = 'socialauth.' + type + '.label';\n        return idp;\n      });\n    },\n    cache: true,\n  },\n  // Can support piv authentication\n  hasPivCard: {\n    deps: ['piv'],\n    fn: function(piv) {\n      return piv && piv.certAuthUrl;\n    },\n    cache: true,\n  },\n  // social auth buttons order - 'above'/'below' the primary auth form (boolean)\n  socialAuthPositionTop: {\n    deps: ['configuredSocialIdps', 'hasPivCard', 'idpDisplay'],\n    fn: function(configuredSocialIdps, hasPivCard, idpDisplay) {\n      return (!_.isEmpty(configuredSocialIdps) || hasPivCard) && idpDisplay.toUpperCase() === 'PRIMARY';\n    },\n    cache: true,\n  },\n  hasConfiguredButtons: {\n    deps: ['configuredSocialIdps', 'customButtons', 'hasPivCard'],\n    fn: function(configuredSocialIdps, customButtons, hasPivCard) {\n      return !_.isEmpty(configuredSocialIdps) || !_.isEmpty(customButtons) || hasPivCard;\n    },\n    cache: true,\n  }\n};\n\ntype SettingsProps = typeof local & typeof derived;\n\nexport default class Settings extends Model {\n  authClient:OktaAuth;\n\n  get<A extends Backbone._StringKey<SettingsProps>>(attributeName: A): any {\n    return Model.prototype.get.call(this, attributeName);\n  }\n\n  preinitialize(...args) {\n    this.local = local;\n    this.derived = derived;\n    Model.prototype.preinitialize.apply(this, args);\n  }\n\n  initialize(options) {\n    const { colors } = options;\n    let { baseUrl } = options;\n    if (!baseUrl) {\n      // infer baseUrl from the issuer\n      const { authClient } = options;\n      if (authClient) {\n        baseUrl = authClient.getIssuerOrigin();\n      } else {\n        // issuer can be passed at top-level or in authParams\n        const { authParams } = options;\n        let { issuer } = options;\n        issuer = issuer || authParams?.issuer;\n        baseUrl = issuer?.split('/oauth2/')[0];\n      }\n      this.set('baseUrl', baseUrl);\n    }\n\n    if (!baseUrl) {\n      this.callGlobalError(new ConfigError(loc('error.required.baseUrl')));\n    } else if (colors && _.isString(colors.brand) && !colors.brand.match(/^#[0-9A-Fa-f]{6}$/)) {\n      this.callGlobalError(new ConfigError(loc('error.invalid.colors.brand')));\n    } else if (BrowserFeatures.corsIsNotSupported()) {\n      this.callGlobalError(new UnsupportedBrowserError(loc('error.unsupported.cors')));\n    }\n  }\n\n  setAcceptLanguageHeader(authClient) {\n    if (authClient) {\n      authClient.http.setRequestHeader('Accept-Language', this.get('languageCode'));\n    }\n  }\n\n  setAuthClient(authClient) {\n    this.setAcceptLanguageHeader(authClient);\n    this.authClient = authClient;\n  }\n\n  getAuthClient() {\n    return this.authClient;\n  }\n\n  set(...args: any[]) {\n    try {\n      return Model.prototype.set.apply(this, args);\n    } catch (e) {\n      const message = e.message ? e.message : e;\n\n      this.callGlobalError(new ConfigError(message));\n    }\n  }\n\n  // Invokes the global success function. This should only be called on a\n  // terminal part of the code (i.e. authStatus SUCCESS or after sending\n  // a recovery email)\n  callGlobalSuccess(status, data) {\n    const res = _.extend(data, { status: status });\n    // Defer this to ensure that our functions have rendered completely\n    // before invoking their function\n\n    _.defer(_.partial(this.get('globalSuccessFn'), res));\n  }\n\n  // Invokes the global error function. This should only be called on non\n  // recoverable errors (i.e. configuration errors, browser unsupported\n  // errors, etc)\n  callGlobalError(err) {\n    const globalErrorFn = this.get('globalErrorFn') || this.options.globalErrorFn;\n    // Note: Must use \"this.options.globalErrorFn\" when they've passed invalid\n    // arguments - globalErrorFn will not have been set yet\n\n    if (globalErrorFn) {\n      globalErrorFn(err);\n    } else {\n      // Only throw the error if they have not registered a globalErrorFn\n      throw err;\n    }\n  }\n\n  // Get the username by applying the transform function if it exists.\n  transformUsername(username, operation) {\n    const transformFn = this.get('transformUsername');\n\n    if (transformFn && _.isFunction(transformFn)) {\n      return transformFn(username, operation);\n    }\n    return username;\n  }\n\n  processCreds(creds) {\n    const processCreds = this.get('processCreds');\n\n    return Q.Promise(function(resolve) {\n      if (!_.isFunction(processCreds)) {\n        resolve();\n      } else if (processCreds.length === 2) {\n        processCreds(creds, resolve);\n      } else {\n        processCreds(creds);\n        resolve();\n      }\n    });\n  }\n\n  parseRegistrationSchema(schema, onSuccess, onFailure) {\n    const parseSchema = this.get('registration.parseSchema');\n\n    //check for parseSchema callback\n    if (_.isFunction(parseSchema)) {\n      parseSchema(\n        schema,\n        function(schema) {\n          onSuccess(schema);\n        },\n        function(error) {\n          error = error || { errorSummary: loc('registration.default.callbackhook.error') };\n          error['callback'] = 'parseSchema';\n          onFailure(error);\n        }\n      );\n    } else {\n      //no callback\n      onSuccess(schema);\n    }\n  }\n\n  preRegistrationSubmit(postData, onSuccess, onFailure) {\n    const preSubmit = this.get('registration.preSubmit');\n\n    //check for preSubmit callback\n    if (_.isFunction(preSubmit)) {\n      preSubmit(\n        postData,\n        function(postData) {\n          onSuccess(postData);\n        },\n        function(error) {\n          error = error || { errorSummary: loc('registration.default.callbackhook.error') };\n          error['callback'] = 'preSubmit';\n          onFailure(error);\n        }\n      );\n    } else {\n      //no callback\n      onSuccess(postData);\n    }\n  }\n\n  postRegistrationSubmit(response, onSuccess, onFailure) {\n    const postSubmit = this.get('registration.postSubmit');\n\n    //check for postSubmit callback\n    if (_.isFunction(postSubmit)) {\n      postSubmit(\n        response,\n        function(response) {\n          onSuccess(response);\n        },\n        function(error) {\n          error = error || { errorSummary: loc('registration.default.callbackhook.error') };\n          error['callback'] = 'postSubmit';\n          onFailure(error);\n        }\n      );\n    } else {\n      //no callback\n      onSuccess(response);\n    }\n  }\n\n  // Use the parse function to transform config options to the standard\n  // settings we currently support. This is a good place to deprecate old\n  // option formats.\n  parse(options) {\n    if (options.labels || options.country) {\n      Logger.deprecate('Use \"i18n\" instead of \"labels\" and \"country\"');\n      const overrides = options.labels || {};\n\n      _.each(options.country, function(val, key) {\n        overrides['country.' + key] = val;\n      });\n      // Old behavior is to treat the override as a global override, so we\n      // need to add these overrides to each language\n      options.i18n = {};\n      _.each(config.supportedLanguages, function(language) {\n        options.i18n[language] = overrides;\n      });\n      delete options.labels;\n      delete options.country;\n    }\n\n    // Default the assets.baseUrl to the cdn, or remove any trailing slashes\n    if (!options.assets) {\n      options.assets = {};\n    }\n    const abu = options.assets.baseUrl;\n\n    if (!abu) {\n      options.assets.baseUrl = assetBaseUrlTpl({ version: config.version });\n    } else if (abu[abu.length - 1] === '/') {\n      options.assets.baseUrl = abu.substring(0, abu.length - 1);\n    }\n\n    return options;\n  }\n\n  isDsTheme() {\n    return false;\n  }\n\n}\n"],"names":["SharedUtil","internal","util","Util","assetBaseUrlTpl","local","baseUrl","recoveryToken","undefined","stateToken","username","relayState","signOutLink","backToSignInLink","redirect","type","values","value","flow","transformUsername","globalSuccessFn","globalErrorFn","processCreds","hooks","logo","logoText","helpSupportNumber","proxyIdxResponse","overrideExistingStateToken","defaultCountryCode","language","i18n","_","identity","issuer","clientId","redirectUri","state","nonce","scopes","codeChallenge","codeChallengeMethod","oAuthTimeout","authScheme","idps","idpDisplay","customButtons","policyId","brandName","piv","otp","derived","backToSignInUri","deps","fn","showPasswordToggle","defaultValue","customizedValue","options","features","showPasswordToggleOnSignInPage","cache","redirectUtilFn","redirectByFormSubmit","redirectWithFormGet","bind","supportedLanguages","hostedLanguages","config","union","keys","isString","languageCode","userLanguages","BrowserFeatures","getUserLanguages","forEach","val","idx","preferred","clone","supportedLowerCase","toLower","unshift","isFunction","push","defaultLanguage","expanded","expandLanguages","i","supportedPos","length","indexOf","countryCode","countries","CountryUtil","getCountries","Object","includes","mode","useInteractionCodeFlow","oauth2Enabled","toLowerCase","oieEnabled","oauthRedirectUri","origin","window","location","href","path","pathname","substring","lastIndexOf","encodeURI","configuredSocialIdps","map","idpConfig","idp","contains","IDP","SUPPORTED_SOCIAL_IDPS","text","className","join","dataAttr","i18nKey","hasPivCard","certAuthUrl","socialAuthPositionTop","isEmpty","toUpperCase","hasConfiguredButtons","Settings","Model","authClient","get","attributeName","prototype","call","preinitialize","args","apply","initialize","colors","getIssuerOrigin","authParams","split","set","callGlobalError","ConfigError","loc","brand","match","corsIsNotSupported","UnsupportedBrowserError","setAcceptLanguageHeader","http","setRequestHeader","setAuthClient","getAuthClient","e","message","callGlobalSuccess","status","data","res","extend","defer","partial","err","operation","transformFn","creds","Q","Promise","resolve","parseRegistrationSchema","schema","onSuccess","onFailure","parseSchema","error","errorSummary","preRegistrationSubmit","postData","preSubmit","postRegistrationSubmit","response","postSubmit","parse","labels","country","Logger","deprecate","overrides","each","key","assets","abu","version","isDsTheme"],"mappings":"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"}
{"version":3,"file":"PushForm.js","sources":["../../../../../../src/v1/views/mfa-verify/PushForm.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { _, Form, loc, View } from 'okta';\nimport hbs from 'handlebars-inline-precompile';\nimport Util from 'util/Util';\nimport NumberChallengeView from './NumberChallengeView';\n\nconst titleTpl = hbs('{{factorName}} ({{{deviceName}}})');\n// deviceName is escaped on BaseForm (see BaseForm's template)\n\nconst WARNING_TIMEOUT = 30000; // milliseconds\nconst PushFormwarningTemplate = View.extend({\n  className: 'okta-form-infobox-warning infobox infobox-warning',\n  attributes: {\n    'aria-live': 'polite',\n  },\n  template: hbs`\n      <span class=\"icon warning-16\"></span>\n      <p>{{warning}}</p>\n    `,\n});\n\nexport default Form.extend({\n  className: 'mfa-verify-push',\n  autoSave: true,\n  noCancelButton: true,\n  save: _.partial(loc, 'oktaverify.send', 'login'),\n  scrollOnError: false,\n  layout: 'o-form-theme',\n  attributes: { 'data-se': 'factor-push' },\n  events: {\n    submit: 'submit',\n  },\n\n  initialize: function() {\n    this.enabled = true;\n    this.listenTo(this.options.appState, 'change:isMfaRejected', this.handleRejectStateChange);\n\n    this.numberChallengeView = this.add(NumberChallengeView).last();\n    this.listenTo(this.options.appState, 'change:isWaitingForNumberChallenge', function(\n      state,\n      isWaitingForNumberChallenge\n    ) {\n      if (isWaitingForNumberChallenge || this.options.appState.get('lastAuthResponse').status === 'SUCCESS') {\n        this.clearWarnings();\n        this.$el.find('.button').hide();\n        this.numberChallengeView.$el.show();\n      } else {\n        this.numberChallengeView.$el.hide();\n        this.$el.find('.button').show();\n      }\n    });\n    this.listenTo(this.options.appState, 'change:isMfaTimeout', function(state, isMfaTimeout) {\n      this.setSubmitState(isMfaTimeout);\n      if (isMfaTimeout) {\n        this.showError(loc('oktaverify.timeout', 'login'));\n      }\n    });\n    this.listenTo(this.options.appState, 'change:isMfaRequired', function(state, isMfaRequired) {\n      if (isMfaRequired) {\n        this.clearErrors();\n        this.clearWarnings();\n      }\n    });\n    this.title = titleTpl({\n      factorName: this.model.get('factorLabel'),\n      deviceName: this.model.get('deviceName'),\n    });\n  },\n  setSubmitState: function(ableToSubmit) {\n    const button = this.$el.find('.button');\n    const a11ySpan = this.$el.find('.accessibility-text');\n    this.enabled = ableToSubmit;\n    if (ableToSubmit) {\n      button.removeClass('link-button-disabled');\n      button.prop('value', loc('oktaverify.send', 'login'));\n      button.prop('disabled', false);\n      if (a11ySpan) {\n        a11ySpan.remove();\n      }\n    } else {\n      button.addClass('link-button-disabled');\n      button.prop('value', loc('oktaverify.sent', 'login'));\n      button.prop('disabled', true);\n      this.add(\n        `<span class='accessibility-text' role='alert'>${loc('oktaverify.sent', 'login')}</span>`,\n      );\n    }\n  },\n  submit: function(e) {\n    if (e !== undefined) {\n      e.preventDefault();\n    }\n    if (this.enabled) {\n      this.setSubmitState(false);\n      this.doSave();\n    }\n  },\n  postRender: function() {\n    const factorsPolicyInfo = this.options.appState.get('factorsPolicyInfo');\n    const id = this.model.get('id');\n    const isAutoPushEnabled = this.settings.get('features.autoPush') && factorsPolicyInfo && factorsPolicyInfo[id]\n      ? factorsPolicyInfo[id]['autoPushEnabled']\n      : false;\n\n    if (isAutoPushEnabled) {\n      this.model.set('autoPush', true);\n      // bind after $el has been rendered, and trigger push once DOM is fully loaded\n      _.defer(_.bind(this.submit, this));\n    }\n  },\n  doSave: function() {\n    let warningTimeout;\n\n    this.clearErrors();\n    this.clearWarnings();\n    if (this.model.isValid()) {\n      this.listenToOnce(this.model, 'error', function() {\n        this.setSubmitState(true);\n        this.clearWarnings();\n        clearTimeout(warningTimeout);\n      });\n      this.trigger('save', this.model);\n      warningTimeout = Util.callAfterTimeout(() => {\n        if (!this.options.appState.get('isWaitingForNumberChallenge')) {\n          this.showWarning(loc('oktaverify.warning', 'login'));\n        }\n      }, WARNING_TIMEOUT);\n    }\n  },\n  showError: function(msg) {\n    this.clearWarnings();\n    this.model.trigger('error', this.model, { responseJSON: { errorSummary: msg } });\n  },\n  showWarning: function(msg) {\n    this.clearWarnings();\n    this.add(PushFormwarningTemplate, '.o-form-error-container', { options: { warning: msg } });\n  },\n  clearWarnings: function() {\n    this.$('.okta-form-infobox-warning').remove();\n  },\n  handleRejectStateChange: function(state, isMfaRejected) {\n    if (isMfaRejected) {\n      this.setSubmitState(isMfaRejected);\n      this.setRejectedErrorMessage();\n    }\n  },\n  setRejectedErrorMessage: function() {\n    // If rejection is due to outdated app, show error message per platform\n    // else show user rejected message.\n    if (this.options.appState.get('lastAuthResponse').factorResultMessage === 'OKTA_VERIFY_UPGRADE_REQUIRED') {\n      if (this.options.appState.get('factor').profile.platform === 'IOS') {\n        this.showError(loc('oktaverify.rejected.upgradeRequired.ios', 'login'));\n      } else {\n        this.showError(loc('oktaverify.rejected.upgradeRequired.android', 'login'));\n      }\n    } else {\n      this.showError(loc('oktaverify.rejected', 'login'));\n    }\n  },\n});\n"],"names":["titleTpl","WARNING_TIMEOUT","PushFormwarningTemplate","View","extend","className","attributes","template","Form","autoSave","noCancelButton","save","_","partial","loc","scrollOnError","layout","events","submit","initialize","enabled","listenTo","options","appState","handleRejectStateChange","numberChallengeView","add","NumberChallengeView","last","state","isWaitingForNumberChallenge","get","status","clearWarnings","$el","find","hide","show","isMfaTimeout","setSubmitState","showError","isMfaRequired","clearErrors","title","factorName","model","deviceName","ableToSubmit","button","a11ySpan","removeClass","prop","remove","addClass","e","undefined","preventDefault","doSave","postRender","factorsPolicyInfo","id","isAutoPushEnabled","settings","set","defer","bind","warningTimeout","isValid","listenToOnce","clearTimeout","trigger","Util","callAfterTimeout","showWarning","msg","responseJSON","errorSummary","warning","$","isMfaRejected","setRejectedErrorMessage","factorResultMessage","profile","platform"],"mappings":";;;;;;;;;;;;;;;;;;;AAiBA,MAAMA,QAAQ,GAAA,YAAA,CAAA,QAAA,CAAA;AAAA,EAAA,UAAA,EAAA,CAAA,CAAA,EAAA,UAAA,CAAA;AAAA,EAAA,MAAA,EAAA,UAAA,SAAA,EAAA,MAAA,EAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA;AAAA,IAAA,IAAA,MAAA;AAAA,QAAA,MAAA;AAAA,QAAA,MAAA,GAAA,MAAA,IAAA,IAAA,GAAA,MAAA,GAAA,SAAA,CAAA,WAAA,IAAA,EAAA;AAAA,QAAA,MAAA,GAAA,SAAA,CAAA,KAAA,CAAA,aAAA;AAAA,QAAA,MAAA,GAAA,UAAA;AAAA,QAAA,cAAA,GAAA,SAAA,CAAA,cAAA,IAAA,UAAA,MAAA,EAAA,YAAA,EAAA;AAAA,MAAA,IAAA,MAAA,CAAA,SAAA,CAAA,cAAA,CAAA,IAAA,CAAA,MAAA,EAAA,YAAA,CAAA,EAAA;AAAA,QAAA,OAAA,MAAA,CAAA,YAAA,CAAA,CAAA;AAAA,OAAA;;AAAA,MAAA,OAAA,SAAA,CAAA;AAAA,KAAA,CAAA;;AAAA,IAAA,OAAA,SAAA,CAAA,gBAAA,EAAA,MAAA,GAAA,CAAA,MAAA,GAAA,cAAA,CAAA,OAAA,EAAA,YAAA,CAAA,KAAA,MAAA,IAAA,IAAA,GAAA,cAAA,CAAA,MAAA,EAAA,YAAA,CAAA,GAAA,MAAA,CAAA,KAAA,IAAA,GAAA,MAAA,GAAA,MAAA,EAAA,OAAA,MAAA,KAAA,MAAA,GAAA,MAAA,CAAA,IAAA,CAAA,MAAA,EAAA;AAAA,MAAA,MAAA,EAAA,YAAA;AAAA,MAAA,MAAA,EAAA,EAAA;AAAA,MAAA,MAAA,EAAA,IAAA;AAAA,MAAA,KAAA,EAAA;AAAA,QAAA,OAAA,EAAA;AAAA,UAAA,MAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,CAAA;AAAA,SAAA;AAAA,QAAA,KAAA,EAAA;AAAA,UAAA,MAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,EAAA;AAAA,SAAA;AAAA,OAAA;AAAA,KAAA,CAAA,GAAA,MAAA,EAAA,GAAA,IAAA,IAAA,CAAA,MAAA,IAAA,MAAA,GAAA,CAAA,MAAA,GAAA,cAAA,CAAA,OAAA,EAAA,YAAA,CAAA,KAAA,MAAA,IAAA,IAAA,GAAA,cAAA,CAAA,MAAA,EAAA,YAAA,CAAA,GAAA,MAAA,CAAA,KAAA,IAAA,GAAA,MAAA,GAAA,MAAA,EAAA,OAAA,MAAA,KAAA,MAAA,GAAA,MAAA,CAAA,IAAA,CAAA,MAAA,EAAA;AAAA,MAAA,MAAA,EAAA,YAAA;AAAA,MAAA,MAAA,EAAA,EAAA;AAAA,MAAA,MAAA,EAAA,IAAA;AAAA,MAAA,KAAA,EAAA;AAAA,QAAA,OAAA,EAAA;AAAA,UAAA,MAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,EAAA;AAAA,SAAA;AAAA,QAAA,KAAA,EAAA;AAAA,UAAA,MAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,EAAA;AAAA,SAAA;AAAA,OAAA;AAAA,KAAA,CAAA,GAAA,MAAA,CAAA,KAAA,IAAA,GAAA,MAAA,GAAA,EAAA,CAAA,GAAA,GAAA,CAAA;AAAA,GAAA;AAAA,EAAA,SAAA,EAAA,IAAA;AAAA,CAAA,CAAd;;;AAGA,MAAMC,eAAe,GAAG,KAAxB;;AACA,MAAMC,uBAAuB,GAAGC,IAAI,CAACC,MAAL,CAAY;AAC1CC,EAAAA,SAAS,EAAE,mDAD+B;AAE1CC,EAAAA,UAAU,EAAE;AACV,IAAa,WAAA,EAAA,QAAA;AADH,GAF8B;AAK1CC,EAAAA,QAAQ,EAAA,YAAA,CAAA,QAAA,CAAA;AAAA,IAAA,UAAA,EAAA,CAAA,CAAA,EAAA,UAAA,CAAA;AAAA,IAAA,MAAA,EAAA,UAAA,SAAA,EAAA,MAAA,EAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA;AAAA,MAAA,IAAA,MAAA;AAAA,UAAA,cAAA,GAAA,SAAA,CAAA,cAAA,IAAA,UAAA,MAAA,EAAA,YAAA,EAAA;AAAA,QAAA,IAAA,MAAA,CAAA,SAAA,CAAA,cAAA,CAAA,IAAA,CAAA,MAAA,EAAA,YAAA,CAAA,EAAA;AAAA,UAAA,OAAA,MAAA,CAAA,YAAA,CAAA,CAAA;AAAA,SAAA;;AAAA,QAAA,OAAA,SAAA,CAAA;AAAA,OAAA,CAAA;;AAAA,MAAA,OAAA,4CAAA,GAAA,SAAA,CAAA,gBAAA,EAAA,MAAA,GAAA,CAAA,MAAA,GAAA,cAAA,CAAA,OAAA,EAAA,SAAA,CAAA,KAAA,MAAA,IAAA,IAAA,GAAA,cAAA,CAAA,MAAA,EAAA,SAAA,CAAA,GAAA,MAAA,CAAA,KAAA,IAAA,GAAA,MAAA,GAAA,SAAA,CAAA,KAAA,CAAA,aAAA,EAAA,OAAA,MAAA,KAAA,UAAA,GAAA,MAAA,CAAA,IAAA,CAAA,MAAA,IAAA,IAAA,GAAA,MAAA,GAAA,SAAA,CAAA,WAAA,IAAA,EAAA,EAAA;AAAA,QAAA,MAAA,EAAA,SAAA;AAAA,QAAA,MAAA,EAAA,EAAA;AAAA,QAAA,MAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA;AAAA,UAAA,OAAA,EAAA;AAAA,YAAA,MAAA,EAAA,CAAA;AAAA,YAAA,QAAA,EAAA,EAAA;AAAA,WAAA;AAAA,UAAA,KAAA,EAAA;AAAA,YAAA,MAAA,EAAA,CAAA;AAAA,YAAA,QAAA,EAAA,EAAA;AAAA,WAAA;AAAA,SAAA;AAAA,OAAA,CAAA,GAAA,MAAA,EAAA,GAAA,MAAA,CAAA;AAAA,KAAA;AAAA,IAAA,SAAA,EAAA,IAAA;AAAA,GAAA,CAAA;AALkC,CAAZ,CAAhC,CAAA;AAWA,eAAeC,IAAI,CAACJ,MAAL,CAAY;AACzBC,EAAAA,SAAS,EAAE,iBADc;AAEzBI,EAAAA,QAAQ,EAAE,IAFe;AAGzBC,EAAAA,cAAc,EAAE,IAHS;AAIzBC,EAAAA,IAAI,EAAEC,cAAC,CAACC,OAAF,CAAUC,GAAV,EAAe,iBAAf,EAAkC,OAAlC,CAJmB;AAKzBC,EAAAA,aAAa,EAAE,KALU;AAMzBC,EAAAA,MAAM,EAAE,cANiB;AAOzBV,EAAAA,UAAU,EAAE;AAAE,IAAW,SAAA,EAAA,aAAA;AAAb,GAPa;AAQzBW,EAAAA,MAAM,EAAE;AACNC,IAAAA,MAAM,EAAE,QAAA;AADF,GARiB;AAYzBC,EAAAA,UAAU,EAAE,YAAW;AACrB,IAAKC,IAAAA,CAAAA,OAAL,GAAe,IAAf,CAAA;AACA,IAAKC,IAAAA,CAAAA,QAAL,CAAc,IAAA,CAAKC,OAAL,CAAaC,QAA3B,EAAqC,sBAArC,EAA6D,IAAA,CAAKC,uBAAlE,CAAA,CAAA;AAEA,IAAKC,IAAAA,CAAAA,mBAAL,GAA2B,IAAKC,CAAAA,GAAL,CAASC,mBAAT,CAAA,CAA8BC,IAA9B,EAA3B,CAAA;AACA,IAAA,IAAA,CAAKP,QAAL,CAAc,IAAKC,CAAAA,OAAL,CAAaC,QAA3B,EAAqC,oCAArC,EAA2E,UACzEM,KADyE,EAEzEC,2BAFyE,EAGzE;AACA,MAAA,IAAIA,2BAA2B,IAAI,IAAKR,CAAAA,OAAL,CAAaC,QAAb,CAAsBQ,GAAtB,CAA0B,kBAA1B,CAAA,CAA8CC,MAA9C,KAAyD,SAA5F,EAAuG;AACrG,QAAA,IAAA,CAAKC,aAAL,EAAA,CAAA;AACA,QAAA,IAAA,CAAKC,GAAL,CAASC,IAAT,CAAc,SAAd,EAAyBC,IAAzB,EAAA,CAAA;AACA,QAAA,IAAA,CAAKX,mBAAL,CAAyBS,GAAzB,CAA6BG,IAA7B,EAAA,CAAA;AACD,OAJD,MAIO;AACL,QAAA,IAAA,CAAKZ,mBAAL,CAAyBS,GAAzB,CAA6BE,IAA7B,EAAA,CAAA;AACA,QAAA,IAAA,CAAKF,GAAL,CAASC,IAAT,CAAc,SAAd,EAAyBE,IAAzB,EAAA,CAAA;AACD,OAAA;AACF,KAZD,CAAA,CAAA;AAaA,IAAA,IAAA,CAAKhB,QAAL,CAAc,IAAKC,CAAAA,OAAL,CAAaC,QAA3B,EAAqC,qBAArC,EAA4D,UAASM,KAAT,EAAgBS,YAAhB,EAA8B;AACxF,MAAKC,IAAAA,CAAAA,cAAL,CAAoBD,YAApB,CAAA,CAAA;;AACA,MAAA,IAAIA,YAAJ,EAAkB;AAChB,QAAA,IAAA,CAAKE,SAAL,CAAe1B,GAAG,CAAC,oBAAD,EAAuB,OAAvB,CAAlB,CAAA,CAAA;AACD,OAAA;AACF,KALD,CAAA,CAAA;AAMA,IAAA,IAAA,CAAKO,QAAL,CAAc,IAAKC,CAAAA,OAAL,CAAaC,QAA3B,EAAqC,sBAArC,EAA6D,UAASM,KAAT,EAAgBY,aAAhB,EAA+B;AAC1F,MAAA,IAAIA,aAAJ,EAAmB;AACjB,QAAA,IAAA,CAAKC,WAAL,EAAA,CAAA;AACA,QAAA,IAAA,CAAKT,aAAL,EAAA,CAAA;AACD,OAAA;AACF,KALD,CAAA,CAAA;AAMA,IAAKU,IAAAA,CAAAA,KAAL,GAAa3C,QAAQ,CAAC;AACpB4C,MAAAA,UAAU,EAAE,IAAKC,CAAAA,KAAL,CAAWd,GAAX,CAAe,aAAf,CADQ;AAEpBe,MAAAA,UAAU,EAAE,IAAA,CAAKD,KAAL,CAAWd,GAAX,CAAe,YAAf,CAAA;AAFQ,KAAD,CAArB,CAAA;AAID,GA9CwB;AA+CzBQ,EAAAA,cAAc,EAAE,UAASQ,YAAT,EAAuB;AACrC,IAAMC,MAAAA,MAAM,GAAG,IAAKd,CAAAA,GAAL,CAASC,IAAT,CAAc,SAAd,CAAf,CAAA;AACA,IAAMc,MAAAA,QAAQ,GAAG,IAAKf,CAAAA,GAAL,CAASC,IAAT,CAAc,qBAAd,CAAjB,CAAA;AACA,IAAKf,IAAAA,CAAAA,OAAL,GAAe2B,YAAf,CAAA;;AACA,IAAA,IAAIA,YAAJ,EAAkB;AAChBC,MAAAA,MAAM,CAACE,WAAP,CAAmB,sBAAnB,CAAA,CAAA;AACAF,MAAAA,MAAM,CAACG,IAAP,CAAY,OAAZ,EAAqBrC,GAAG,CAAC,iBAAD,EAAoB,OAApB,CAAxB,CAAA,CAAA;AACAkC,MAAAA,MAAM,CAACG,IAAP,CAAY,UAAZ,EAAwB,KAAxB,CAAA,CAAA;;AACA,MAAA,IAAIF,QAAJ,EAAc;AACZA,QAAAA,QAAQ,CAACG,MAAT,EAAA,CAAA;AACD,OAAA;AACF,KAPD,MAOO;AACLJ,MAAAA,MAAM,CAACK,QAAP,CAAgB,sBAAhB,CAAA,CAAA;AACAL,MAAAA,MAAM,CAACG,IAAP,CAAY,OAAZ,EAAqBrC,GAAG,CAAC,iBAAD,EAAoB,OAApB,CAAxB,CAAA,CAAA;AACAkC,MAAAA,MAAM,CAACG,IAAP,CAAY,UAAZ,EAAwB,IAAxB,CAAA,CAAA;AACA,MAAKzB,IAAAA,CAAAA,GAAL,CACG,CAAgDZ,8CAAAA,EAAAA,GAAG,CAAC,iBAAD,EAAoB,OAApB,CAA6B,CADnF,OAAA,CAAA,CAAA,CAAA;AAGD,KAAA;AACF,GAlEwB;AAmEzBI,EAAAA,MAAM,EAAE,UAASoC,CAAT,EAAY;AAClB,IAAIA,IAAAA,CAAC,KAAKC,SAAV,EAAqB;AACnBD,MAAAA,CAAC,CAACE,cAAF,EAAA,CAAA;AACD,KAAA;;AACD,IAAI,IAAA,IAAA,CAAKpC,OAAT,EAAkB;AAChB,MAAKmB,IAAAA,CAAAA,cAAL,CAAoB,KAApB,CAAA,CAAA;AACA,MAAA,IAAA,CAAKkB,MAAL,EAAA,CAAA;AACD,KAAA;AACF,GA3EwB;AA4EzBC,EAAAA,UAAU,EAAE,YAAW;AACrB,IAAMC,MAAAA,iBAAiB,GAAG,IAAA,CAAKrC,OAAL,CAAaC,QAAb,CAAsBQ,GAAtB,CAA0B,mBAA1B,CAA1B,CAAA;AACA,IAAM6B,MAAAA,EAAE,GAAG,IAAKf,CAAAA,KAAL,CAAWd,GAAX,CAAe,IAAf,CAAX,CAAA;AACA,IAAM8B,MAAAA,iBAAiB,GAAG,IAAA,CAAKC,QAAL,CAAc/B,GAAd,CAAkB,mBAAlB,CAA0C4B,IAAAA,iBAA1C,IAA+DA,iBAAiB,CAACC,EAAD,CAAhF,GACtBD,iBAAiB,CAACC,EAAD,CAAjB,CAAsB,iBAAtB,CADsB,GAEtB,KAFJ,CAAA;;AAIA,IAAA,IAAIC,iBAAJ,EAAuB;AACrB,MAAKhB,IAAAA,CAAAA,KAAL,CAAWkB,GAAX,CAAe,UAAf,EAA2B,IAA3B,EADqB;;AAGrBnD,MAAAA,cAAC,CAACoD,KAAF,CAAQpD,cAAC,CAACqD,IAAF,CAAO,IAAK/C,CAAAA,MAAZ,EAAoB,IAApB,CAAR,CAAA,CAAA;AACD,KAAA;AACF,GAxFwB;AAyFzBuC,EAAAA,MAAM,EAAE,YAAW;AACjB,IAAA,IAAIS,cAAJ,CAAA;AAEA,IAAA,IAAA,CAAKxB,WAAL,EAAA,CAAA;AACA,IAAA,IAAA,CAAKT,aAAL,EAAA,CAAA;;AACA,IAAA,IAAI,IAAKY,CAAAA,KAAL,CAAWsB,OAAX,EAAJ,EAA0B;AACxB,MAAA,IAAA,CAAKC,YAAL,CAAkB,IAAA,CAAKvB,KAAvB,EAA8B,OAA9B,EAAuC,YAAW;AAChD,QAAKN,IAAAA,CAAAA,cAAL,CAAoB,IAApB,CAAA,CAAA;AACA,QAAA,IAAA,CAAKN,aAAL,EAAA,CAAA;AACAoC,QAAAA,YAAY,CAACH,cAAD,CAAZ,CAAA;AACD,OAJD,CAAA,CAAA;AAKA,MAAA,IAAA,CAAKI,OAAL,CAAa,MAAb,EAAqB,KAAKzB,KAA1B,CAAA,CAAA;AACAqB,MAAAA,cAAc,GAAGK,IAAI,CAACC,gBAAL,CAAsB,MAAM;AAC3C,QAAI,IAAA,CAAC,IAAKlD,CAAAA,OAAL,CAAaC,QAAb,CAAsBQ,GAAtB,CAA0B,6BAA1B,CAAL,EAA+D;AAC7D,UAAA,IAAA,CAAK0C,WAAL,CAAiB3D,GAAG,CAAC,oBAAD,EAAuB,OAAvB,CAApB,CAAA,CAAA;AACD,SAAA;AACF,OAJgB,EAIdb,eAJc,CAAjB,CAAA;AAKD,KAAA;AACF,GA3GwB;AA4GzBuC,EAAAA,SAAS,EAAE,UAASkC,GAAT,EAAc;AACvB,IAAA,IAAA,CAAKzC,aAAL,EAAA,CAAA;AACA,IAAKY,IAAAA,CAAAA,KAAL,CAAWyB,OAAX,CAAmB,OAAnB,EAA4B,IAAA,CAAKzB,KAAjC,EAAwC;AAAE8B,MAAAA,YAAY,EAAE;AAAEC,QAAAA,YAAY,EAAEF,GAAAA;AAAhB,OAAA;AAAhB,KAAxC,CAAA,CAAA;AACD,GA/GwB;AAgHzBD,EAAAA,WAAW,EAAE,UAASC,GAAT,EAAc;AACzB,IAAA,IAAA,CAAKzC,aAAL,EAAA,CAAA;AACA,IAAA,IAAA,CAAKP,GAAL,CAASxB,uBAAT,EAAkC,yBAAlC,EAA6D;AAAEoB,MAAAA,OAAO,EAAE;AAAEuD,QAAAA,OAAO,EAAEH,GAAAA;AAAX,OAAA;AAAX,KAA7D,CAAA,CAAA;AACD,GAnHwB;AAoHzBzC,EAAAA,aAAa,EAAE,YAAW;AACxB,IAAA,IAAA,CAAK6C,CAAL,CAAO,4BAAP,CAAA,CAAqC1B,MAArC,EAAA,CAAA;AACD,GAtHwB;AAuHzB5B,EAAAA,uBAAuB,EAAE,UAASK,KAAT,EAAgBkD,aAAhB,EAA+B;AACtD,IAAA,IAAIA,aAAJ,EAAmB;AACjB,MAAKxC,IAAAA,CAAAA,cAAL,CAAoBwC,aAApB,CAAA,CAAA;AACA,MAAA,IAAA,CAAKC,uBAAL,EAAA,CAAA;AACD,KAAA;AACF,GA5HwB;AA6HzBA,EAAAA,uBAAuB,EAAE,YAAW;AAClC;AACA;AACA,IAAA,IAAI,IAAK1D,CAAAA,OAAL,CAAaC,QAAb,CAAsBQ,GAAtB,CAA0B,kBAA1B,CAA8CkD,CAAAA,mBAA9C,KAAsE,8BAA1E,EAA0G;AACxG,MAAA,IAAI,IAAK3D,CAAAA,OAAL,CAAaC,QAAb,CAAsBQ,GAAtB,CAA0B,QAA1B,CAAA,CAAoCmD,OAApC,CAA4CC,QAA5C,KAAyD,KAA7D,EAAoE;AAClE,QAAA,IAAA,CAAK3C,SAAL,CAAe1B,GAAG,CAAC,yCAAD,EAA4C,OAA5C,CAAlB,CAAA,CAAA;AACD,OAFD,MAEO;AACL,QAAA,IAAA,CAAK0B,SAAL,CAAe1B,GAAG,CAAC,6CAAD,EAAgD,OAAhD,CAAlB,CAAA,CAAA;AACD,OAAA;AACF,KAND,MAMO;AACL,MAAA,IAAA,CAAK0B,SAAL,CAAe1B,GAAG,CAAC,qBAAD,EAAwB,OAAxB,CAAlB,CAAA,CAAA;AACD,KAAA;AACF,GAAA;AAzIwB,CAAZ,CAAf;;;;"}
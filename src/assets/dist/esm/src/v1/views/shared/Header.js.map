{"version":3,"file":"Header.js","sources":["../../../../../../src/v1/views/shared/Header.ts"],"sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { View } from 'okta';\nimport hbs from 'handlebars-inline-precompile';\nimport Animations from 'util/Animations';\nimport LoadingBeacon from 'v1/views/shared/LoadingBeacon';\nconst NO_BEACON_CLS = 'no-beacon';\nconst LOADING_BEACON_CLS = 'beacon-small beacon-loading';\n\nfunction isLoadingBeacon(beacon) {\n  return beacon && beacon.equals(LoadingBeacon);\n}\n\nfunction removeBeacon(view) {\n  // There are some timing issues with removing beacons (i.e. the case of\n  // transitioning from loadingBeacon -> loadingBeacon)\n  if (!view.currentBeacon) {\n    return;\n  }\n  view.currentBeacon.remove();\n  view.currentBeacon = null;\n}\n\nfunction addBeacon(view, NextBeacon, selector, options) {\n  view.add(NextBeacon, {\n    selector: selector,\n    options: options,\n  });\n  view.currentBeacon = view.first();\n}\n\nfunction typeOfTransition(currentBeacon, NextBeacon, options) {\n  if (!currentBeacon && !NextBeacon) {\n    return 'none';\n  }\n  // Show Loading beacon\n  if (!currentBeacon && options.loading) {\n    return 'load';\n  }\n  // Swap/Hide Loading beacon\n  if (currentBeacon && isLoadingBeacon(currentBeacon)) {\n    return NextBeacon ? 'swap' : 'unload';\n  }\n  if (currentBeacon && currentBeacon.equals(NextBeacon, options)) {\n    return 'same';\n  }\n  if (!currentBeacon && NextBeacon) {\n    return 'add';\n  }\n  if (currentBeacon && !NextBeacon) {\n    return 'remove';\n  }\n  if (currentBeacon instanceof NextBeacon) {\n    return 'fade';\n  }\n  // If none of the above\n  // then we are changing the type of beacon\n  // ex. from SecurityBeacon to FactorBeacon\n  return 'swap';\n}\n\nexport default class Header extends View {\n  currentBeacon;\n  \n  preinitialize(...args) {\n    this.currentBeacon = null;\n    /* eslint-disable @okta/okta/no-unlocalized-text-in-templates */\n    this.template = hbs(\n      '\\\n        <div class=\"okta-sign-in-header auth-header\">\\\n          {{#if logo}}\\\n          <h1><img src=\"{{logo}}\" class=\"auth-org-logo\" alt=\"{{logoText}} logo\" aria-label=\"{{logoText}} logo\"></h1>\\\n          {{/if}}\\\n          <div data-type=\"beacon-container\" class=\"beacon-container\"></div>\\\n        </div>\\\n        <div class=\"auth-content\"><div class=\"auth-content-inner\"></div></div>\\\n      '\n    );\n    /* eslint-enable @okta/okta/no-unlocalized-text-in-templates */\n    View.prototype.preinitialize.apply(this, args);\n  }\n\n\n  // Attach a 'no-beacon' class if the security image feature\n  // is not passed in to prevent the beacon from jumping.\n  initialize(options) {\n    if (!options.settings.get('features.securityImage')) {\n      this.$el.addClass(NO_BEACON_CLS);\n      // To show/hide the spinner when there is no security image,\n      // listen to the appState's loading/removeLoading events.\n      this.listenTo(options.appState, 'loading', this.setLoadingBeacon);\n      this.listenTo(options.appState, 'removeLoading', this.removeLoadingBeacon);\n    }\n  }\n\n  /* eslint complexity: 0 */\n  setBeacon(NextBeacon, options) {\n    const selector = '[data-type=\"beacon-container\"]';\n    const container = this.$(selector);\n    const transition = typeOfTransition(this.currentBeacon, NextBeacon, options);\n\n    switch (transition) {\n    case 'none':\n      this.$el.addClass(NO_BEACON_CLS);\n      return;\n    case 'same':\n      return;\n    case 'add':\n      this.$el.removeClass(NO_BEACON_CLS);\n      addBeacon(this, NextBeacon, selector, options);\n      return Animations.explode(container);\n    case 'remove':\n      this.$el.addClass(NO_BEACON_CLS);\n      return Animations.implode(container)\n        .then(() => {\n          removeBeacon(this);\n        })\n        .done(); // TODO: can this be removed if Animations.implode returns standard ES6 Promise?\n    case 'fade':\n      // Other transitions are performed on the beacon container,\n      // but this transition is on the content inside the beacon.\n      // For a SecurityBeacon the username change will update the\n      // AppState and trigger an transition to a new Becon\n      // Since there is no url change this method is not called.\n      // For a FactorBeacon a page refresh has occurred\n      // so we execute the beacon's own transition method.\n      if (!this.currentBeacon.fadeOut) {\n        throw new Error('The current beacon is missing the \"fadeOut\" method');\n      }\n      options.animate = true;\n      return this.currentBeacon\n        .fadeOut()\n        .then(() => {\n          removeBeacon(this);\n          addBeacon(this, NextBeacon, selector, options);\n        })\n        .done(); // TODO: can this be removed if fadeOut returns standard ES6 Promise?\n    case 'swap':\n      return Animations.swapBeacons({\n        $el: container,\n        swap: () => {\n          const isLoading = isLoadingBeacon(this.currentBeacon);\n\n          // Order of these calls is important for -\n          // loader --> security/factor beacon swap.\n          removeBeacon(this);\n          if (isLoading) {\n            container.removeClass(LOADING_BEACON_CLS);\n            this.$el.removeClass(NO_BEACON_CLS);\n          }\n          addBeacon(this, NextBeacon, selector, options);\n        },\n      }).done(); // TODO: can this be removed if Animations.swapBeacons returns standard ES6 Promise?\n    case 'load':\n      // Show the loading beacon. Add a couple of classes\n      // before triggering the add beacon code.\n      container.addClass(LOADING_BEACON_CLS);\n      addBeacon(this, NextBeacon, selector, options);\n      return Animations.explode(container);\n    case 'unload':\n      // Hide the loading beacon.\n      return this.removeLoadingBeacon();\n    default:\n      throw new Error('the \"' + transition + '\" is not recognized');\n    }\n  }\n\n  // Show the loading beacon when the security image feature is not enabled.\n  setLoadingBeacon(isLoading) {\n    if (!isLoading || isLoadingBeacon(this.currentBeacon)) {\n      return;\n    }\n    this.setBeacon(LoadingBeacon, { loading: true });\n  }\n\n  // Hide the beacon on primary auth failure. On primary auth success, setBeacon does this job.\n  removeLoadingBeacon() {\n    const container = this.$('[data-type=\"beacon-container\"]');\n\n    return Animations.implode(container)\n      .then(() => {\n        removeBeacon(this);\n        container.removeClass(LOADING_BEACON_CLS);\n      })\n      .done(); // TODO: can this be removed if Animations.implode returns standard ES6 Promise?\n  }\n\n  getTemplateData() {\n    return this.settings.toJSON({ verbose: true });\n  }\n\n  getContentEl() {\n    return this.$('.auth-content-inner');\n  }\n}\n"],"names":["NO_BEACON_CLS","LOADING_BEACON_CLS","isLoadingBeacon","beacon","equals","LoadingBeacon","removeBeacon","view","currentBeacon","remove","addBeacon","NextBeacon","selector","options","add","first","typeOfTransition","loading","Header","View","preinitialize","args","template","prototype","apply","initialize","settings","get","$el","addClass","listenTo","appState","setLoadingBeacon","removeLoadingBeacon","setBeacon","container","$","transition","removeClass","Animations","explode","implode","then","done","fadeOut","Error","animate","swapBeacons","swap","isLoading","getTemplateData","toJSON","verbose","getContentEl"],"mappings":";;;;;;;;;;;;;;;;;;;AAgBA,MAAMA,aAAa,GAAG,WAAtB,CAAA;AACA,MAAMC,kBAAkB,GAAG,6BAA3B,CAAA;;AAEA,SAASC,eAAT,CAAyBC,MAAzB,EAAiC;AAC/B,EAAA,OAAOA,MAAM,IAAIA,MAAM,CAACC,MAAP,CAAcC,aAAd,CAAjB,CAAA;AACD,CAAA;;AAED,SAASC,YAAT,CAAsBC,IAAtB,EAA4B;AAC1B;AACA;AACA,EAAA,IAAI,CAACA,IAAI,CAACC,aAAV,EAAyB;AACvB,IAAA,OAAA;AACD,GAAA;;AACDD,EAAAA,IAAI,CAACC,aAAL,CAAmBC,MAAnB,EAAA,CAAA;AACAF,EAAAA,IAAI,CAACC,aAAL,GAAqB,IAArB,CAAA;AACD,CAAA;;AAED,SAASE,SAAT,CAAmBH,IAAnB,EAAyBI,UAAzB,EAAqCC,QAArC,EAA+CC,OAA/C,EAAwD;AACtDN,EAAAA,IAAI,CAACO,GAAL,CAASH,UAAT,EAAqB;AACnBC,IAAAA,QAAQ,EAAEA,QADS;AAEnBC,IAAAA,OAAO,EAAEA,OAAAA;AAFU,GAArB,CAAA,CAAA;AAIAN,EAAAA,IAAI,CAACC,aAAL,GAAqBD,IAAI,CAACQ,KAAL,EAArB,CAAA;AACD,CAAA;;AAED,SAASC,gBAAT,CAA0BR,aAA1B,EAAyCG,UAAzC,EAAqDE,OAArD,EAA8D;AAC5D,EAAA,IAAI,CAACL,aAAD,IAAkB,CAACG,UAAvB,EAAmC;AACjC,IAAA,OAAO,MAAP,CAAA;AACD,GAH2D;;;AAK5D,EAAA,IAAI,CAACH,aAAD,IAAkBK,OAAO,CAACI,OAA9B,EAAuC;AACrC,IAAA,OAAO,MAAP,CAAA;AACD,GAP2D;;;AAS5D,EAAA,IAAIT,aAAa,IAAIN,eAAe,CAACM,aAAD,CAApC,EAAqD;AACnD,IAAA,OAAOG,UAAU,GAAG,MAAH,GAAY,QAA7B,CAAA;AACD,GAAA;;AACD,EAAIH,IAAAA,aAAa,IAAIA,aAAa,CAACJ,MAAd,CAAqBO,UAArB,EAAiCE,OAAjC,CAArB,EAAgE;AAC9D,IAAA,OAAO,MAAP,CAAA;AACD,GAAA;;AACD,EAAA,IAAI,CAACL,aAAD,IAAkBG,UAAtB,EAAkC;AAChC,IAAA,OAAO,KAAP,CAAA;AACD,GAAA;;AACD,EAAA,IAAIH,aAAa,IAAI,CAACG,UAAtB,EAAkC;AAChC,IAAA,OAAO,QAAP,CAAA;AACD,GAAA;;AACD,EAAIH,IAAAA,aAAa,YAAYG,UAA7B,EAAyC;AACvC,IAAA,OAAO,MAAP,CAAA;AACD,GAvB2D;AAyB5D;AACA;;;AACA,EAAA,OAAO,MAAP,CAAA;AACD,CAAA;;AAEc,MAAMO,MAAN,SAAqBC,IAArB,CAA0B;AAAA,EAAA,WAAA,CAAA,GAAA,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAA,IAAA,CAAA,CAAA;AAAA,IAAA,IAAA,CACvCX,aADuC,GAAA,KAAA,CAAA,CAAA;AAAA,GAAA;;AAGvCY,EAAAA,aAAa,CAAC,GAAGC,IAAJ,EAAU;AACrB,IAAKb,IAAAA,CAAAA,aAAL,GAAqB,IAArB,CAAA;AACA;;AACA,IAAA,IAAA,CAAKc,QAAL,GAAA,YAAA,CAAA,QAAA,CAAA;AAAA,MAAA,GAAA,EAAA,UAAA,SAAA,EAAA,MAAA,EAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA;AAAA,QAAA,IAAA,MAAA;AAAA,YAAA,MAAA,GAAA,MAAA,IAAA,IAAA,GAAA,MAAA,GAAA,SAAA,CAAA,WAAA,IAAA,EAAA;AAAA,YAAA,MAAA,GAAA,SAAA,CAAA,KAAA,CAAA,aAAA;AAAA,YAAA,MAAA,GAAA,UAAA;AAAA,YAAA,MAAA,GAAA,SAAA,CAAA,gBAAA;AAAA,YAAA,cAAA,GAAA,SAAA,CAAA,cAAA,IAAA,UAAA,MAAA,EAAA,YAAA,EAAA;AAAA,UAAA,IAAA,MAAA,CAAA,SAAA,CAAA,cAAA,CAAA,IAAA,CAAA,MAAA,EAAA,YAAA,CAAA,EAAA;AAAA,YAAA,OAAA,MAAA,CAAA,YAAA,CAAA,CAAA;AAAA,WAAA;;AAAA,UAAA,OAAA,SAAA,CAAA;AAAA,SAAA,CAAA;;AAAA,QAAA,OAAA,iBAAA,GAAA,MAAA,EAAA,MAAA,GAAA,CAAA,MAAA,GAAA,cAAA,CAAA,OAAA,EAAA,MAAA,CAAA,KAAA,MAAA,IAAA,IAAA,GAAA,cAAA,CAAA,MAAA,EAAA,MAAA,CAAA,GAAA,MAAA,CAAA,KAAA,IAAA,GAAA,MAAA,GAAA,MAAA,EAAA,OAAA,MAAA,KAAA,MAAA,GAAA,MAAA,CAAA,IAAA,CAAA,MAAA,EAAA;AAAA,UAAA,MAAA,EAAA,MAAA;AAAA,UAAA,MAAA,EAAA,EAAA;AAAA,UAAA,MAAA,EAAA,IAAA;AAAA,UAAA,KAAA,EAAA;AAAA,YAAA,OAAA,EAAA;AAAA,cAAA,MAAA,EAAA,CAAA;AAAA,cAAA,QAAA,EAAA,EAAA;AAAA,aAAA;AAAA,YAAA,KAAA,EAAA;AAAA,cAAA,MAAA,EAAA,CAAA;AAAA,cAAA,QAAA,EAAA,EAAA;AAAA,aAAA;AAAA,WAAA;AAAA,SAAA,CAAA,GAAA,MAAA,EAAA,GAAA,mCAAA,GAAA,MAAA,EAAA,MAAA,GAAA,CAAA,MAAA,GAAA,cAAA,CAAA,OAAA,EAAA,UAAA,CAAA,KAAA,MAAA,IAAA,IAAA,GAAA,cAAA,CAAA,MAAA,EAAA,UAAA,CAAA,GAAA,MAAA,CAAA,KAAA,IAAA,GAAA,MAAA,GAAA,MAAA,EAAA,OAAA,MAAA,KAAA,MAAA,GAAA,MAAA,CAAA,IAAA,CAAA,MAAA,EAAA;AAAA,UAAA,MAAA,EAAA,UAAA;AAAA,UAAA,MAAA,EAAA,EAAA;AAAA,UAAA,MAAA,EAAA,IAAA;AAAA,UAAA,KAAA,EAAA;AAAA,YAAA,OAAA,EAAA;AAAA,cAAA,MAAA,EAAA,CAAA;AAAA,cAAA,QAAA,EAAA,GAAA;AAAA,aAAA;AAAA,YAAA,KAAA,EAAA;AAAA,cAAA,MAAA,EAAA,CAAA;AAAA,cAAA,QAAA,EAAA,GAAA;AAAA,aAAA;AAAA,WAAA;AAAA,SAAA,CAAA,GAAA,MAAA,EAAA,GAAA,uBAAA,GAAA,MAAA,EAAA,MAAA,GAAA,CAAA,MAAA,GAAA,cAAA,CAAA,OAAA,EAAA,UAAA,CAAA,KAAA,MAAA,IAAA,IAAA,GAAA,cAAA,CAAA,MAAA,EAAA,UAAA,CAAA,GAAA,MAAA,CAAA,KAAA,IAAA,GAAA,MAAA,GAAA,MAAA,EAAA,OAAA,MAAA,KAAA,MAAA,GAAA,MAAA,CAAA,IAAA,CAAA,MAAA,EAAA;AAAA,UAAA,MAAA,EAAA,UAAA;AAAA,UAAA,MAAA,EAAA,EAAA;AAAA,UAAA,MAAA,EAAA,IAAA;AAAA,UAAA,KAAA,EAAA;AAAA,YAAA,OAAA,EAAA;AAAA,cAAA,MAAA,EAAA,CAAA;AAAA,cAAA,QAAA,EAAA,GAAA;AAAA,aAAA;AAAA,YAAA,KAAA,EAAA;AAAA,cAAA,MAAA,EAAA,CAAA;AAAA,cAAA,QAAA,EAAA,GAAA;AAAA,aAAA;AAAA,WAAA;AAAA,SAAA,CAAA,GAAA,MAAA,EAAA,GAAA,eAAA,CAAA;AAAA,OAAA;AAAA,MAAA,UAAA,EAAA,CAAA,CAAA,EAAA,UAAA,CAAA;AAAA,MAAA,MAAA,EAAA,UAAA,SAAA,EAAA,MAAA,EAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA;AAAA,QAAA,IAAA,MAAA;AAAA,YAAA,cAAA,GAAA,SAAA,CAAA,cAAA,IAAA,UAAA,MAAA,EAAA,YAAA,EAAA;AAAA,UAAA,IAAA,MAAA,CAAA,SAAA,CAAA,cAAA,CAAA,IAAA,CAAA,MAAA,EAAA,YAAA,CAAA,EAAA;AAAA,YAAA,OAAA,MAAA,CAAA,YAAA,CAAA,CAAA;AAAA,WAAA;;AAAA,UAAA,OAAA,SAAA,CAAA;AAAA,SAAA,CAAA;;AAAA,QAAA,OAAA,iDAAA,IAAA,CAAA,MAAA,GAAA,cAAA,CAAA,OAAA,EAAA,IAAA,CAAA,CAAA,IAAA,CAAA,MAAA,IAAA,IAAA,GAAA,MAAA,GAAA,SAAA,CAAA,WAAA,IAAA,EAAA,EAAA,MAAA,IAAA,IAAA,GAAA,cAAA,CAAA,MAAA,EAAA,MAAA,CAAA,GAAA,MAAA,EAAA;AAAA,UAAA,MAAA,EAAA,IAAA;AAAA,UAAA,MAAA,EAAA,EAAA;AAAA,UAAA,IAAA,EAAA,SAAA,CAAA,OAAA,CAAA,CAAA,EAAA,IAAA,EAAA,CAAA,CAAA;AAAA,UAAA,SAAA,EAAA,SAAA,CAAA,IAAA;AAAA,UAAA,MAAA,EAAA,IAAA;AAAA,UAAA,KAAA,EAAA;AAAA,YAAA,OAAA,EAAA;AAAA,cAAA,MAAA,EAAA,CAAA;AAAA,cAAA,QAAA,EAAA,EAAA;AAAA,aAAA;AAAA,YAAA,KAAA,EAAA;AAAA,cAAA,MAAA,EAAA,CAAA;AAAA,cAAA,QAAA,EAAA,GAAA;AAAA,aAAA;AAAA,WAAA;AAAA,SAAA,CAAA,KAAA,IAAA,GAAA,MAAA,GAAA,EAAA,CAAA,GAAA,uJAAA,CAAA;AAAA,OAAA;AAAA,MAAA,SAAA,EAAA,IAAA;AAAA,KAAA,CAAA,CAAA;AAWA;;AACAH,IAAAA,IAAI,CAACI,SAAL,CAAeH,aAAf,CAA6BI,KAA7B,CAAmC,IAAnC,EAAyCH,IAAzC,CAAA,CAAA;AACD,GAnBsC;AAuBvC;;;AACAI,EAAAA,UAAU,CAACZ,OAAD,EAAU;AAClB,IAAI,IAAA,CAACA,OAAO,CAACa,QAAR,CAAiBC,GAAjB,CAAqB,wBAArB,CAAL,EAAqD;AACnD,MAAA,IAAA,CAAKC,GAAL,CAASC,QAAT,CAAkB7B,aAAlB,EADmD;AAGnD;;AACA,MAAK8B,IAAAA,CAAAA,QAAL,CAAcjB,OAAO,CAACkB,QAAtB,EAAgC,SAAhC,EAA2C,IAAA,CAAKC,gBAAhD,CAAA,CAAA;AACA,MAAKF,IAAAA,CAAAA,QAAL,CAAcjB,OAAO,CAACkB,QAAtB,EAAgC,eAAhC,EAAiD,IAAA,CAAKE,mBAAtD,CAAA,CAAA;AACD,KAAA;AACF,GAAA;AAED;;;AACAC,EAAAA,SAAS,CAACvB,UAAD,EAAaE,OAAb,EAAsB;AAC7B,IAAMD,MAAAA,QAAQ,GAAG,gCAAjB,CAAA;AACA,IAAA,MAAMuB,SAAS,GAAG,IAAA,CAAKC,CAAL,CAAOxB,QAAP,CAAlB,CAAA;AACA,IAAMyB,MAAAA,UAAU,GAAGrB,gBAAgB,CAAC,IAAA,CAAKR,aAAN,EAAqBG,UAArB,EAAiCE,OAAjC,CAAnC,CAAA;;AAEA,IAAA,QAAQwB,UAAR;AACA,MAAA,KAAK,MAAL;AACE,QAAA,IAAA,CAAKT,GAAL,CAASC,QAAT,CAAkB7B,aAAlB,CAAA,CAAA;AACA,QAAA,OAAA;;AACF,MAAA,KAAK,MAAL;AACE,QAAA,OAAA;;AACF,MAAA,KAAK,KAAL;AACE,QAAA,IAAA,CAAK4B,GAAL,CAASU,WAAT,CAAqBtC,aAArB,CAAA,CAAA;AACAU,QAAAA,SAAS,CAAC,IAAD,EAAOC,UAAP,EAAmBC,QAAnB,EAA6BC,OAA7B,CAAT,CAAA;AACA,QAAA,OAAO0B,EAAU,CAACC,OAAX,CAAmBL,SAAnB,CAAP,CAAA;;AACF,MAAA,KAAK,QAAL;AACE,QAAA,IAAA,CAAKP,GAAL,CAASC,QAAT,CAAkB7B,aAAlB,CAAA,CAAA;AACA,QAAOuC,OAAAA,EAAU,CAACE,OAAX,CAAmBN,SAAnB,CACJO,CAAAA,IADI,CACC,MAAM;AACVpC,UAAAA,YAAY,CAAC,IAAD,CAAZ,CAAA;AACD,SAHI,CAAA,CAIJqC,IAJI,EAAP,CAAA;AAIW;;AACb,MAAA,KAAK,MAAL;AACE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAA,IAAI,CAAC,IAAA,CAAKnC,aAAL,CAAmBoC,OAAxB,EAAiC;AAC/B,UAAA,MAAM,IAAIC,KAAJ,CAAU,oDAAV,CAAN,CAAA;AACD,SAAA;;AACDhC,QAAAA,OAAO,CAACiC,OAAR,GAAkB,IAAlB,CAAA;AACA,QAAA,OAAO,KAAKtC,aAAL,CACJoC,OADI,EAEJF,CAAAA,IAFI,CAEC,MAAM;AACVpC,UAAAA,YAAY,CAAC,IAAD,CAAZ,CAAA;AACAI,UAAAA,SAAS,CAAC,IAAD,EAAOC,UAAP,EAAmBC,QAAnB,EAA6BC,OAA7B,CAAT,CAAA;AACD,SALI,CAAA,CAMJ8B,IANI,EAAP,CAAA;AAMW;;AACb,MAAA,KAAK,MAAL;AACE,QAAOJ,OAAAA,EAAU,CAACQ,WAAX,CAAuB;AAC5BnB,UAAAA,GAAG,EAAEO,SADuB;AAE5Ba,UAAAA,IAAI,EAAE,MAAM;AACV,YAAMC,MAAAA,SAAS,GAAG/C,eAAe,CAAC,KAAKM,aAAN,CAAjC,CADU;AAIV;;AACAF,YAAAA,YAAY,CAAC,IAAD,CAAZ,CAAA;;AACA,YAAA,IAAI2C,SAAJ,EAAe;AACbd,cAAAA,SAAS,CAACG,WAAV,CAAsBrC,kBAAtB,CAAA,CAAA;AACA,cAAA,IAAA,CAAK2B,GAAL,CAASU,WAAT,CAAqBtC,aAArB,CAAA,CAAA;AACD,aAAA;;AACDU,YAAAA,SAAS,CAAC,IAAD,EAAOC,UAAP,EAAmBC,QAAnB,EAA6BC,OAA7B,CAAT,CAAA;AACD,WAAA;AAb2B,SAAvB,CAAA,CAcJ8B,IAdI,EAAP,CAAA;AAcW;;AACb,MAAA,KAAK,MAAL;AACE;AACA;AACAR,QAAAA,SAAS,CAACN,QAAV,CAAmB5B,kBAAnB,CAAA,CAAA;AACAS,QAAAA,SAAS,CAAC,IAAD,EAAOC,UAAP,EAAmBC,QAAnB,EAA6BC,OAA7B,CAAT,CAAA;AACA,QAAA,OAAO0B,EAAU,CAACC,OAAX,CAAmBL,SAAnB,CAAP,CAAA;;AACF,MAAA,KAAK,QAAL;AACE;AACA,QAAO,OAAA,IAAA,CAAKF,mBAAL,EAAP,CAAA;;AACF,MAAA;AACE,QAAA,MAAM,IAAIY,KAAJ,CAAU,UAAUR,UAAV,GAAuB,qBAAjC,CAAN,CAAA;AA9DF,KAAA;AAgED,GAxGsC;;;AA2GvCL,EAAAA,gBAAgB,CAACiB,SAAD,EAAY;AAC1B,IAAI,IAAA,CAACA,SAAD,IAAc/C,eAAe,CAAC,IAAKM,CAAAA,aAAN,CAAjC,EAAuD;AACrD,MAAA,OAAA;AACD,KAAA;;AACD,IAAK0B,IAAAA,CAAAA,SAAL,CAAe7B,aAAf,EAA8B;AAAEY,MAAAA,OAAO,EAAE,IAAA;AAAX,KAA9B,CAAA,CAAA;AACD,GAhHsC;;;AAmHvCgB,EAAAA,mBAAmB,GAAG;AACpB,IAAA,MAAME,SAAS,GAAG,IAAA,CAAKC,CAAL,CAAO,gCAAP,CAAlB,CAAA;AAEA,IAAOG,OAAAA,EAAU,CAACE,OAAX,CAAmBN,SAAnB,CACJO,CAAAA,IADI,CACC,MAAM;AACVpC,MAAAA,YAAY,CAAC,IAAD,CAAZ,CAAA;AACA6B,MAAAA,SAAS,CAACG,WAAV,CAAsBrC,kBAAtB,CAAA,CAAA;AACD,KAJI,CAKJ0C,CAAAA,IALI,EAAP,CAHoB;AASrB,GAAA;;AAEDO,EAAAA,eAAe,GAAG;AAChB,IAAA,OAAO,IAAKxB,CAAAA,QAAL,CAAcyB,MAAd,CAAqB;AAAEC,MAAAA,OAAO,EAAE,IAAA;AAAX,KAArB,CAAP,CAAA;AACD,GAAA;;AAEDC,EAAAA,YAAY,GAAG;AACb,IAAA,OAAO,IAAKjB,CAAAA,CAAL,CAAO,qBAAP,CAAP,CAAA;AACD,GAAA;;AApIsC;;;;"}
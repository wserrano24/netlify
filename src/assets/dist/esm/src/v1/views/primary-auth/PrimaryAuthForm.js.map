{"version":3,"file":"PrimaryAuthForm.js","sources":["../../../../../../src/v1/views/primary-auth/PrimaryAuthForm.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { Form, loc } from 'okta';\nimport DeviceFingerprint from 'v1/util/DeviceFingerprint';\nimport TypingUtil from 'v1/util/TypingUtil';\nimport Util from 'util/Util';\nimport TextBox from 'v1/views/shared/TextBox';\nexport default Form.extend({\n  className: 'primary-auth-form',\n  noCancelButton: true,\n  attributes: { novalidate: 'novalidate' },\n  save: function() {\n    if (this.settings.get('features.passwordlessAuth')) {\n      return loc('oform.next', 'login');\n    }\n    return loc('primaryauth.submit', 'login');\n  },\n  saveId: 'okta-signin-submit',\n  layout: 'o-form-theme',\n\n  // If socialAuth is configured, the title moves from the form to\n  // the top of the container (and is rendered in socialAuth).\n  title: function() {\n    let formTitle = loc('primaryauth.title', 'login');\n\n    if (this.settings.get('socialAuthPositionTop')) {\n      formTitle = '';\n    }\n    return formTitle;\n  },\n\n  initialize: function() {\n    const trackTypingPattern = this.settings.get('features.trackTypingPattern');\n\n    this.listenTo(this, 'save', async function() {\n      const { appState } = this.options;\n      if (trackTypingPattern) {\n        const typingPattern = TypingUtil.getTypingPattern();\n        appState.set('typingPattern', typingPattern);\n      }\n      const creds = {\n        username: this.model.get('username'),\n      };\n\n      if (!this.settings.get('features.passwordlessAuth')) {\n        creds.password = this.model.get('password');\n      }\n\n      // show loading spinner and disable submit button before processCreds hook runs\n      appState.trigger('loading', true);\n      this.state.trigger('togglePrimaryAuthButton', true);\n      \n      await this.settings.processCreds(creds);\n\n      if (this.settings.get('features.deviceFingerprinting')) {\n        try {\n          const fingerprint = await DeviceFingerprint.generateDeviceFingerprint(this.settings.get('baseUrl'), this.$el);\n          appState.set('deviceFingerprint', fingerprint);\n        } catch {\n          // Keep going even if device fingerprint fails\n        }\n      }\n\n      this.model.save();\n    });\n\n    this.stateEnableChange();\n    this.stateUsernameChange();\n  },\n\n  stateEnableChange: function() {\n    this.listenTo(this.state, 'change:enabled', function(model, enable) {\n      if (enable) {\n        this.enable();\n      } else {\n        this.disable();\n      }\n    });\n  },\n\n  stateUsernameChange: function() {\n    this.listenTo(this.state, 'change:disableUsername', function(model, disable) {\n      if (disable) {\n        this.$el.find('#okta-signin-username').attr('disabled', true);\n      } else {\n        this.$el.find('#okta-signin-username').removeAttr('disabled');\n      }\n    });\n  },\n\n  inputs: function() {\n    const inputs = [];\n\n    inputs.push(this.getUsernameField());\n    if (!this.settings.get('features.passwordlessAuth')) {\n      inputs.push(this.getPasswordField());\n    }\n    if (this.settings.get('features.rememberMe')) {\n      inputs.push(this.getRemeberMeCheckbox());\n    }\n    return inputs;\n  },\n\n  getUsernameField: function() {\n    const userNameFieldObject = {\n      className: 'margin-btm-5',\n      label: loc('primaryauth.username.placeholder', 'login'),\n      'label-top': true,\n      explain: () => {\n        if (!this.isCustomized('primaryauth.username.tooltip')) {\n          return false;\n        }\n\n        return Util.createInputExplain('primaryauth.username.tooltip', 'primaryauth.username.placeholder', 'login');\n      },\n      'explain-top': true,\n      name: 'username',\n      input: TextBox,\n      inputId: 'okta-signin-username',\n      type: 'text',\n      disabled: this.options.appState.get('disableUsername'),\n      autoComplete: 'username',\n      // TODO: support a11y attrs in Courage - OKTA-279025\n      render: function() {\n        const that = this;\n        function clearAriaInvalid() {\n          that.$(this)\n            .removeAttr('aria-invalid')\n            .off('focusout', clearAriaInvalid)\n            .off('change', clearAriaInvalid);\n        }\n\n        this.$(`input[name=${this.options.name}]`)\n          // OKTA-430928: to prevent NVDA and JAWS screen readers from\n          // announcing \"required invalid entry\" before the user has a chance to\n          // complete the field, aria-invalid is set to \"false\" initially and\n          // removed on focusout or change using clearAriaInvalid()\n          .attr({\n            'aria-invalid': 'false',\n            'aria-required': 'true',\n          })\n          .prop({\n            required: true,\n          })\n          .focusout(clearAriaInvalid)\n          .change(clearAriaInvalid);\n      },\n    };\n\n    return userNameFieldObject;\n  },\n\n  getPasswordField: function() {\n    const passwordFieldObject = {\n      className: 'margin-btm-30',\n      label: loc('primaryauth.password.placeholder', 'login'),\n      'label-top': true,\n      explain: () => {\n        if (!this.isCustomized('primaryauth.password.tooltip')) {\n          return false;\n        }\n\n        return Util.createInputExplain('primaryauth.password.tooltip', 'primaryauth.password.placeholder', 'login');\n      },\n      'explain-top': true,\n      name: 'password',\n      inputId: 'okta-signin-password',\n      validateOnlyIfDirty: true,\n      type: 'password',\n      autoComplete: 'current-password',\n      // TODO: support a11y attrs in Courage - OKTA-279025\n      render: function() {\n        const that = this;\n        function clearAriaInvalid() {\n          that.$(this)\n            .removeAttr('aria-invalid')\n            .off('focusout', clearAriaInvalid)\n            .off('change', clearAriaInvalid);\n        }\n        this.$(`input[name=${this.options.name}]`)\n          // OKTA-430928: to prevent NVDA and JAWS screen readers from\n          // announcing \"required invalid entry\" before the user has a chance to\n          // complete the field, aria-invalid is set to \"false\" initially and\n          // removed on focusout or change using clearAriaInvalid()\n          .attr({\n            'aria-invalid': 'false',\n            'aria-required': 'true',\n          })\n          .prop({\n            required: true\n          })\n          .focusout(clearAriaInvalid)\n          .change(clearAriaInvalid);\n      },\n    };\n\n    if (this.settings.get('features.showPasswordToggleOnSignInPage')) {\n      passwordFieldObject.params = {};\n      passwordFieldObject.params.showPasswordToggle = true;\n    }\n    return passwordFieldObject;\n  },\n\n  isCustomized: function(property) {\n    const language = this.settings.get('language');\n    const i18n = this.settings.get('i18n');\n    const customizedProperty = i18n && i18n[language] && i18n[language][property];\n\n    return !!customizedProperty;\n  },\n\n  // TODO fix method name typo\n  getRemeberMeCheckbox: function() {\n    return {\n      label: false,\n      placeholder: loc('remember', 'login'),\n      name: 'remember',\n      type: 'checkbox',\n      'label-top': true,\n      className: 'margin-btm-0',\n      initialize: function() {\n        this.listenTo(this.model, 'change:remember', function(model, val) {\n          // OKTA-98946: We normally re-render on changes to model values,\n          // but in this case we will manually update the checkbox due to\n          // iOS Safari and how it handles autofill - it will autofill the\n          // form anytime the dom elements are re-rendered, which prevents\n          // the user from editing their username.\n          this.$(':checkbox').prop('checked', val).trigger('updateState');\n        });\n      },\n    };\n  },\n\n  focus: function() {\n    if (!this.model.get('username')) {\n      this.getInputs().first().focus();\n    } else if (!this.settings.get('features.passwordlessAuth')) {\n      this.getInputs().toArray()[1].focus();\n    }\n    if (this.settings.get('features.trackTypingPattern')) {\n      TypingUtil.track('okta-signin-username');\n    }\n  },\n});\n"],"names":["Form","extend","className","noCancelButton","attributes","novalidate","save","settings","get","loc","saveId","layout","title","formTitle","initialize","trackTypingPattern","listenTo","appState","options","typingPattern","TypingUtil","getTypingPattern","set","creds","username","model","password","trigger","state","processCreds","fingerprint","DeviceFingerprint","generateDeviceFingerprint","$el","stateEnableChange","stateUsernameChange","enable","disable","find","attr","removeAttr","inputs","push","getUsernameField","getPasswordField","getRemeberMeCheckbox","userNameFieldObject","label","explain","isCustomized","Util","createInputExplain","name","input","TextBox","inputId","type","disabled","autoComplete","render","that","clearAriaInvalid","$","off","prop","required","focusout","change","passwordFieldObject","validateOnlyIfDirty","params","showPasswordToggle","property","language","i18n","customizedProperty","placeholder","val","focus","getInputs","first","toArray","track"],"mappings":"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"}
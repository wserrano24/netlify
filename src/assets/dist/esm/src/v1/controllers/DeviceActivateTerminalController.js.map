{"version":3,"file":"DeviceActivateTerminalController.js","sources":["../../../../../src/v1/controllers/DeviceActivateTerminalController.js"],"sourcesContent":["/*!\n * Copyright (c) 2017, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\n/* eslint max-len: [2, 160] */\nimport {_, loc, View} from 'okta';\nimport hbs from 'handlebars-inline-precompile';\nimport FormController from 'v1/util/FormController';\nimport FormType from 'v1/util/FormType';\n\nconst DEVICE_ACTIVATED = 'DEVICE_ACTIVATED';\nconst DEVICE_NOT_ACTIVATED_CONSENT_DENIED = 'DEVICE_NOT_ACTIVATED_CONSENT_DENIED';\nconst DEVICE_NOT_ACTIVATED = 'DEVICE_NOT_ACTIVATED';\nconst DEVICE_CODE_ERROR_KEYS = [\n  DEVICE_NOT_ACTIVATED_CONSENT_DENIED,\n  DEVICE_NOT_ACTIVATED\n];\n\nexport default FormController.extend({\n  className: 'device-code-terminal',\n  postRender: function() {\n    FormController.prototype.postRender.apply(this, arguments);\n\n    // show device code terminal icons\n    const iconClass = this.options.appState.get('deviceActivationStatus') === DEVICE_ACTIVATED\n      ? 'success-24-green' : 'error-24-red';\n    this.$('.o-form-head').before('<div class=\"device-code-terminal--icon-container\">' +\n      '<span class=\"device-code-terminal--icon ' + iconClass + '\"></span>' +\n      '</div>');\n  },\n  Model: {},\n  Form: {\n    noCancelButton: true,\n    noButtonBar: true,\n    title: function() {\n      const deviceActivationStatus = this.options.appState.get('deviceActivationStatus');\n      if (deviceActivationStatus === DEVICE_ACTIVATED) {\n        return loc('device.code.activated.success.title', 'login');\n      }\n      if (_.contains(DEVICE_CODE_ERROR_KEYS, deviceActivationStatus)) {\n        return loc('device.code.activated.error.title', 'login');\n      }\n    },\n    subtitle: function() {\n      const deviceActivationStatus = this.options.appState.get('deviceActivationStatus');\n      if (deviceActivationStatus === DEVICE_ACTIVATED) {\n        return loc('idx.device.activated', 'login');\n      }\n      if (deviceActivationStatus === DEVICE_NOT_ACTIVATED_CONSENT_DENIED) {\n        return loc('idx.device.not.activated.consent.denied', 'login');\n      }\n      if (deviceActivationStatus === DEVICE_NOT_ACTIVATED) {\n        return loc('idx.device.not.activated.internal.error', 'login');\n      }\n    },\n    formChildren: function() {\n      return [\n        FormType.View({\n          View: View.extend({\n            template: hbs(\n              '{{#if isDeviceCodeError}}\\\n                  <a href=\"/activate\" class=\"button button-primary text-align-c retry-button\" data-se=\"try-again\">\\\n                    {{i18n code=\"oie.try.again\" bundle=\"login\"}}\\\n                  </a>\\\n               {{/if}}\\\n              '\n            ),\n            getTemplateData: function() {\n              return {\n                isDeviceCodeError: _.contains(DEVICE_CODE_ERROR_KEYS, this.options.appState.get('deviceActivationStatus'))\n              };\n            },\n          }),\n        }),\n      ];\n    }\n  }\n});\n"],"names":["DEVICE_ACTIVATED","DEVICE_NOT_ACTIVATED_CONSENT_DENIED","DEVICE_NOT_ACTIVATED","DEVICE_CODE_ERROR_KEYS","FormController","extend","className","postRender","prototype","apply","arguments","iconClass","options","appState","get","$","before","Model","Form","noCancelButton","noButtonBar","title","deviceActivationStatus","loc","_","contains","subtitle","formChildren","FormType","View","template","getTemplateData","isDeviceCodeError"],"mappings":"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"}
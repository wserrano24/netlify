{"version":3,"file":"RefreshAuthStateController.js","sources":["../../../../../src/v1/controllers/RefreshAuthStateController.js"],"sourcesContent":["/* eslint-disable max-depth */\n/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport FormController from 'v1/util/FormController';\nexport default FormController.extend({\n  className: 'refresh-auth-state',\n\n  Model: {},\n\n  Form: {\n    noButtonBar: true,\n  },\n\n  preRender: function() {\n    const appState = this.options.appState;\n    const token = this.options.token;\n\n    this.model.startTransaction(function(authClient) {\n      appState.trigger('loading', true);\n      if (token) {\n        return authClient.tx.introspect({\n          stateToken: token,\n        });\n      }\n\n      // get stateToken from cookie\n      // currently only applies to old pipeline\n      if (authClient.tx.exists()) {\n        return authClient.tx.resume();\n      }\n\n      appState.trigger('navigate', '');\n    });\n  },\n\n  remove: function() {\n    this.options.appState.trigger('loading', false);\n    return FormController.prototype.remove.apply(this, arguments);\n  },\n});\n"],"names":["FormController","extend","className","Model","Form","noButtonBar","preRender","appState","options","token","model","startTransaction","authClient","trigger","tx","introspect","stateToken","exists","resume","remove","prototype","apply","arguments"],"mappings":";;AAAA;AAcA,iCAAeA,cAAc,CAACC,MAAf,CAAsB;AACnCC,EAAAA,SAAS,EAAE,oBADwB;AAGnCC,EAAAA,KAAK,EAAE,EAH4B;AAKnCC,EAAAA,IAAI,EAAE;AACJC,IAAAA,WAAW,EAAE,IAAA;AADT,GAL6B;AASnCC,EAAAA,SAAS,EAAE,YAAW;AACpB,IAAA,MAAMC,QAAQ,GAAG,IAAKC,CAAAA,OAAL,CAAaD,QAA9B,CAAA;AACA,IAAA,MAAME,KAAK,GAAG,IAAKD,CAAAA,OAAL,CAAaC,KAA3B,CAAA;AAEA,IAAA,IAAA,CAAKC,KAAL,CAAWC,gBAAX,CAA4B,UAASC,UAAT,EAAqB;AAC/CL,MAAAA,QAAQ,CAACM,OAAT,CAAiB,SAAjB,EAA4B,IAA5B,CAAA,CAAA;;AACA,MAAA,IAAIJ,KAAJ,EAAW;AACT,QAAA,OAAOG,UAAU,CAACE,EAAX,CAAcC,UAAd,CAAyB;AAC9BC,UAAAA,UAAU,EAAEP,KAAAA;AADkB,SAAzB,CAAP,CAAA;AAGD,OAN8C;AAS/C;;;AACA,MAAA,IAAIG,UAAU,CAACE,EAAX,CAAcG,MAAd,EAAJ,EAA4B;AAC1B,QAAA,OAAOL,UAAU,CAACE,EAAX,CAAcI,MAAd,EAAP,CAAA;AACD,OAAA;;AAEDX,MAAAA,QAAQ,CAACM,OAAT,CAAiB,UAAjB,EAA6B,EAA7B,CAAA,CAAA;AACD,KAfD,CAAA,CAAA;AAgBD,GA7BkC;AA+BnCM,EAAAA,MAAM,EAAE,YAAW;AACjB,IAAKX,IAAAA,CAAAA,OAAL,CAAaD,QAAb,CAAsBM,OAAtB,CAA8B,SAA9B,EAAyC,KAAzC,CAAA,CAAA;AACA,IAAOb,OAAAA,cAAc,CAACoB,SAAf,CAAyBD,MAAzB,CAAgCE,KAAhC,CAAsC,IAAtC,EAA4CC,SAA5C,CAAP,CAAA;AACD,GAAA;AAlCkC,CAAtB,CAAf;;;;"}
{"version":3,"file":"RecoveryQuestionController.js","sources":["../../../../../src/v1/controllers/RecoveryQuestionController.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { loc } from 'okta';\nimport FormController from 'v1/util/FormController';\nimport FormType from 'v1/util/FormType';\nimport FooterSignout from 'v1/views/shared/FooterSignout';\nimport TextBox from 'v1/views/shared/TextBox';\nexport default FormController.extend({\n  className: 'recovery-question',\n  Model: {\n    props: {\n      answer: ['string', true],\n      showAnswer: 'boolean',\n    },\n    save: function() {\n      return this.doTransaction(function(transaction) {\n        return transaction.answer({ answer: this.get('answer') });\n      });\n    },\n  },\n  Form: {\n    autoSave: true,\n    save: function() {\n      switch (this.options.appState.get('recoveryType')) {\n      case 'PASSWORD':\n        return loc('password.forgot.question.submit', 'login');\n      case 'UNLOCK':\n        return loc('account.unlock.question.submit', 'login');\n      default:\n        return loc('mfa.challenge.verify', 'login');\n      }\n    },\n    title: function() {\n      switch (this.options.appState.get('recoveryType')) {\n      case 'PASSWORD':\n        return loc('password.forgot.question.title', 'login');\n      case 'UNLOCK':\n        return loc('account.unlock.question.title', 'login');\n      default:\n        return '';\n      }\n    },\n    formChildren: function() {\n      return [\n        FormType.Input({\n          label: this.options.appState.get('recoveryQuestion'),\n          placeholder: loc('mfa.challenge.answer.placeholder', 'login'),\n          name: 'answer',\n          input: TextBox,\n          type: 'password',\n          initialize: function() {\n            this.listenTo(this.model, 'change:showAnswer', function() {\n              const type = this.model.get('showAnswer') ? 'text' : 'password';\n\n              this.getInputs()[0].changeType(type);\n            });\n          },\n        }),\n        FormType.Input({\n          label: false,\n          'label-top': true,\n          placeholder: loc('mfa.challenge.answer.showAnswer', 'login'),\n          className: 'recovery-question-show margin-btm-0',\n          name: 'showAnswer',\n          type: 'checkbox',\n        }),\n      ];\n    },\n  },\n  initialize: function() {\n    if (!this.settings.get('features.hideBackToSignInForReset')) {\n      this.addFooter(FooterSignout);\n    }\n  },\n});\n"],"names":["FormController","extend","className","Model","props","answer","showAnswer","save","doTransaction","transaction","get","Form","autoSave","options","appState","loc","title","formChildren","FormType","Input","label","placeholder","name","input","TextBox","type","initialize","listenTo","model","getInputs","changeType","settings","addFooter","FooterSignout"],"mappings":"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"}
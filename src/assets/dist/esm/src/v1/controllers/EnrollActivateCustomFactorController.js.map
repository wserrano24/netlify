{"version":3,"file":"EnrollActivateCustomFactorController.js","sources":["../../../../../src/v1/controllers/EnrollActivateCustomFactorController.js"],"sourcesContent":["/*!\n * Copyright (c) 2019-2020, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { loc, internal } from 'okta';\nimport EnrollCustomFactorController from './EnrollCustomFactorController';\nimport Factor from 'v1/models/Factor';\nimport FormType from 'v1/util/FormType';\nimport HtmlErrorMessageView from 'v1/views/mfa-verify/HtmlErrorMessageView';\nconst { Util } = internal.util;\nexport default EnrollCustomFactorController.extend({\n  Model: {\n    local: {\n      provider: 'string',\n      factorType: 'string',\n    },\n    save: function() {\n      return this.manageTransaction(() => {\n        const url = this.appState.get('enrollCustomFactorRedirectUrl');\n\n        if (url !== null) {\n          Util.redirect(url);\n        }\n      });\n    },\n  },\n\n  Form: function() {\n    const factor = new Factor.Model(this.options.appState.get('factor'), this.toJSON());\n    const vendorName = factor.get('vendorName');\n    const subtitle = loc('enroll.customFactor.subtitle', 'login', [vendorName]);\n    const saveText = loc('enroll.customFactor.save', 'login');\n\n    return {\n      autoSave: true,\n      title: vendorName,\n      subtitle: subtitle,\n      save: saveText,\n      formChildren: function() {\n        const result = [];\n\n        if (this.options.appState.get('isFactorResultFailed')) {\n          result.push(\n            FormType.View(\n              { View: new HtmlErrorMessageView({ message: this.options.appState.get('factorResultErrorMessage') }) },\n              { selector: '.o-form-error-container' }\n            )\n          );\n        }\n        return result;\n      },\n    };\n  },\n});\n"],"names":["Util","internal","util","EnrollCustomFactorController","extend","Model","local","provider","factorType","save","manageTransaction","url","appState","get","redirect","Form","factor","Factor","options","toJSON","vendorName","subtitle","loc","saveText","autoSave","title","formChildren","result","push","FormType","View","HtmlErrorMessageView","message","selector"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOA,MAAM;AAAEA,EAAAA,IAAI,EAAJA,IAAAA;AAAF,CAAWC,GAAAA,QAAQ,CAACC,IAA1B,CAAA;AACA,2CAAeC,4BAA4B,CAACC,MAA7B,CAAoC;AACjDC,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAE;AACLC,MAAAA,QAAQ,EAAE,QADL;AAELC,MAAAA,UAAU,EAAE,QAAA;AAFP,KADF;AAKLC,IAAAA,IAAI,EAAE,YAAW;AACf,MAAO,OAAA,IAAA,CAAKC,iBAAL,CAAuB,MAAM;AAClC,QAAMC,MAAAA,GAAG,GAAG,IAAKC,CAAAA,QAAL,CAAcC,GAAd,CAAkB,+BAAlB,CAAZ,CAAA;;AAEA,QAAIF,IAAAA,GAAG,KAAK,IAAZ,EAAkB;AAChBX,UAAAA,IAAI,CAACc,QAAL,CAAcH,GAAd,CAAA,CAAA;AACD,SAAA;AACF,OANM,CAAP,CAAA;AAOD,KAAA;AAbI,GAD0C;AAiBjDI,EAAAA,IAAI,EAAE,YAAW;AACf,IAAMC,MAAAA,MAAM,GAAG,IAAIC,MAAM,CAACZ,KAAX,CAAiB,KAAKa,OAAL,CAAaN,QAAb,CAAsBC,GAAtB,CAA0B,QAA1B,CAAjB,EAAsD,IAAKM,CAAAA,MAAL,EAAtD,CAAf,CAAA;AACA,IAAA,MAAMC,UAAU,GAAGJ,MAAM,CAACH,GAAP,CAAW,YAAX,CAAnB,CAAA;AACA,IAAMQ,MAAAA,QAAQ,GAAGC,GAAG,CAAC,8BAAD,EAAiC,OAAjC,EAA0C,CAACF,UAAD,CAA1C,CAApB,CAAA;AACA,IAAA,MAAMG,QAAQ,GAAGD,GAAG,CAAC,0BAAD,EAA6B,OAA7B,CAApB,CAAA;AAEA,IAAO,OAAA;AACLE,MAAAA,QAAQ,EAAE,IADL;AAELC,MAAAA,KAAK,EAAEL,UAFF;AAGLC,MAAAA,QAAQ,EAAEA,QAHL;AAILZ,MAAAA,IAAI,EAAEc,QAJD;AAKLG,MAAAA,YAAY,EAAE,YAAW;AACvB,QAAMC,MAAAA,MAAM,GAAG,EAAf,CAAA;;AAEA,QAAI,IAAA,IAAA,CAAKT,OAAL,CAAaN,QAAb,CAAsBC,GAAtB,CAA0B,sBAA1B,CAAJ,EAAuD;AACrDc,UAAAA,MAAM,CAACC,IAAP,CACEC,QAAQ,CAACC,IAAT,CACE;AAAEA,YAAAA,IAAI,EAAE,IAAIC,oBAAJ,CAAyB;AAAEC,cAAAA,OAAO,EAAE,IAAKd,CAAAA,OAAL,CAAaN,QAAb,CAAsBC,GAAtB,CAA0B,0BAA1B,CAAA;AAAX,aAAzB,CAAA;AAAR,WADF,EAEE;AAAEoB,YAAAA,QAAQ,EAAE,yBAAA;AAAZ,WAFF,CADF,CAAA,CAAA;AAMD,SAAA;;AACD,QAAA,OAAON,MAAP,CAAA;AACD,OAAA;AAjBI,KAAP,CAAA;AAmBD,GAAA;AA1CgD,CAApC,CAAf;;;;"}
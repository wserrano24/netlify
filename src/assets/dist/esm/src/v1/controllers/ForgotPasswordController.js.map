{"version":3,"file":"ForgotPasswordController.js","sources":["../../../../../src/v1/controllers/ForgotPasswordController.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { _, loc, View } from 'okta';\nimport hbs from 'handlebars-inline-precompile';\nimport Enums from 'util/Enums';\nimport FormController from 'v1/util/FormController';\nimport FormType from 'v1/util/FormType';\nimport Util from 'util/Util';\nimport ValidationUtil from 'v1/util/ValidationUtil';\nimport ContactSupport from 'v1/views/shared/ContactSupport';\nimport TextBox from 'v1/views/shared/TextBox';\nconst ForgotPasswordControllernoFactorsError = View.extend({\n  template: hbs`\n      <div class=\"okta-form-infobox-error infobox infobox-error\" role=\"alert\">\n        <span class=\"icon error-16\"></span>\n        <p>{{i18n code=\"password.forgot.noFactorsEnabled\" bundle=\"login\"}}</p>\n      </div>\n    `,\n});\nconst ForgotPasswordControllerFooter = View.extend({\n  template: hbs(\n    '\\\n      {{#unless hideBackToSignInForReset}}\\\n        <a href=\"#\" class=\"link help js-back\" data-se=\"back-link\">\\\n          {{i18n code=\"goback\" bundle=\"login\"}}\\\n        </a>\\\n      {{/unless}}\\\n      {{#if helpSupportNumber}}\\\n      <a href=\"#\" class=\"link goto js-contact-support\">\\\n        {{i18n code=\"mfa.noAccessToEmail\" bundle=\"login\"}}\\\n      </a>\\\n      {{/if}}\\\n    '\n  ),\n  className: 'auth-footer',\n  events: {\n    'click .js-back': function(e) {\n      e.preventDefault();\n      this.back();\n    },\n    'click .js-contact-support': function(e) {\n      e.preventDefault();\n      this.state.trigger('contactSupport');\n      this.$('.js-contact-support').hide();\n    },\n  },\n  getTemplateData: function() {\n    return {\n      hideBackToSignInForReset: this.settings.get('features.hideBackToSignInForReset'),\n      helpSupportNumber: this.settings.get('helpSupportNumber'),\n    };\n  },\n  back: function() {\n    this.state.set('navigateDir', Enums.DIRECTION_BACK);\n    this.options.appState.trigger('navigate', '');\n  },\n});\nexport default FormController.extend({\n  className: 'forgot-password',\n  Model: {\n    props: {\n      username: ['string', true],\n      factorType: ['string', true],\n    },\n    validate: function() {\n      return ValidationUtil.validateUsername(this);\n    },\n    save: function() {\n      const self = this;\n      const relayState = this.settings.get('relayState');\n\n      this.startTransaction(function(authClient) {\n        return authClient.forgotPassword({\n          username: self.settings.transformUsername(self.get('username'), Enums.FORGOT_PASSWORD),\n          factorType: self.get('factorType'),\n          relayState: relayState,\n        });\n      }).catch(function() {\n        //need empty fail handler on model to display errors on form\n      });\n    },\n  },\n  Form: {\n    noButtonBar: true,\n    title: _.partial(loc, 'password.reset', 'login'),\n    formChildren: function() {\n      const smsEnabled = this.settings.get('features.smsRecovery');\n      /*eslint complexity: [2, 9] max-statements: [2, 23] */\n\n      const callEnabled = this.settings.get('features.callRecovery');\n      const emailEnabled = this.settings.get('features.emailRecovery');\n      const noFactorsEnabled = !(smsEnabled || callEnabled || emailEnabled);\n      const formChildren = [];\n\n      if (noFactorsEnabled) {\n        this.add(ForgotPasswordControllernoFactorsError, '.o-form-error-container');\n      } else {\n        formChildren.push(\n          FormType.Input({\n            label: loc('password.forgot.email.or.username.placeholder', 'login'),\n            'label-top': true,\n            explain: Util.createInputExplain(\n              'password.forgot.email.or.username.tooltip',\n              'password.forgot.email.or.username.placeholder',\n              'login'\n            ),\n            'explain-top': true,\n            name: 'username',\n            input: TextBox,\n            inputId: 'account-recovery-username',\n            autoComplete: 'username',\n            type: 'text',\n            inlineValidation: false,\n          })\n        );\n        if (smsEnabled || callEnabled) {\n          formChildren.push(\n            FormType.View({\n              View: View.extend({\n                template: hbs(\n                  '\\\n                  <p class=\"mobile-recovery-hint\">\\\n                    {{i18n code=\"recovery.mobile.hint\" bundle=\"login\" arguments=\"mobileFactors\"}}\\\n                  </p>'\n                ),\n                getTemplateData: function() {\n                  let mobileFactors;\n\n                  if (smsEnabled && callEnabled) {\n                    mobileFactors = loc('recovery.smsOrCall');\n                  } else if (callEnabled) {\n                    mobileFactors = loc('recovery.call');\n                  } else {\n                    mobileFactors = loc('recovery.sms');\n                  }\n                  return { mobileFactors: mobileFactors };\n                },\n              }),\n            })\n          );\n        }\n        if (smsEnabled) {\n          this.$el.addClass('forgot-password-sms-enabled');\n          formChildren.push(\n            this.createRecoveryFactorButton(\n              'sms-button',\n              'password.forgot.sendText',\n              Enums.RECOVERY_FACTOR_TYPE_SMS,\n              this\n            )\n          );\n          this.setDefaultFactorType(Enums.RECOVERY_FACTOR_TYPE_SMS);\n        }\n        if (callEnabled) {\n          this.$el.addClass('forgot-password-call-enabled');\n          formChildren.push(\n            this.createRecoveryFactorButton(\n              'call-button',\n              'password.forgot.call',\n              Enums.RECOVERY_FACTOR_TYPE_CALL,\n              this\n            )\n          );\n          this.setDefaultFactorType(Enums.RECOVERY_FACTOR_TYPE_CALL);\n        }\n        if (emailEnabled) {\n          this.$el.addClass('forgot-password-email-enabled');\n          formChildren.push(\n            this.createRecoveryFactorButton(\n              'email-button',\n              'password.forgot.sendEmail',\n              Enums.RECOVERY_FACTOR_TYPE_EMAIL,\n              this\n            )\n          );\n          this.setDefaultFactorType(Enums.RECOVERY_FACTOR_TYPE_EMAIL);\n        }\n      }\n\n      return formChildren;\n    },\n    initialize: function() {\n      this.listenTo(this.state, 'contactSupport', function() {\n        this.add(ContactSupport, '.o-form-error-container');\n      });\n\n      this.listenTo(this, 'save', function() {\n        this.options.appState.set('username', this.model.get('username'));\n        this.model.save();\n      });\n    },\n    setDefaultFactorType: function(factorType) {\n      if (_.isEmpty(this.model.get('factorType'))) {\n        this.model.set('factorType', factorType);\n      }\n    },\n    createRecoveryFactorButton: function(className, labelCode, factorType, form) {\n      return FormType.Button({\n        attributes: { 'data-se': className },\n        className: 'button button-primary button-wide ' + className,\n        title: loc(labelCode, 'login'),\n        click: function() {\n          form.clearErrors();\n          if (this.model.isValid()) {\n            this.model.set('factorType', factorType);\n            form.trigger('save', this.model);\n          }\n        },\n      });\n    },\n  },\n  Footer: ForgotPasswordControllerFooter,\n\n  initialize: function() {\n    this.options.appState.unset('username');\n  },\n});\n"],"names":["ForgotPasswordControllernoFactorsError","View","extend","template","ForgotPasswordControllerFooter","className","events","e","preventDefault","back","state","trigger","$","hide","getTemplateData","hideBackToSignInForReset","settings","get","helpSupportNumber","set","Enums","DIRECTION_BACK","options","appState","FormController","Model","props","username","factorType","validate","ValidationUtil","validateUsername","save","self","relayState","startTransaction","authClient","forgotPassword","transformUsername","FORGOT_PASSWORD","catch","Form","noButtonBar","title","_","partial","loc","formChildren","smsEnabled","callEnabled","emailEnabled","noFactorsEnabled","add","push","FormType","Input","label","explain","Util","createInputExplain","name","input","TextBox","inputId","autoComplete","type","inlineValidation","mobileFactors","$el","addClass","createRecoveryFactorButton","RECOVERY_FACTOR_TYPE_SMS","setDefaultFactorType","RECOVERY_FACTOR_TYPE_CALL","RECOVERY_FACTOR_TYPE_EMAIL","initialize","listenTo","ContactSupport","model","isEmpty","labelCode","form","Button","attributes","click","clearErrors","isValid","Footer","unset"],"mappings":"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"}
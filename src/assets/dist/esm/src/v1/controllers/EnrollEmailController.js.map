{"version":3,"file":"EnrollEmailController.js","sources":["../../../../../src/v1/controllers/EnrollEmailController.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { _, loc, View } from 'okta';\nimport hbs from 'handlebars-inline-precompile';\nimport FormController from 'v1/util/FormController';\nimport FormType from 'v1/util/FormType';\nimport Footer from 'v1/views/enroll-factors/Footer';\n\nconst Model = {\n  local: {\n    factorType: 'string',\n    provider: 'string',\n  },\n  save: function() {\n    this.trigger('save');\n    const factorOpt = this.pick('factorType', 'provider');\n    return this.doTransaction(function(transaction) {\n      const factor = _.findWhere(transaction.factors, factorOpt);\n\n      return factor.enroll();\n    });\n  },\n};\n\nconst Form = function() {\n  return {\n    title: _.partial(loc, 'email.enroll.title', 'login'),\n    noButtonBar: false,\n    autoSave: true,\n    save: _.partial(loc, 'email.button.send', 'login'),\n    formChildren: [\n      FormType.View({\n        View: View.extend({\n          attributes: {\n            'data-se': 'enroll-email-content',\n          },\n          template: hbs('{{i18n code=\"email.enroll.description\" bundle=\"login\"}}'),\n        }),\n      }),\n    ],\n  };\n};\n\nexport default FormController.extend({\n  className: 'enroll-email',\n\n  Model: Model,\n\n  Form: Form,\n\n  Footer: Footer,\n\n  initialize: function() {\n    this.model.set(_.pick(this.options, 'factorType', 'provider'));\n  },\n});\n"],"names":["Model","local","factorType","provider","save","trigger","factorOpt","pick","doTransaction","transaction","factor","_","findWhere","factors","enroll","Form","title","partial","loc","noButtonBar","autoSave","formChildren","FormType","View","extend","attributes","template","FormController","className","Footer","initialize","model","set","options"],"mappings":"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"}
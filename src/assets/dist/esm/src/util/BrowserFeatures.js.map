{"version":3,"file":"BrowserFeatures.js","sources":["../../../../src/util/BrowserFeatures.ts"],"sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nconst fn: Record<string, (...any: any[]) => any> = {};\nconst hasFullCorsSupport = 'withCredentials' in new window.XMLHttpRequest();\nconst hasXDomainRequest = typeof window.XDomainRequest !== 'undefined';\n\nfn.corsIsNotSupported = function() {\n  return !(hasFullCorsSupport || hasXDomainRequest);\n};\n\nfn.corsIsNotEnabled = function(jqXhr) {\n  // Not a definitive check, but it's the best we've got.\n  // Note: This will change when OktaAuth is updated\n  return jqXhr.status === 0;\n};\n\n// This is currently not being used, but we'll keep it around for when we\n// want a fallback mechanism - i.e. use localStorage if it exists, else fall\n// back to cookies.\nfn.localStorageIsNotSupported = function() {\n  const test = 'test';\n\n  try {\n    localStorage.setItem(test, test);\n    localStorage.removeItem(test);\n    return false;\n  } catch (e) {\n    return true;\n  }\n};\n\nfn.supportsPushState = function(win) {\n  win = win || window;\n  return !!(win.history && win.history.pushState);\n};\n\nfn.isIE = function() {\n  return /(msie|trident)/i.test(navigator.userAgent);\n};\n\nfn.isFirefox = function() {\n  return navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n};\n\nfn.isEdge = function() {\n  // This is to just check for windows edge. Mac edge - chromium based's UA is 'edg'.\n  return navigator.userAgent.toLowerCase().indexOf('edge') > -1;\n};\n\nfn.isSafari = function() {\n  // Chrome has safari in its useragent string so adding this extra check.\n  return (\n    navigator.userAgent.toLowerCase().indexOf('safari') > -1 &&\n    navigator.userAgent.toLowerCase().indexOf('chrome') === -1\n  );\n};\n\nfn.isMac = function() {\n  return navigator.platform.toUpperCase().indexOf('MAC') >= 0;\n};\n\n\nfn.isAndroid = function() {\n  // Windows Phone also contains \"Android\"\n  return /android/i.test(navigator.userAgent) &&\n    !/windows phone/i.test(navigator.userAgent);\n};\n\nfn.isIOS = function() {\n  // iOS detection from: http://stackoverflow.com/a/9039885/177710\n  return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n};\n\n// Returns a list of languages the user has configured for their browser, in\n// order of preference.\nfn.getUserLanguages = function() {\n  // Chrome, Firefox\n  if (navigator.languages) {\n    return [...navigator.languages];\n  }\n\n  const languages = [];\n  const properties = [\n    'language',         // Safari, IE11\n    'userLanguage',     // IE\n    'browserLanguage',  // IE\n    'systemLanguage'    // IE\n  ];\n\n  properties.forEach(function(property) {\n    if (navigator[property]) {\n      languages.push(navigator[property]);\n    }\n  });\n\n  return languages;\n};\n\n\nexport default fn;\n"],"names":["fn","hasFullCorsSupport","window","XMLHttpRequest","hasXDomainRequest","XDomainRequest","corsIsNotSupported","corsIsNotEnabled","jqXhr","status","localStorageIsNotSupported","test","localStorage","setItem","removeItem","e","supportsPushState","win","history","pushState","isIE","navigator","userAgent","isFirefox","toLowerCase","indexOf","isEdge","isSafari","isMac","platform","toUpperCase","isAndroid","isIOS","MSStream","getUserLanguages","languages","properties","forEach","property","push"],"mappings":"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"}
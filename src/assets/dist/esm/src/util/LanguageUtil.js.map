{"version":3,"file":"LanguageUtil.js","sources":["../../../../src/util/LanguageUtil.js"],"sourcesContent":["import Bundles from 'util/Bundles';\nimport config from 'config/config.json';\n\nfunction loadLanguage(appState, settings) {\n  const languageCode = appState.get('languageCode') || settings.get('languageCode') || config.defaultLanguage;\n  const i18n = settings.get('i18n');\n  const assetBaseUrl = settings.get('assets.baseUrl');\n  const assetRewrite = settings.get('assets.rewrite');\n  const supportedLanguages = settings.get('supportedLanguages');\n\n  const timeout = setTimeout(function() {\n    // Trigger a spinner if we're waiting on a request for a new language.\n    appState.trigger('loading', true);\n  }, 200);\n\n  return Bundles.loadLanguage(languageCode, i18n, {\n    baseUrl: assetBaseUrl,\n    rewrite: assetRewrite,\n  }, supportedLanguages).then(function() {\n    clearTimeout(timeout);\n    appState.trigger('loading', false);\n  });\n  // TODO: what if load language error?\n}\n\nexport default {\n  loadLanguage,\n};\n"],"names":["loadLanguage","appState","settings","languageCode","get","config","defaultLanguage","i18n","assetBaseUrl","assetRewrite","supportedLanguages","timeout","setTimeout","trigger","Bundles","baseUrl","rewrite","then","clearTimeout"],"mappings":";;;AAGA,SAASA,YAAT,CAAsBC,QAAtB,EAAgCC,QAAhC,EAA0C;AACxC,EAAA,MAAMC,YAAY,GAAGF,QAAQ,CAACG,GAAT,CAAa,cAAb,CAAA,IAAgCF,QAAQ,CAACE,GAAT,CAAa,cAAb,CAAhC,IAAgEC,MAAM,CAACC,eAA5F,CAAA;AACA,EAAA,MAAMC,IAAI,GAAGL,QAAQ,CAACE,GAAT,CAAa,MAAb,CAAb,CAAA;AACA,EAAA,MAAMI,YAAY,GAAGN,QAAQ,CAACE,GAAT,CAAa,gBAAb,CAArB,CAAA;AACA,EAAA,MAAMK,YAAY,GAAGP,QAAQ,CAACE,GAAT,CAAa,gBAAb,CAArB,CAAA;AACA,EAAA,MAAMM,kBAAkB,GAAGR,QAAQ,CAACE,GAAT,CAAa,oBAAb,CAA3B,CAAA;AAEA,EAAA,MAAMO,OAAO,GAAGC,UAAU,CAAC,YAAW;AACpC;AACAX,IAAAA,QAAQ,CAACY,OAAT,CAAiB,SAAjB,EAA4B,IAA5B,CAAA,CAAA;AACD,GAHyB,EAGvB,GAHuB,CAA1B,CAAA;AAKA,EAAA,OAAOC,OAAO,CAACd,YAAR,CAAqBG,YAArB,EAAmCI,IAAnC,EAAyC;AAC9CQ,IAAAA,OAAO,EAAEP,YADqC;AAE9CQ,IAAAA,OAAO,EAAEP,YAAAA;AAFqC,GAAzC,EAGJC,kBAHI,CAGgBO,CAAAA,IAHhB,CAGqB,YAAW;AACrCC,IAAAA,YAAY,CAACP,OAAD,CAAZ,CAAA;AACAV,IAAAA,QAAQ,CAACY,OAAT,CAAiB,SAAjB,EAA4B,KAA5B,CAAA,CAAA;AACD,GANM,CAAP,CAZwC;AAoBzC,CAAA;;AAED,mBAAe;AACbb,EAAAA,YAAY,EAAZA,YAAAA;AADa,CAAf;;;;"}
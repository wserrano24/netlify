{"version":3,"file":"Errors.js","sources":["../../../../src/util/Errors.ts"],"sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { loc } from 'okta';\nimport Enums from './Enums';\nimport { ErrorXHR, ErrorContextData } from 'types/errors';\nimport { FlowIdentifier } from '@okta/okta-auth-js';\n\nabstract class CustomError extends Error {\n  constructor(message?: string) {\n    super(message);\n\n    // 'Error' breaks prototype chain. Need to restore it for ES5.\n    // https://github.com/microsoft/TypeScript/wiki/FAQ#why-doesnt-extending-built-ins-like-error-array-and-map-work\n    // Note: no need to adjust prototype in subclasses of 'CustomError'.\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\n\nexport class ConfigError extends CustomError {\n  name = Enums.CONFIG_ERROR;\n  constructor(message?: string) {\n    super(message || loc('error.config'));\n  }\n}\n\nexport class UnsupportedBrowserError extends CustomError {\n  name = Enums.UNSUPPORTED_BROWSER_ERROR;\n  constructor(message?: string) {\n    super(message || loc('error.unsupported.browser'));\n  }\n}\n\nexport class OAuthError extends CustomError {\n  name = Enums.OAUTH_ERROR;\n}\n\nexport class RegistrationError extends CustomError {\n  name = Enums.REGISTRATION_FAILED;\n}\n\n// Thrown when initiation of poll was cancelled.\nexport class AuthStopPollInitiationError extends CustomError {\n  name = Enums.AUTH_STOP_POLL_INITIATION_ERROR;\n}\n\nexport class U2FError extends CustomError {\n  xhr: ErrorXHR;\n  name = Enums.U2F_ERROR;\n  constructor(err: ErrorContextData) {\n    super(err.xhr.responseJSON.errorSummary);\n    this.xhr = err.xhr;\n  }\n}\n\nexport class WebAuthnError extends CustomError {\n  xhr: ErrorXHR;\n  name = Enums.WEB_AUTHN_ERROR;\n  constructor(err: ErrorContextData) {\n    super(err.xhr.responseJSON.errorSummary);\n    this.xhr = err.xhr;\n  }\n}\n\n// This is triggered only when code aborts webauthn browser prompt.\nexport class WebauthnAbortError extends CustomError {\n  name = Enums.WEBAUTHN_ABORT_ERROR;\n}\n\nexport class ConfiguredFlowError extends CustomError {\n  flowSetting: FlowIdentifier;\n  name = Enums.CONFIGURED_FLOW_ERROR;\n  constructor(message: string, flowSetting: FlowIdentifier) {\n    super(message);\n    this.flowSetting = flowSetting;\n  }\n}\n"],"names":["CustomError","Error","constructor","message","Object","setPrototypeOf","new","target","prototype","ConfigError","loc","name","Enums","CONFIG_ERROR","UnsupportedBrowserError","UNSUPPORTED_BROWSER_ERROR","OAuthError","OAUTH_ERROR","RegistrationError","REGISTRATION_FAILED","AuthStopPollInitiationError","AUTH_STOP_POLL_INITIATION_ERROR","U2FError","err","xhr","responseJSON","errorSummary","U2F_ERROR","WebAuthnError","WEB_AUTHN_ERROR","WebauthnAbortError","WEBAUTHN_ABORT_ERROR","ConfiguredFlowError","flowSetting","CONFIGURED_FLOW_ERROR"],"mappings":"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"}